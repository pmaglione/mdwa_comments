(function(GLOBAL,jQuery,undefined,define){if(GLOBAL["wr"]){return};(function(a){function q(j){j.each(function(){var j=h(this);if(j){var s=a(this),g=o.call(s);a.each(c(j),function(b,e){(!g||!g.hasOwnProperty(b))&&o.call(s,b,e)});a(j).remove()}})}function i(c){c.each(function(){var c=h(this);c&&a(c).remove()})}function h(a){return(a=a.nextSibling)&&8===a.nodeType&&0===(""+a.nodeValue).indexOf("[data]")?a:null}function c(c){c=c.nodeValue;return 0===c.indexOf("[data]")?(c=c.substring(6).replace(/^\s+|\s+$/g,""),a.parseJSON(c)):{}}var o=a.fn.data,j=a.fn.removeData;a.fn.data=
function(){q(this);return o.apply(this,arguments)};a.fn.removeData=function(){0<arguments.length?q(this):i(this);return j.apply(this,arguments)}})(jQuery);(function(a){a.deparam=function(q,i){var h={},c={"true":!0,"false":!1,"null":null};a.each(q.replace(/\+/g," ").split("&"),function(o,j){var s,k=j.split("="),n=decodeURIComponent(k[0]),g=h,b=0,e=n.split("]["),m=e.length-1;/\[/.test(e[0])&&/\]$/.test(e[m])?(e[m]=e[m].replace(/\]$/,""),e=e.shift().split("[").concat(e),m=e.length-1):m=0;if(2===k.length)if(k=decodeURIComponent(k[1]),i&&(k=k&&!isNaN(k)?+k:"undefined"===k?void 0:void 0!==c[k]?c[k]:k),m)for(;b<=m;b++)n=""===e[b]?g.length:e[b],s=g[n]=b<m?
g[n]||(e[b+1]&&isNaN(e[b+1])?{}:[]):k,g=s;else a.isArray(h[n])?h[n].push(k):h[n]=void 0!==h[n]?[h[n],k]:k;else n&&(h[n]=i?void 0:"")});return h}})(jQuery);(function(a){var q={maximize:!1,minimize:!1,dblclick:!1,titlebar:!1,icons:{maximize:"ui-icon-extlink",minimize:"ui-icon-minus",restore:"ui-icon-newwin"},events:{load:null,beforeCollapse:null,beforeMaximize:null,beforeMinimize:null,beforeRestore:null,collapse:null,maximize:null,minimize:null,restore:null}},i,h={init:function(c){a(this).dialog||a.error("jQuery.dialogExtend Error : Only jQuery UI Dialog element is accepted");c=c||{};c.icons=c.icons||{};c.events=c.events||{};i=a.extend({},q,c);i.icons=
a.extend({},q.icons,c.icons);i.events=a.extend({},q.events,c.events);a(this).each(function(){a(this).data("dialog-state","normal").dialogExtend("_verifySettings").dialogExtend("_initEvents").dialogExtend("_initStyles").dialogExtend("_initButtons").dialogExtend("_initTitleBar").dialogExtend("_trigger","load")});return this},collapse:function(){var c=a(this).dialog("widget").find(".ui-dialog-titlebar").height()+15;a(this).dialogExtend("_trigger","beforeCollapse").dialogExtend("_saveSnapshot").data("dialog-state",
"collapsed").dialog("option",{height:c,maxHeight:c}).hide().dialog("widget").find(".ui-dialog-buttonpane:visible").hide().end().find(".ui-dialog-titlebar").css("white-space","nowrap").end().find(".ui-dialog-content").dialogExtend("_trigger","collapse");return this},maximize:function(){var c=a(window).height()-11,o=a(window).width()-11;a(this).dialogExtend("_trigger","beforeMaximize").dialogExtend("_saveSnapshot").data("dialog-state","maximized").dialogExtend("_toggleButtons").dialog("widget").css("position",
"fixed").find(".ui-dialog-content").show().dialog("widget").find(".ui-dialog-buttonpane").show().end().find(".ui-dialog-content").dialog("option",{resizable:!1,draggable:!1,height:c,width:o,position:[1,1]}).dialog("widget").draggable("option","handle",null).find(".ui-dialog-draggable-handle").css("cursor","text").end().find(".ui-dialog-content").dialogExtend("_trigger","maximize");return this},minimize:function(){var c=a(this).dialog("widget").find(".ui-dialog-titlebar").height()+15;a("#minimized-dialog-container").length||
a("<div />").attr("id","#minimized-dialog-container".replace("#","")).css({left:1,bottom:1,position:"fixed"}).appendTo("body");a(this).dialogExtend("_trigger","beforeMinimize").dialogExtend("_saveSnapshot").data("dialog-state","minimized").dialogExtend("_toggleButtons").dialog("widget").css({"float":"left",margin:1,position:"static"}).appendTo("#minimized-dialog-container").find(".ui-dialog-content").dialog("option",{resizable:!1,draggable:!1,height:c,width:200}).hide().dialog("widget").find(".ui-dialog-buttonpane:visible").hide().end().find(".ui-dialog-titlebar").css("white-space",
"nowrap").end().find(".ui-dialog-content").dialog("widget").draggable("option","handle",null).find(".ui-dialog-draggable-handle").css("cursor","text").end().find(".ui-dialog-content").dialogExtend("_trigger","minimize");return this},restore:function(){var c=a(this).data("dialog-state");a(this).dialogExtend("_trigger","beforeRestore").data("dialog-state","normal").dialogExtend("_toggleButtons").dialogExtend("maximized"==c?"_restoreFromMaximized":"minimized"==c?"_restoreFromMinimized":"collapsed"==
c?"_restoreFromCollapsed":a.error("jQuery.dialogExtend Error : Cannot restore dialog from unknown state '"+c+"'")).dialogExtend("_trigger","restore");return this},_initButtons:function(){var c=this,o=a(c).dialog("widget").find(".ui-dialog-titlebar");a(o).append('<a class="ui-dialog-titlebar-maximize ui-corner-all" href="#"><span class="ui-icon '+i.icons.maximize+'">maximize</span></a>').append('<a class="ui-dialog-titlebar-minimize ui-corner-all" href="#"><span class="ui-icon '+i.icons.minimize+'">minimize</span></a>').append('<a class="ui-dialog-titlebar-restore ui-corner-all" href="#"><span class="ui-icon '+
i.icons.restore+'">restore</span></a>').find(".ui-dialog-titlebar-maximize,.ui-dialog-titlebar-minimize,.ui-dialog-titlebar-restore").attr("role","button").mouseover(function(){a(this).addClass("ui-state-hover")}).mouseout(function(){a(this).removeClass("ui-state-hover")}).focus(function(){a(this).addClass("ui-state-focus")}).blur(function(){a(this).removeClass("ui-state-focus")}).end().find(".ui-dialog-titlebar-maximize").toggle(i.maximize).css({right:i.maximize?"1.4em":"-9999em"}).click(function(j){j.preventDefault();
a(c).dialogExtend("maximize")}).end().find(".ui-dialog-titlebar-minimize").toggle(i.minimize).css({right:i.maximize?"2.5em":i.minimize?"1.4em":"-9999em"}).click(function(j){j.preventDefault();a(c).dialogExtend("minimize")}).end().find(".ui-dialog-titlebar-restore").hide().css({right:"-9999em"}).click(function(j){j.preventDefault();a(c).dialogExtend("restore")}).end().dblclick(function(){i.dblclick&&i.dblclick.length&&a(c).dialogExtend("normal"!=a(c).data("dialog-state")?"restore":i.dblclick)}).each(function(){a(this).select(function(){return!1})});
return c},_initEvents:function(){var c=this;a.each(i.events,function(o){a.isFunction(i.events[o])&&a(c).bind(o+".dialogExtend",i.events[o])});return c},_initStyles:function(){var c;a('<style type="text/css">.ui-dialog .ui-dialog-titlebar-maximize,.ui-dialog .ui-dialog-titlebar-minimize,.ui-dialog .ui-dialog-titlebar-restore { position: absolute; top: 50%; width: 19px; margin: -10px 0 0 0; padding: 1px; height: 18px; }.ui-dialog .ui-dialog-titlebar-maximize span,.ui-dialog .ui-dialog-titlebar-minimize span,.ui-dialog .ui-dialog-titlebar-restore span { display: block; margin: 1px; }.ui-dialog .ui-dialog-titlebar-maximize:hover,.ui-dialog .ui-dialog-titlebar-maximize:focus,.ui-dialog .ui-dialog-titlebar-minimize:hover,.ui-dialog .ui-dialog-titlebar-minimize:focus,.ui-dialog .ui-dialog-titlebar-restore:hover,.ui-dialog .ui-dialog-titlebar-restore:focus { padding: 0; }.ui-dialog .ui-dialog-titlebar ::selection { background-color: transparent; }</style>').appendTo("body");
return this},_initTitleBar:function(){switch(i.titlebar){case !1:break;case "none":if(a(this).dialog("option","draggable")){var c=a("<div />").addClass("ui-dialog-draggable-handle").css("cursor","move").height(5);a(this).dialog("widget").prepend(c).draggable("option","handle",c)}a(this).dialog("widget").find(".ui-dialog-titlebar").find(".ui-dialog-title").html("\ufffd").end().css({"background-color":"transparent","background-image":"none",border:0,position:"absolute",right:0,top:0,"z-index":9999}).end();
break;case "transparent":a(this).dialog("widget").find(".ui-dialog-titlebar").css({"background-color":"transparent","background-image":"none",border:0});break;default:a.error("jQuery.dialogExtend Error : Invalid <titlebar> value '"+i.titlebar+"'")}return this},_loadSnapshot:function(){return{config:{resizable:a(this).data("original-config-resizable"),draggable:a(this).data("original-config-draggable")},size:{height:a(this).data("original-size-height"),width:a(this).data("original-size-width"),maxHeight:a(this).data("original-size-maxHeight")},
position:{mode:a(this).data("original-position-mode"),left:a(this).data("original-position-left"),top:a(this).data("original-position-top")},titlebar:{wrap:a(this).data("original-titlebar-wrap")}}},_restoreFromCollapsed:function(){var c=a(this).dialogExtend("_loadSnapshot");a(this).show().dialog("widget").find(".ui-dialog-buttonpane:hidden").show().end().find(".ui-dialog-titlebar").css("white-space",c.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{height:c.size.height,maxHeight:c.size.maxHeight});
return this},_restoreFromMaximized:function(){var c=a(this).dialogExtend("_loadSnapshot");a(this).dialog("widget").css("position",c.position.mode).find(".ui-dialog-titlebar").css("white-space",c.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{resizable:c.config.resizable,draggable:c.config.draggable,height:c.size.height,width:c.size.width,maxHeight:c.size.maxHeight,position:[c.position.left,c.position.top]}).dialog("widget").draggable("option","handle",a(this).find(".ui-dialog-draggable-handle")).find(".ui-dialog-draggable-handle").css("cursor",
"move");return this},_restoreFromMinimized:function(){var c=a(this).dialogExtend("_loadSnapshot");a(this).dialog("widget").appendTo("body").css({"float":"none",margin:0,position:c.position.mode}).find(".ui-dialog-content").show().dialog("widget").find(".ui-dialog-buttonpane:hidden").show().end().find(".ui-dialog-titlebar").css("white-space",c.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{resizable:c.config.resizable,draggable:c.config.draggable,height:c.size.height,width:c.size.width,
maxHeight:c.size.maxHeight,position:[c.position.left,c.position.top]}).dialog("widget").draggable("option","handle",a(this).find(".ui-dialog-draggable-handle")).find(".ui-dialog-draggable-handle").css("cursor","move");return this},_saveSnapshot:function(){"normal"==a(this).data("dialog-state")&&a(this).data("original-config-resizable",a(this).dialog("option","resizable")).data("original-config-draggable",a(this).dialog("option","draggable")).data("original-size-height",a(this).dialog("widget").height()).data("original-size-width",
a(this).dialog("option","width")).data("original-size-maxHeight",a(this).dialog("option","maxHeight")).data("original-position-mode",a(this).dialog("widget").css("position")).data("original-position-left",a(this).dialog("widget").offset().left).data("original-position-top",a(this).dialog("widget").offset().top).data("original-titlebar-wrap",a(this).dialog("widget").find(".ui-dialog-titlebar").css("white-space"));return this},_toggleButtons:function(){a(this).dialog("widget").find(".ui-dialog-titlebar-maximize").toggle("maximized"!=
a(this).data("dialog-state")&&i.maximize).end().find(".ui-dialog-titlebar-minimize").toggle("minimized"!=a(this).data("dialog-state")&&i.minimize).end().find(".ui-dialog-titlebar-restore").toggle("normal"!=a(this).data("dialog-state")&&(i.maximize||i.minimize)).css({right:"maximized"==a(this).data("dialog-state")?"1.4em":"minimized"==a(this).data("dialog-state")?!i.maximize?"1.4em":"2.5em":"-9999em"}).end();return this},_trigger:function(c){a(this).triggerHandler(c+".dialogExtend",this);return this},
_verifySettings:function(){if(i.dblclick&&"maximize"!=i.dblclick&&"minimize"!=i.dblclick&&"collapse"!=i.dblclick)a.error("jQuery.dialogExtend Error : Invalid <dblclick> value '"+i.dblclick+"'"),i.dblclick=!1;if(i.titlebar&&"none"!=i.titlebar&&"transparent"!=i.titlebar)a.error("jQuery.dialogExtend Error : Invalid <titlebar> value '"+i.titlebar+"'"),i.titlebar=!1;return this}};a.fn.dialogExtend=function(c){if(h[c])return h[c].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof c||
!c)return h.init.apply(this,arguments);a.error("jQuery.dialogExtend Error : Method <"+c+"> does not exist")}})(jQuery);(function(a,q,i){function h(a){return a}function c(a){a=decodeURIComponent(a.replace(o," "));0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));return a}var o=/\+/g,j=a.cookie=function(o,k,n){if(k!==i){n=a.extend({},j.defaults,n);if(null===k)n.expires=-1;if("number"===typeof n.expires){var g=n.expires,b=n.expires=new Date;b.setDate(b.getDate()+g)}k=j.json?JSON.stringify(k):""+k;return q.cookie=[encodeURIComponent(o),"=",j.raw?k:encodeURIComponent(k),n.expires?"; expires="+
n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}for(var k=j.raw?h:c,n=q.cookie.split("; "),g=o?null:{},b=0,e=n.length;b<e;b++){var m=n[b].split("="),p=k(m.shift()),m=k(m.join("="));if(o&&o===p){g=j.json?JSON.parse(m):m;break}o||(g[p]=j.json?JSON.parse(m):m)}return g};j.defaults={};a.removeCookie=function(c,j){return null!==a.cookie(c)?(a.cookie(c,null,j),!0):!1}})(jQuery,document);var jsDump;
(function(){function a(a){return'"'+a.toString().replace(/"/g,'\\"')+'"'}function q(a){return a+""}function i(a,c,i){var k=jsDump.separator(),n=jsDump.indent();inner=jsDump.indent(1);c.join&&(c=c.join(","+k+inner));return!c?a+i:[a,inner+c,n+i].join(k)}function h(a){var c=a.length,h=Array(c);for(this.up();c--;)h[c]=this.parse(a[c]);this.down();return i("[",h,"]")}var c=/^function (\w+)/;jsDump={parse:function(a,c){var i=this.parsers[c||this.typeOf(a)],c=typeof i;return"function"==c?i.call(this,a):
"string"==c?i:this.parsers.error},typeOf:function(a){var c=typeof a;return"object"!=c&&"function"!=c?c:!a?"null":a.exec?"regexp":a.getHours?"date":a.scrollBy?"window":"#document"==a.nodeName?"document":a.nodeName?"node":a.item?"nodelist":a.callee?"arguments":a.call||a.constructor!=Array&&-1!=(a+"").indexOf("function")?"function":"length"in a?"array":c},separator:function(){return this.multiline?this.HTML?"<br />":"\n":this.HTML?"&nbsp;":" "},indent:function(a){if(!this.multiline)return"";var c=this.indentChar;
this.HTML&&(c=c.replace(/\t/g,"   ").replace(/ /g,"&nbsp;"));return Array(this._depth_+(a||0)).join(c)},up:function(a){this._depth_+=a||1},down:function(a){this._depth_-=a||1},setParser:function(a,c){this.parsers[a]=c},quote:a,literal:q,join:i,_depth_:1,parsers:{window:"[Window]",document:"[Document]",error:"[ERROR]",unknown:"[Unknown]","null":"null",undefined:"undefined","function":function(a){var j="function",h="name"in a?a.name:(c.exec(a)||[])[1];h&&(j+=" "+h);j=[j+"(",this.parse(a,"functionArgs"),
"){"].join("");return i(j,this.parse(a,"functionCode"),"}")},array:h,nodelist:h,arguments:h,object:function(a){var c=[];this.up();for(var h in a)c.push(this.parse(h,"key")+": "+this.parse(a[h]));this.down();return i("{",c,"}")},node:function(a){var c=this.HTML?"&lt;":"<",i=this.HTML?"&gt;":">",k=a.nodeName.toLowerCase(),n=c+k,g;for(g in this.DOMAttrs){var b=a[this.DOMAttrs[g]];b&&(n+=" "+g+"="+this.parse(b,"attribute"))}return n+i+c+"/"+k+i},functionArgs:function(a){a=a.length;if(!a)return"";for(var c=
Array(a);a--;)c[a]=String.fromCharCode(97+a);return" "+c.join(", ")+" "},key:a,functionCode:"[code]",attribute:a,string:a,date:a,regexp:q,number:q,"boolean":q},DOMAttrs:{id:"id",name:"name","class":"className"},HTML:!1,indentChar:"   ",multiline:!0}})();var Hashtable=function(){function a(b){if("string"==typeof b)return b;return typeof b.hashCode==n?(b=b.hashCode(),"string"==typeof b?b:a(b)):typeof b.toString==n?b.toString():""+b}function q(b,a){return b.equals(a)}function i(b,a){return typeof a.equals==n?a.equals(b):b===a}function h(b){return function(a){if(null===a)throw Error("null is not a valid "+b);if("undefined"==typeof a)throw Error(b+" must not be undefined");}}function c(b,a,e,c){this[0]=b;this.entries=[];this.addEntry(a,e);if(null!==c)this.getEqualityFunction=
function(){return c}}function o(b){return function(a){for(var e=this.entries.length,c,g=this.getEqualityFunction(a);e--;)if(c=this.entries[e],g(a,c[0]))switch(b){case m:return!0;case p:return c;case r:return[e,c[1]]}return!1}}function j(b){return function(a){for(var e=a.length,c=0,m=this.entries.length;c<m;++c)a[e+c]=this.entries[c][b]}}function s(b,a){var e=b[a];return e&&e instanceof c?e:null}function k(m,p){var i=this,j=[],r={},d=typeof m==n?m:a,h=typeof p==n?p:null;this.put=function(a,m){b(a);
e(m);var l=d(a),u,g=null;(u=s(r,l))?(l=u.getEntryForKey(a))?(g=l[1],l[1]=m):u.addEntry(a,m):(u=new c(l,a,m,h),j[j.length]=u,r[l]=u);return g};this.get=function(a){b(a);var e=d(a);if(e=s(r,e))if(a=e.getEntryForKey(a))return a[1];return null};this.containsKey=function(a){b(a);var e=d(a);return(e=s(r,e))?e.containsKey(a):!1};this.containsValue=function(b){e(b);for(var a=j.length;a--;)if(j[a].containsValue(b))return!0;return!1};this.clear=function(){j.length=0;r={}};this.isEmpty=function(){return!j.length};
var o=function(b){return function(){for(var a=[],d=j.length;d--;)j[d][b](a);return a}};this.keys=o("keys");this.values=o("values");this.entries=o("getEntries");this.remove=function(a){b(a);var e=d(a),l=null,c=s(r,e);if(c&&(l=c.removeEntryForKey(a),null!==l&&!c.entries.length)){a:{for(a=j.length;a--;)if(c=j[a],e===c[0])break a;a=null}g(j,a);delete r[e]}return l};this.size=function(){for(var b=0,a=j.length;a--;)b+=j[a].entries.length;return b};this.each=function(b){for(var a=i.entries(),d=a.length,
e;d--;)e=a[d],b(e[0],e[1])};this.putAll=function(b,a){for(var d=b.entries(),e,c,m,g=d.length,p=typeof a==n;g--;){e=d[g];c=e[0];e=e[1];if(p&&(m=i.get(c)))e=a(c,m,e);i.put(c,e)}};this.clone=function(){var a=new k(m,p);a.putAll(i);return a}}var n="function",g=typeof Array.prototype.splice==n?function(a,b){a.splice(b,1)}:function(a,b){var e,c,m;if(b===a.length-1)a.length=b;else{e=a.slice(b+1);a.length=b;for(c=0,m=e.length;c<m;++c)a[b+c]=e[c]}},b=h("key"),e=h("value"),m=0,p=1,r=2;c.prototype={getEqualityFunction:function(a){return typeof a.equals==
n?q:i},getEntryForKey:o(p),getEntryAndIndexForKey:o(r),removeEntryForKey:function(a){return(a=this.getEntryAndIndexForKey(a))?(g(this.entries,a[0]),a[1]):null},addEntry:function(a,b){this.entries[this.entries.length]=[a,b]},keys:j(0),values:j(1),getEntries:function(a){for(var b=a.length,e=0,c=this.entries.length;e<c;++e)a[b+e]=this.entries[e].slice(0)},containsKey:o(m),containsValue:function(a){for(var b=this.entries.length;b--;)if(a===this.entries[b][1])return!0;return!1}};return k}();function parseUri(a){for(var q=parseUri.options,a=q.parser[q.strictMode?"strict":"loose"].exec(a),i={},h=14;h--;)i[q.key[h]]=a[h]||"";i[q.q.name]={};i[q.key[12]].replace(q.q.parser,function(a,h,j){h&&(i[q.q.name][h]=j)});return i}
parseUri.options={strictMode:!1,key:"source,protocol,authority,userInfo,user,password,host,port,relative,path,directory,file,query,anchor".split(","),q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};(function(){function a(f,b,e){if(f===b)return 0!==f||1/f==1/b;if(null==f||null==b)return f===b;f._chain&&(f=f._wrapped);b._chain&&(b=b._wrapped);if(f.isEqual&&d.isFunction(f.isEqual))return f.isEqual(b);if(b.isEqual&&d.isFunction(b.isEqual))return b.isEqual(f);var c=k.call(f);if(c!=k.call(b))return!1;switch(c){case "[object String]":return f==""+b;case "[object Number]":return f!=+f?b!=+b:0==f?1/f==1/b:f==+b;case "[object Date]":case "[object Boolean]":return+f==+b;case "[object RegExp]":return f.source==
b.source&&f.global==b.global&&f.multiline==b.multiline&&f.ignoreCase==b.ignoreCase}if("object"!=typeof f||"object"!=typeof b)return!1;for(var l=e.length;l--;)if(e[l]==f)return!0;e.push(f);var l=0,m=!0;if("[object Array]"==c){if(l=f.length,m=l==b.length)for(;l--&&(m=l in f==l in b&&a(f[l],b[l],e)););}else{if("constructor"in f!="constructor"in b||f.constructor!=b.constructor)return!1;for(var g in f)if(d.has(f,g)&&(l++,!(m=d.has(b,g)&&a(f[g],b[g],e))))break;if(m){for(g in b)if(d.has(b,g)&&!l--)break;
m=!l}}e.pop();return m}var q=this,i=q._,h={},c=Array.prototype,o=Object.prototype,j=c.slice,s=c.unshift,k=o.toString,n=o.hasOwnProperty,g=c.forEach,b=c.map,e=c.reduce,m=c.reduceRight,p=c.filter,r=c.every,A=c.some,w=c.indexOf,C=c.lastIndexOf,o=Array.isArray,D=Object.keys,x=Function.prototype.bind,d=function(f){return new y(f)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=d),exports._=d):q._=d;d.VERSION="1.3.3";var t=d.each=d.forEach=function(f,
b,a){if(null!=f)if(g&&f.forEach===g)f.forEach(b,a);else if(f.length===+f.length)for(var e=0,l=f.length;e<l&&!(e in f&&b.call(a,f[e],e,f)===h);e++);else for(e in f)if(d.has(f,e)&&b.call(a,f[e],e,f)===h)break};d.map=d.collect=function(f,a,e){var d=[];if(null==f)return d;if(b&&f.map===b)return f.map(a,e);t(f,function(f,b,l){d[d.length]=a.call(e,f,b,l)});if(f.length===+f.length)d.length=f.length;return d};d.reduce=d.foldl=d.inject=function(f,b,a,l){var c=2<arguments.length;null==f&&(f=[]);if(e&&f.reduce===
e)return l&&(b=d.bind(b,l)),c?f.reduce(b,a):f.reduce(b);t(f,function(f,e,d){c?a=b.call(l,a,f,e,d):(a=f,c=!0)});if(!c)throw new TypeError("Reduce of empty array with no initial value");return a};d.reduceRight=d.foldr=function(f,b,a,e){var l=2<arguments.length;null==f&&(f=[]);if(m&&f.reduceRight===m)return e&&(b=d.bind(b,e)),l?f.reduceRight(b,a):f.reduceRight(b);var c=d.toArray(f).reverse();e&&!l&&(b=d.bind(b,e));return l?d.reduce(c,b,a,e):d.reduce(c,b)};d.find=d.detect=function(f,b,a){var e;z(f,function(f,
d,l){if(b.call(a,f,d,l))return e=f,!0});return e};d.filter=d.select=function(f,b,a){var e=[];if(null==f)return e;if(p&&f.filter===p)return f.filter(b,a);t(f,function(f,d,l){b.call(a,f,d,l)&&(e[e.length]=f)});return e};d.reject=function(f,b,a){var e=[];if(null==f)return e;t(f,function(f,d,l){b.call(a,f,d,l)||(e[e.length]=f)});return e};d.every=d.all=function(f,b,a){var e=!0;if(null==f)return e;if(r&&f.every===r)return f.every(b,a);t(f,function(f,d,l){if(!(e=e&&b.call(a,f,d,l)))return h});return!!e};
var z=d.some=d.any=function(f,b,a){b||(b=d.identity);var e=!1;if(null==f)return e;if(A&&f.some===A)return f.some(b,a);t(f,function(f,d,l){if(e||(e=b.call(a,f,d,l)))return h});return!!e};d.include=d.contains=function(f,b){var a;return null==f?!1:w&&f.indexOf===w?-1!=f.indexOf(b):a=z(f,function(f){return f===b})};d.invoke=function(f,b){var a=j.call(arguments,2);return d.map(f,function(f){return(d.isFunction(b)?b||f:f[b]).apply(f,a)})};d.pluck=function(f,b){return d.map(f,function(f){return f[b]})};
d.max=function(f,b,a){if(!b&&d.isArray(f)&&f[0]===+f[0])return Math.max.apply(Math,f);if(!b&&d.isEmpty(f))return-Infinity;var e={computed:-Infinity};t(f,function(f,d,l){d=b?b.call(a,f,d,l):f;d>=e.computed&&(e={value:f,computed:d})});return e.value};d.min=function(f,b,a){if(!b&&d.isArray(f)&&f[0]===+f[0])return Math.min.apply(Math,f);if(!b&&d.isEmpty(f))return Infinity;var e={computed:Infinity};t(f,function(f,d,l){d=b?b.call(a,f,d,l):f;d<e.computed&&(e={value:f,computed:d})});return e.value};d.shuffle=
function(f){var b=[],a;t(f,function(f,e){a=Math.floor(Math.random()*(e+1));b[e]=b[a];b[a]=f});return b};d.sortBy=function(f,b,a){var e=d.isFunction(b)?b:function(f){return f[b]};return d.pluck(d.map(f,function(f,b,d){return{value:f,criteria:e.call(a,f,b,d)}}).sort(function(f,b){var a=f.criteria,e=b.criteria;return void 0===a?1:void 0===e?-1:a<e?-1:a>e?1:0}),"value")};d.groupBy=function(f,b){var a={},e=d.isFunction(b)?b:function(f){return f[b]};t(f,function(f,b){var d=e(f,b);(a[d]||(a[d]=[])).push(f)});
return a};d.sortedIndex=function(f,b,a){a||(a=d.identity);for(var e=0,l=f.length;e<l;){var c=e+l>>1;a(f[c])<a(b)?e=c+1:l=c}return e};d.toArray=function(f){return!f?[]:d.isArray(f)||d.isArguments(f)?j.call(f):f.toArray&&d.isFunction(f.toArray)?f.toArray():d.values(f)};d.size=function(f){return d.isArray(f)?f.length:d.keys(f).length};d.first=d.head=d.take=function(f,b,a){return null!=b&&!a?j.call(f,0,b):f[0]};d.initial=function(f,b,a){return j.call(f,0,f.length-(null==b||a?1:b))};d.last=function(f,
b,a){return null!=b&&!a?j.call(f,Math.max(f.length-b,0)):f[f.length-1]};d.rest=d.tail=function(f,b,a){return j.call(f,null==b||a?1:b)};d.compact=function(f){return d.filter(f,function(f){return!!f})};d.flatten=function(f,b){return d.reduce(f,function(f,a){if(d.isArray(a))return f.concat(b?a:d.flatten(a));f[f.length]=a;return f},[])};d.without=function(f){return d.difference(f,j.call(arguments,1))};d.uniq=d.unique=function(f,b,a){var a=a?d.map(f,a):f,e=[];3>f.length&&(b=!0);d.reduce(a,function(a,l,
c){if(b?d.last(a)!==l||!a.length:!d.include(a,l))a.push(l),e.push(f[c]);return a},[]);return e};d.union=function(){return d.uniq(d.flatten(arguments,!0))};d.intersection=d.intersect=function(f){var b=j.call(arguments,1);return d.filter(d.uniq(f),function(f){return d.every(b,function(b){return 0<=d.indexOf(b,f)})})};d.difference=function(f){var b=d.flatten(j.call(arguments,1),!0);return d.filter(f,function(f){return!d.include(b,f)})};d.zip=function(){for(var f=j.call(arguments),b=d.max(d.pluck(f,"length")),
a=Array(b),e=0;e<b;e++)a[e]=d.pluck(f,""+e);return a};d.indexOf=function(f,b,a){if(null==f)return-1;var e;if(a)return a=d.sortedIndex(f,b),f[a]===b?a:-1;if(w&&f.indexOf===w)return f.indexOf(b);a=0;for(e=f.length;a<e;a++)if(a in f&&f[a]===b)return a;return-1};d.lastIndexOf=function(f,b){if(null==f)return-1;if(C&&f.lastIndexOf===C)return f.lastIndexOf(b);for(var a=f.length;a--;)if(a in f&&f[a]===b)return a;return-1};d.range=function(f,b,a){1>=arguments.length&&(b=f||0,f=0);for(var a=arguments[2]||1,
e=Math.max(Math.ceil((b-f)/a),0),d=0,l=Array(e);d<e;)l[d++]=f,f+=a;return l};var v=function(){};d.bind=function(f,b){var a,e;if(f.bind===x&&x)return x.apply(f,j.call(arguments,1));if(!d.isFunction(f))throw new TypeError;e=j.call(arguments,2);return a=function(){if(!(this instanceof a))return f.apply(b,e.concat(j.call(arguments)));v.prototype=f.prototype;var d=new v,l=f.apply(d,e.concat(j.call(arguments)));return Object(l)===l?l:d}};d.bindAll=function(f){var b=j.call(arguments,1);0==b.length&&(b=d.functions(f));
t(b,function(b){f[b]=d.bind(f[b],f)});return f};d.memoize=function(f,b){var a={};b||(b=d.identity);return function(){var e=b.apply(this,arguments);return d.has(a,e)?a[e]:a[e]=f.apply(this,arguments)}};d.delay=function(b,a){var e=j.call(arguments,2);return setTimeout(function(){return b.apply(null,e)},a)};d.defer=function(b){return d.delay.apply(d,[b,1].concat(j.call(arguments,1)))};d.throttle=function(b,a){var e,l,c,m,g,u,p=d.debounce(function(){g=m=!1},a);return function(){e=this;l=arguments;c||
(c=setTimeout(function(){c=null;g&&b.apply(e,l);p()},a));m?g=!0:u=b.apply(e,l);p();m=!0;return u}};d.debounce=function(b,a,e){var d;return function(){var l=this,c=arguments;e&&!d&&b.apply(l,c);clearTimeout(d);d=setTimeout(function(){d=null;e||b.apply(l,c)},a)}};d.once=function(b){var a=!1,e;return function(){if(a)return e;a=!0;return e=b.apply(this,arguments)}};d.wrap=function(b,a){return function(){var e=[b].concat(j.call(arguments,0));return a.apply(this,e)}};d.compose=function(){var b=arguments;
return function(){for(var a=arguments,e=b.length-1;0<=e;e--)a=[b[e].apply(this,a)];return a[0]}};d.after=function(b,a){return 0>=b?a():function(){if(1>--b)return a.apply(this,arguments)}};d.keys=D||function(b){if(b!==Object(b))throw new TypeError("Invalid object");var a=[],e;for(e in b)d.has(b,e)&&(a[a.length]=e);return a};d.values=function(b){return d.map(b,d.identity)};d.functions=d.methods=function(b){var a=[],e;for(e in b)d.isFunction(b[e])&&a.push(e);return a.sort()};d.extend=function(b){t(j.call(arguments,
1),function(a){for(var e in a)b[e]=a[e]});return b};d.pick=function(b){var a={};t(d.flatten(j.call(arguments,1)),function(e){e in b&&(a[e]=b[e])});return a};d.defaults=function(b){t(j.call(arguments,1),function(a){for(var e in a)null==b[e]&&(b[e]=a[e])});return b};d.clone=function(b){return!d.isObject(b)?b:d.isArray(b)?b.slice():d.extend({},b)};d.tap=function(b,a){a(b);return b};d.isEqual=function(b,e){return a(b,e,[])};d.isEmpty=function(b){if(null==b)return!0;if(d.isArray(b)||d.isString(b))return 0===
b.length;for(var a in b)if(d.has(b,a))return!1;return!0};d.isElement=function(b){return!!(b&&1==b.nodeType)};d.isArray=o||function(b){return"[object Array]"==k.call(b)};d.isObject=function(b){return b===Object(b)};d.isArguments=function(b){return"[object Arguments]"==k.call(b)};d.isArguments(arguments)||(d.isArguments=function(b){return!(!b||!d.has(b,"callee"))});d.isFunction=function(b){return"[object Function]"==k.call(b)};d.isString=function(b){return"[object String]"==k.call(b)};d.isNumber=function(b){return"[object Number]"==
k.call(b)};d.isFinite=function(b){return d.isNumber(b)&&isFinite(b)};d.isNaN=function(b){return b!==b};d.isBoolean=function(b){return!0===b||!1===b||"[object Boolean]"==k.call(b)};d.isDate=function(b){return"[object Date]"==k.call(b)};d.isRegExp=function(b){return"[object RegExp]"==k.call(b)};d.isNull=function(b){return null===b};d.isUndefined=function(b){return void 0===b};d.has=function(b,a){return n.call(b,a)};d.noConflict=function(){q._=i;return this};d.identity=function(b){return b};d.times=
function(b,a,e){for(var d=0;d<b;d++)a.call(e,d)};d.escape=function(b){return(""+b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};d.result=function(b,a){if(null==b)return null;var e=b[a];return d.isFunction(e)?e.call(b):e};d.mixin=function(b){t(d.functions(b),function(a){J(a,d[a]=b[a])})};var B=0;d.uniqueId=function(b){var a=B++;return b?b+a:a};d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,
escape:/<%-([\s\S]+?)%>/g};var l=/.^/,u={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},E;for(E in u)u[u[E]]=E;var F=/\\|'|\r|\n|\t|\u2028|\u2029/g,I=/\\(\\|'|r|n|t|u2028|u2029)/g,G=function(b){return b.replace(I,function(b,a){return u[a]})};d.template=function(b,a,e){e=d.defaults(e||{},d.templateSettings);b="__p+='"+b.replace(F,function(b){return"\\"+u[b]}).replace(e.escape||l,function(b,a){return"'+\n_.escape("+G(a)+")+\n'"}).replace(e.interpolate||l,function(b,a){return"'+\n("+
G(a)+")+\n'"}).replace(e.evaluate||l,function(b,a){return"';\n"+G(a)+"\n;__p+='"})+"';\n";e.variable||(b="with(obj||{}){\n"+b+"}\n");var b="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+b+"return __p;\n",c=new Function(e.variable||"obj","_",b);if(a)return c(a,d);a=function(b){return c.call(this,b,d)};a.source="function("+(e.variable||"obj")+"){\n"+b+"}";return a};d.chain=function(b){return d(b).chain()};var y=function(b){this._wrapped=b};d.prototype=y.prototype;
var H=function(b,a){return a?d(b).chain():b},J=function(b,a){y.prototype[b]=function(){var b=j.call(arguments);s.call(b,this._wrapped);return H(a.apply(d,b),this._chain)}};d.mixin(d);t("pop,push,reverse,shift,sort,splice,unshift".split(","),function(b){var a=c[b];y.prototype[b]=function(){var e=this._wrapped;a.apply(e,arguments);var d=e.length;("shift"==b||"splice"==b)&&0===d&&delete e[0];return H(e,this._chain)}});t(["concat","join","slice"],function(b){var a=c[b];y.prototype[b]=function(){return H(a.apply(this._wrapped,
arguments),this._chain)}});y.prototype.chain=function(){this._chain=!0;return this};y.prototype.value=function(){return this._wrapped}}).call(this);(function(a){var q=String.prototype.trim,i=String.prototype.trimRight,h=String.prototype.trimLeft,c=function(b,a,c){b+="";a=~~a;for(var g=[];0<a;g[--a]=b);return g.join(null==c?"":c)},o=function(b){return null!=b?"["+g.escapeRegExp(b)+"]":"\\s"},j={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},s={},k;for(k in j)s[j[k]]=k;var n=function(){function b(b){return Object.prototype.toString.call(b).slice(8,-1).toLowerCase()}var a=function(){return a.cache.hasOwnProperty(arguments[0])||(a.cache[arguments[0]]=
a.parse(arguments[0])),a.format.call(null,a.cache[arguments[0]],arguments)};return a.format=function(a,e){var g=1,j=a.length,i="",h,k=[],o,d,q,s,v;for(o=0;o<j;o++)if(i=b(a[o]),"string"===i)k.push(a[o]);else if("array"===i){d=a[o];if(d[2]){h=e[g];for(i=0;i<d[2].length;i++){if(!h.hasOwnProperty(d[2][i]))throw Error(n('[_.sprintf] property "%s" does not exist',d[2][i]));h=h[d[2][i]]}}else d[1]?h=e[d[1]]:h=e[g++];if(/[^s]/.test(d[8])&&"number"!=b(h))throw Error(n("[_.sprintf] expecting number but found %s",
b(h)));switch(d[8]){case "b":h=h.toString(2);break;case "c":h=String.fromCharCode(h);break;case "d":h=parseInt(h,10);break;case "e":h=d[7]?h.toExponential(d[7]):h.toExponential();break;case "f":h=d[7]?parseFloat(h).toFixed(d[7]):parseFloat(h);break;case "o":h=h.toString(8);break;case "s":h=(h=""+h)&&d[7]?h.substring(0,d[7]):h;break;case "u":h=Math.abs(h);break;case "x":h=h.toString(16);break;case "X":h=h.toString(16).toUpperCase()}h=/[def]/.test(d[8])&&d[3]&&0<=h?"+"+h:h;s=d[4]?"0"==d[4]?"0":d[4].charAt(1):
" ";v=d[6]-(""+h).length;q=d[6]?c(s,v):"";k.push(d[5]?h+q:q+h)}return k.join("")},a.cache={},a.parse=function(b){for(var a=[],e=[],c=0;b;){if(null!==(a=/^[^\x25]+/.exec(b)))e.push(a[0]);else if(null!==(a=/^\x25{2}/.exec(b)))e.push("%");else{if(null===(a=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(b)))throw Error("[_.sprintf] huh?");if(a[2]){var c=c|1,g=[],h=a[2],i=[];if(null===(i=/^([a-z_][a-z_\d]*)/i.exec(h)))throw Error("[_.sprintf] huh?");for(g.push(i[1]);""!==
(h=h.substring(i[0].length));){if(null===(i=/^\.([a-z_][a-z_\d]*)/i.exec(h)))if(null===(i=/^\[(\d+)\]/.exec(h)))throw Error("[_.sprintf] huh?");g.push(i[1])}a[2]=g}else c|=2;if(3===c)throw Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");e.push(a)}b=b.substring(a[0].length)}return e},a}(),g={VERSION:"2.2.0rc",isBlank:function(b){return/^\s*$/.test(b)},stripTags:function(b){return(""+b).replace(/<\/?[^>]+>/g,"")},capitalize:function(b){return b+="",b.charAt(0).toUpperCase()+
b.substr(1)},chop:function(b,a){return b+="",a=~~a,0<a?b.match(RegExp(".{1,"+a+"}","g")):[b]},clean:function(b){return g.strip(b).replace(/\s+/g," ")},count:function(b,a){return b+="",a+="",b.split(a).length-1},chars:function(b){return(""+b).split("")},escapeHTML:function(b){return(""+b).replace(/[&<>"']/g,function(b){return"&"+s[b]+";"})},unescapeHTML:function(b){return(""+b).replace(/\&([^;]+);/g,function(b,a){var c;return a in j?j[a]:(c=a.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(c[1],
16)):(c=a.match(/^#(\d+)$/))?String.fromCharCode(~~c[1]):b})},escapeRegExp:function(b){return(""+b).replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},insert:function(b,a,c){b=g.chars(b);return b.splice(~~a,0,""+c),b.join("")},include:function(b,a){return!!~(""+b).indexOf(a)},join:function(){var b=Array.prototype.slice.call(arguments);return b.join(b.shift())},lines:function(b){return(""+b).split("\n")},reverse:function(b){return g.chars(b).reverse().join("")},splice:function(b,a,c,h){b=g.chars(b);return b.splice(~~a,
~~c,h),b.join("")},startsWith:function(b,a){return b+="",a+="",b.length>=a.length&&b.substr(0,a.length)===a},endsWith:function(b,a){return b+="",a+="",b.length>=a.length&&b.substr(b.length-a.length)===a},succ:function(b){var b=b+"",a=g.chars(b);return a.splice(b.length-1,1,String.fromCharCode(b.charCodeAt(b.length-1)+1)),a.join("")},titleize:function(b){return(""+b).replace(/(?:^|\s)\S/g,function(b){return b.toUpperCase()})},camelize:function(b){return g.trim(b).replace(/[-_\s]+(.)?/g,function(b,
a){return a.toUpperCase()})},underscored:function(b){return g.trim(b).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(b){return g.trim(b).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(b){return g.titleize((""+b).replace(/_/g," ")).replace(/\s/g,"")},humanize:function(b){return g.capitalize(g.underscored(b).replace(/_id$/,"").replace(/_/g," "))},trim:function(b,a){return b+="",!a&&q?q.call(b):(a=o(a),b.replace(RegExp("^"+
a+"+|"+a+"+$","g"),""))},ltrim:function(b,a){return b+="",!a&&h?h.call(b):(a=o(a),b.replace(RegExp("^"+a+"+"),""))},rtrim:function(b,a){return b+="",!a&&i?i.call(b):(a=o(a),b.replace(RegExp(a+"+$"),""))},truncate:function(b,a,c){return b+="",c=c||"...",a=~~a,b.length>a?b.slice(0,a)+c:b},prune:function(b,a,c){b+="";a=~~a;c=null!=c?""+c:"...";var h,i,j=b.replace(/\W/g,function(b){return b.toUpperCase()!==b.toLowerCase()?"A":" "});return i=j.charAt(a),h=j.slice(0,a),i&&i.match(/\S/)&&(h=h.replace(/\s\S+$/,
"")),h=g.rtrim(h),(h+c).length>b.length?b:b.substr(0,h.length)+c},words:function(b,a){return g.trim(b,a).split(a||/\s+/)},pad:function(b,a,g,h){var b=b+"",i=0;a=~~a;g?1<g.length&&(g=g.charAt(0)):g=" ";switch(h){case "right":return i=a-b.length,b+c(g,i);case "both":return i=a-b.length,c(g,Math.ceil(i/2))+b+c(g,Math.floor(i/2));default:return i=a-b.length,c(g,i)+b}},lpad:function(b,a,c){return g.pad(b,a,c)},rpad:function(b,a,c){return g.pad(b,a,c,"right")},lrpad:function(b,a,c){return g.pad(b,a,c,"both")},
sprintf:n,vsprintf:function(b,a){return a.unshift(b),n.apply(null,a)},toNumber:function(b,a){var b=b+"",c;c=1*(1*b||0).toFixed(~~a)||0;return 0===c&&!b.match(/^0+$/)?Number.NaN:c},strRight:function(b,a){b+="";a=null!=a?""+a:a;var c=a?b.indexOf(a):-1;return~c?b.slice(c+a.length,b.length):b},strRightBack:function(b,a){b+="";a=null!=a?""+a:a;var c=a?b.lastIndexOf(a):-1;return~c?b.slice(c+a.length,b.length):b},strLeft:function(b,a){b+="";a=null!=a?""+a:a;var c=a?b.indexOf(a):-1;return~c?b.slice(0,c):
b},strLeftBack:function(a,e){a+="";e=null!=e?""+e:e;var c=a.lastIndexOf(e);return~c?a.slice(0,c):a},toSentence:function(a,e,c){e||(e=", ");c||(c=" and ");for(var g=a.length,h="",i=0;i<g;i++)h+=a[i],i===g-2?h+=c:i<g-1&&(h+=e);return h},slugify:function(a){var c=RegExp(o("\u0105\u00e0\u00e1\u00e4\u00e2\u00e3\u0107\u0119\u00e8\u00e9\u00eb\u00ea\u00ec\u00ed\u00ef\u00ee\u0142\u0144\u00f2\u00f3\u00f6\u00f4\u00f5\u00f9\u00fa\u00fc\u00fb\u00f1\u00e7\u017c\u017a"),"g");return a=(""+a).toLowerCase(),a=a.replace(c,
function(a){return"aaaaaaceeeeeiiiilnooooouuuunczz".charAt("\u0105\u00e0\u00e1\u00e4\u00e2\u00e3\u0107\u0119\u00e8\u00e9\u00eb\u00ea\u00ec\u00ed\u00ef\u00ee\u0142\u0144\u00f2\u00f3\u00f6\u00f4\u00f5\u00f9\u00fa\u00fc\u00fb\u00f1\u00e7\u017c\u017a".indexOf(a))||"-"}),g.dasherize(a.replace(/[^\w\s-]/g,""))},surround:function(a,c){return[c,a,c].join("")},quote:function(a){return g.surround(a,'"')},exports:function(){var a={},c;for(c in this)this.hasOwnProperty(c)&&!c.match(/^(?:include|contains|reverse)$/)&&
(a[c]=this[c]);return a},repeat:c,levenshtein:function(a,c){a+="";c+="";for(var g=[],h,i,j=0;j<=c.length;j++)for(var k=0;k<=a.length;k++)j&&k?a.charAt(k-1)===c.charAt(j-1)?i=h:i=Math.min(g[k],g[k-1],h)+1:i=j+k,h=g[k],g[k]=i;return g.pop()}};g.strip=g.trim;g.lstrip=g.ltrim;g.rstrip=g.rtrim;g.center=g.lrpad;g.rjust=g.lpad;g.ljust=g.rpad;g.contains=g.include;g.q=g.quote;"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=g),exports._s=g):"function"==typeof define&&
define.amd?define("underscore.string",function(){return g}):(a._=a._||{},a._.string=a._.str=g)})(this);var XRegExp;
XRegExp=XRegExp||function(a){function q(a,b,c){for(var d in g.prototype)g.prototype.hasOwnProperty(d)&&(a[d]=g.prototype[d]);a.xregexp={captureNames:b,isNative:!!c};return a}function i(a){return(a.global?"g":"")+(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.extended?"x":"")+(a.sticky?"y":"")}function h(a,b,c){if(!g.isRegExp(a))throw new TypeError("type RegExp expected");b=p.replace.call(i(a)+(b||""),x,"");c&&(b=p.replace.call(b,RegExp("["+c+"]+","g"),""));return a=a.xregexp&&!a.xregexp.isNative?q(g(a.source,
b),a.xregexp.captureNames?a.xregexp.captureNames.slice(0):null):q(RegExp(a.source,b),null,!0)}function c(a,b){var c=a.length;if(Array.prototype.lastIndexOf)return a.lastIndexOf(b);for(;c--;)if(a[c]===b)return c;return-1}function o(a,b){return Object.prototype.toString.call(a).toLowerCase()==="[object "+b+"]"}function j(a){a=a||{};"all"===a||a.all?a={natives:!0,extensibility:!0}:o(a,"string")&&(a=g.forEach(a,/[^\s,]+/,function(a){this[a]=!0},{}));return a}function s(a,b,c,d){var e=w.length,g=null,
h,i;v=!0;try{for(;e--;)if(i=w[e],("all"===i.scope||i.scope===c)&&(!i.trigger||i.trigger.call(d)))if(i.pattern.lastIndex=b,(h=r.exec.call(i.pattern,a))&&h.index===b){g={output:i.handler.call(d,h,c),match:h};break}}catch(j){throw j;}finally{v=!1}return g}function k(a){g.addToken=b[a?"on":"off"];m.extensibility=a}function n(a){RegExp.prototype.exec=(a?r:p).exec;RegExp.prototype.test=(a?r:p).test;String.prototype.match=(a?r:p).match;String.prototype.replace=(a?r:p).replace;String.prototype.split=(a?r:
p).split;m.natives=a}var g,b,e,m={natives:!1,extensibility:!1},p={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},r={},A={},w=[],C={"default":/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/,"class":/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/},D=/\$(?:{([\w$]+)}|(\d\d?|[\s\S]))/g,
x=/([\s\S])(?=[\s\S]*\1)/g,d=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,t=p.exec.call(/()??/,"")[1]===a,z=RegExp.prototype.sticky!==a,v=!1,B="gim"+(z?"y":"");g=function(b,c){if(g.isRegExp(b)){if(c!==a)throw new TypeError("can't supply flags when constructing one RegExp from another");return h(b)}if(v)throw Error("can't call the XRegExp constructor within token definition functions");var d=[],e="default",i={hasNamedCapture:!1,captureNames:[],hasFlag:function(a){return-1<c.indexOf(a)}},j=0,k,b=b===a?"":""+b,c=
c===a?"":""+c;if(p.match.call(c,x))throw new SyntaxError("invalid duplicate regular expression flag");b=p.replace.call(b,/^\(\?([\w$]+)\)/,function(a,b){if(p.test.call(/[gy]/,b))throw new SyntaxError("can't use flag g or y in mode modifier");c=p.replace.call(c+b,x,"");return""});for(g.forEach(c,/[\s\S]/,function(a){if(0>B.indexOf(a[0]))throw new SyntaxError("invalid regular expression flag "+a[0]);});j<b.length;)(k=s(b,j,e,i))?(d.push(k.output),j+=k.match[0].length||1):(k=p.exec.call(C[e],b.slice(j)))?
(d.push(k[0]),j+=k[0].length):(k=b.charAt(j),"["===k?e="class":"]"===k&&(e="default"),d.push(k),++j);return q(RegExp(d.join(""),p.replace.call(c,/[^gimy]+/g,"")),i.hasNamedCapture?i.captureNames:null)};b={on:function(a,b,c){c=c||{};a&&w.push({pattern:h(a,"g"+(z?"y":"")),handler:b,scope:c.scope||"default",trigger:c.trigger||null});c.customFlags&&(B=p.replace.call(B+c.customFlags,x,""))},off:function(){throw Error("extensibility must be installed before using addToken");}};g.addToken=b.off;g.cache=
function(a,b){var c=a+"/"+(b||"");return A[c]||(A[c]=g(a,b))};g.escape=function(a){return p.replace.call(a,/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};g.exec=function(a,b,c,d){var e=h(b,"g"+(d&&z?"y":""),!1===d?"y":"");e.lastIndex=c=c||0;a=r.exec.call(e,a);d&&a&&a.index!==c&&(a=null);if(b.global)b.lastIndex=a?e.lastIndex:0;return a};g.forEach=function(a,b,c,d){for(var e=0,h=-1;e=g.exec(a,b,e);)c.call(d,e,++h,a,b),e=e.index+(e[0].length||1);return d};g.globalize=function(a){return h(a,"g")};g.install=function(a){a=
j(a);!m.natives&&a.natives&&n(!0);!m.extensibility&&a.extensibility&&k(!0)};g.isInstalled=function(a){return!!m[a]};g.isRegExp=function(a){return o(a,"regexp")};g.matchChain=function(a,b){return function F(a,c){var d=b[c].regex?b[c]:{regex:b[c]},e=[],l=function(a){e.push(d.backref?a[d.backref]||"":a[0])},f;for(f=0;f<a.length;++f)g.forEach(a[f],d.regex,l);return c===b.length-1||!e.length?e:F(e,c+1)}([a],0)};g.replace=function(b,c,d,e){var i=g.isRegExp(c),j=c;i?(e===a&&c.global&&(e="all"),j=h(c,"all"===
e?"g":"","all"===e?"":"g")):"all"===e&&(j=RegExp(g.escape(""+c),"g"));b=r.replace.call(""+b,j,d);if(i&&c.global)c.lastIndex=0;return b};g.split=function(a,b,c){return r.split.call(a,b,c)};g.test=function(a,b,c,d){return!!g.exec(a,b,c,d)};g.uninstall=function(a){a=j(a);m.natives&&a.natives&&n(!1);m.extensibility&&a.extensibility&&k(!1)};g.union=function(a,b){var c=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,d=0,e,h,i=function(a,b,c){var f=h[d-e];if(b){if(++d,f)return"(?<"+f+">"}else if(c)return"\\"+
(+c+e);return a},j=[],k,f;if(!o(a,"array")||!a.length)throw new TypeError("patterns must be a nonempty array");for(f=0;f<a.length;++f)k=a[f],g.isRegExp(k)?(e=d,h=k.xregexp&&k.xregexp.captureNames||[],j.push(g(k.source).source.replace(c,i))):j.push(g.escape(k));return g(j.join("|"),b)};g.version="2.0.0";r.exec=function(b){var d,e,g,h;if(!this.global)g=this.lastIndex;if(d=p.exec.apply(this,arguments)){!t&&1<d.length&&-1<c(d,"")&&(e=RegExp(this.source,p.replace.call(i(this),"g","")),p.replace.call((""+
b).slice(d.index),e,function(){var b;for(b=1;b<arguments.length-2;++b)arguments[b]===a&&(d[b]=a)}));if(this.xregexp&&this.xregexp.captureNames)for(h=1;h<d.length;++h)(e=this.xregexp.captureNames[h-1])&&(d[e]=d[h]);if(this.global&&!d[0].length&&this.lastIndex>d.index)this.lastIndex=d.index}if(!this.global)this.lastIndex=g;return d};r.test=function(a){return!!r.exec.call(this,a)};r.match=function(a){if(g.isRegExp(a)){if(a.global){var b=p.match.apply(this,arguments);a.lastIndex=0;return b}}else a=RegExp(a);
return r.exec.call(a,this)};r.replace=function(a,b){var d=g.isRegExp(a),e,h,i;if(d){if(a.xregexp)e=a.xregexp.captureNames;if(!a.global)i=a.lastIndex}else a+="";h=o(b,"function")?p.replace.call(""+this,a,function(){var c=arguments,g;if(e){c[0]=new String(c[0]);for(g=0;g<e.length;++g)e[g]&&(c[0][e[g]]=c[g+1])}if(d&&a.global)a.lastIndex=c[c.length-2]+c[0].length;return b.apply(null,c)}):p.replace.call(""+this,a,function(){var a=arguments;return p.replace.call(""+b,D,function(b,d,f){if(d){f=+d;if(f<=
a.length-3)return a[f]||"";f=e?c(e,d):-1;if(0>f)throw new SyntaxError("backreference to undefined group "+b);return a[f+1]||""}if("$"===f)return"$";if("&"===f||0===+f)return a[0];if("`"===f)return a[a.length-1].slice(0,a[a.length-2]);if("'"===f)return a[a.length-1].slice(a[a.length-2]+a[0].length);f=+f;if(!isNaN(f)){if(f>a.length-3)throw new SyntaxError("backreference to undefined group "+b);return a[f]||""}throw new SyntaxError("invalid token "+b);})});if(d)a.lastIndex=a.global?0:i;return h};r.split=
function(b,c){if(!g.isRegExp(b))return p.split.apply(this,arguments);var d=""+this,e=b.lastIndex,h=[],i=0,j,c=(c===a?-1:c)>>>0;g.forEach(d,b,function(a){if(a.index+a[0].length>i)h.push(d.slice(i,a.index)),1<a.length&&a.index<d.length&&Array.prototype.push.apply(h,a.slice(1)),j=a[0].length,i=a.index+j});i===d.length?(!p.test.call(b,"")||j)&&h.push(""):h.push(d.slice(i));b.lastIndex=e;return h.length>c?h.slice(0,c):h};e=b.on;e(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4})|x(?![\dA-Fa-f]{2}))/,
function(a,b){if("B"===a[1]&&"default"===b)return a[0];throw new SyntaxError("invalid escape "+a[0]);},{scope:"all"});e(/\[(\^?)]/,function(a){return a[1]?"[\\s\\S]":"\\b\\B"});e(/(?:\(\?#[^)]*\))+/,function(a){return p.test.call(d,a.input.slice(a.index+a[0].length))?"":"(?:)"});e(/\\k<([\w$]+)>/,function(a){var b=isNaN(a[1])?c(this.captureNames,a[1])+1:+a[1],d=a.index+a[0].length;if(!b||b>this.captureNames.length)throw new SyntaxError("backreference to undefined group "+a[0]);return"\\"+b+(d===a.input.length||
isNaN(a.input.charAt(d))?"":"(?:)")});e(/(?:\s+|#.*)+/,function(a){return p.test.call(d,a.input.slice(a.index+a[0].length))?"":"(?:)"},{trigger:function(){return this.hasFlag("x")},customFlags:"x"});e(/\./,function(){return"[\\s\\S]"},{trigger:function(){return this.hasFlag("s")},customFlags:"s"});e(/\(\?P?<([\w$]+)>/,function(a){if(!isNaN(a[1]))throw new SyntaxError("can't use integer as capture name "+a[0]);this.captureNames.push(a[1]);this.hasNamedCapture=!0;return"("});e(/\\(\d+)/,function(a,
b){if(!("default"===b&&/^[1-9]/.test(a[1])&&+a[1]<=this.captureNames.length)&&"0"!==a[1])throw new SyntaxError("can't use octal escape or backreference to undefined group "+a[0]);return a[0]},{scope:"all"});e(/\((?!\?)/,function(){if(this.hasFlag("n"))return"(?:";this.captureNames.push(null);return"("},{customFlags:"n"});if("undefined"!==typeof exports)exports.XRegExp=g;return g}();;(function(){"use strict";function e(a){throw a;}var g=void 0,i=!0,k=null,l=!1;function aa(){return function(a){return a}}function ba(){return function(){}}function ca(a){return function(b){this[a]=b}}function m(a){return function(){return this[a]}}function da(a){return function(){return a}}var n;function p(a,b){for(var c=a.split("."),d=GLOBAL,f;c.length&&(f=c.shift());){var h=d;!c.length&&b!==g?(d[f]=b,ea(d,f,b)):d[f]?d=d[f]:(d=d[f]={},ea(h,f,d))}}function q(a,b,c){a[b]=c;ea(a,b,c)}function ea(a,b,c){if(c&&("function"===typeof c||"object"===typeof c))a=a===GLOBAL?"":a.__wr_symbol||k||k,a!==k&&(b=a?a+"."+b:b,fa(c,b),"function"===typeof c&&fa(c.prototype,b+".prototype"))}
function fa(a,b){var c=l;try{var d={};Object.defineProperty(d,"test",{value:"foo"});c="foo"===d.test}catch(f){}fa=c=c?function(a,b){Object.prototype.hasOwnProperty.call(a,"__wr_symbol")||Object.defineProperty(a,"__wr_symbol",{value:b,enumerable:l,configurable:i});"function"===typeof a&&!Object.prototype.hasOwnProperty.call(a,"displayName")&&Object.defineProperty(a,"displayName",{value:b,configurable:i})}:ba();c(a,b)};jQuery.find.matchesSelector=function(){var a=jQuery.find.matchesSelector;return function(b,c){return/^[A-Za-z]+$/.test(c)?1===b.nodeType&&b.nodeName===(jQuery.isXMLDoc(b)?c:c.toUpperCase()):a.call(this,b,c)}}();parseUri.options.strictMode=i;jQuery.cookie.raw=i;var _=GLOBAL._.noConflict();function ga(){}function r(){e(Error("Unimplemented abstract method"))}function ha(){e(new ia("Unsupported operation"))}function ja(a,b){var c;a?(c=ba(),c.prototype=a,c=new c):c={};b&&jQuery.extend(c,b);return c}function t(a,b){a._super=b.prototype;a.prototype=ja(b.prototype);a.prototype.constructor=a}
function ka(a,b,c){function d(f){var f=f||a,h=b.call(this,f);jQuery.extend(this,h);this.name=a;this.message=h.message;"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(h,d);if(h.stack!==g)this.stack=h.stack.split(/\n+/).slice(1).join("\n");c&&c.apply(this,jQuery.makeArray(arguments))}b=b||GLOBAL.Error;t(d,b);return d}function la(a,b){var c=ma(b,a);c&&e(new TypeError("Object does not fully implement interface "+a+". "+c))}function na(a,b){return ma(a,b)===k}
function ma(a,b){if("undefined"===typeof a||a===k)return"Object is null or undefined";var c;c="function"===typeof b?b.prototype:b;var d,f,h;for(h in c){d=typeof c[h];f=typeof a[h];if("undefined"===f)return"Missing property '"+h+"'";if("function"===d&&"function"!==f||"function"!==d&&"function"===f)return"Property '"+h+"' "+("function"===d?"should be":"should not be")+" a function"}return k}
if(GLOBAL.Object&&GLOBAL.Object.prototype)GLOBAL.Object.prototype.toString=function(){var $super=GLOBAL.Object.prototype.toString;return function(){var b=this&&this.__wr_symbol;return b?""+b:$super.call(this)}}();if(GLOBAL.Function&&GLOBAL.Function.prototype)GLOBAL.Function.prototype.toString=function(){var $super=GLOBAL.Function.prototype.toString;return function(){var b=this&&this.__wr_symbol;return b?""+b:$super.call(this)}}();
function u(a){try{return jsDump.parse(a)}catch(b){return"[Error dumping object: "+b+"]"}};function oa(){}p("internal.DefaultPlatform",oa);var pa=function(){var a=k;return function(){return a||(a=new oa)}}();q(oa,"get",pa);oa.prototype.getInfo=function(){var a=GLOBAL.navigator;return a?a.userAgent||k:k};q(oa.prototype,"getInfo",oa.prototype.getInfo);oa.prototype.supportsStack=function(){var a="stack"in Error();oa.prototype.supportsStack=function(){return a};return a};q(oa.prototype,"supportsStack",oa.prototype.supportsStack);oa.prototype.supportsStackLineNumbers=function(){return qa().lines};
q(oa.prototype,"supportsStackLineNumbers",oa.prototype.supportsStackLineNumbers);oa.prototype.supportsStackCharNumbers=function(){return qa().chars};q(oa.prototype,"supportsStackCharNumbers",oa.prototype.supportsStackCharNumbers);oa.prototype.supportsStackParameters=function(){return qa().params};q(oa.prototype,"supportsStackParameters",oa.prototype.supportsStackParameters);
function qa(){var a=ra();oa.prototype.supportsStackLineNumbers=function(){return a.lines};oa.prototype.supportsStackCharNumbers=function(){return a.chars};oa.prototype.supportsStackParameters=function(){return a.params};return a}
function ra(){function a(a){var b=[];XRegExp.forEach(a,s,function(a){b.push(Number(a[0]))});return b}var b={params:l,lines:l,chars:l},c=l;if(c=function(){var a=k;Error.prepareStackTrace=function(b,c){a=c[0]||k};var c=Error().stack;delete Error.prepareStackTrace;return a?(b.lines="getLineNumber"in a,b.chars="getColumnNumber"in a,c===c):l}())return b;var c=new Function("function x(x1,x2) {\n    function y(y1,y2) {\n        throw new RangeError();\n    }\n    y(x1,x2);\n}\nx('par_one','par_two');"),
d=[["par_one","par_two"],["par_one","par_two"],[]],f=[2,2],h=[-10,-4],j=k;try{c()}catch(o){"string"===typeof o.stack&&(j=o.stack.split(/\n+/))}var s=/\b\d+\b/g;if(j){0<=j[0].indexOf("RangeError")&&j.shift();var W=[],M=[],Ka=i;jQuery(j).slice(0,d.length).each(function(b){var c=a(this),f;if(0<b){f=M.length;for(var h=W[b-1];0<=f--;)M[f].push((c[f]||0)-(h[f]||0))}else for(f=c.length;0<=f--;)M[f]=[];W.push(c);var j=[];jQuery.each(d[b],function(){j.push(XRegExp.escape(this))});b=XRegExp("\\b"+j.join("\\b.+?\\b")+
"\\b","");Ka&&!b.test(this)&&(Ka=l)});var Zd=function(a,b){if(a.length!==b.length)return l;for(var c=-1,d=a.length;++c<d;)if(a[c]!==b[c])return l;return i};jQuery.each(M,function(){if(Zd(this,f))b.lines=i;if(Zd(this,h))b.chars=i});b.params=Ka}return b}
oa.prototype.supportsPropertyDefinition=function(){var a=l;if("function"===typeof Object.defineProperty){var b=document.createElement("test"),c={};try{var d={get:da("_test_value")};Object.defineProperty(b,"_test_property",d);Object.defineProperty(c,"_test_property",d);a="_test_value"===b._test_property&&"_test_value"===c._test_property}catch(f){}finally{b=k}}oa.prototype.supportsPropertyDefinition=function(){return a};return a};q(oa.prototype,"supportsPropertyDefinition",oa.prototype.supportsPropertyDefinition);var sa=ka("internal.ui.html.EvalError",GLOBAL.Error,function(a,b,c){this.cause=b;this.sourceCode=c});p("internal.ui.html.EvalError",sa);function ta(a){a=a||"0";ua.test(a)||e(Error("Invalid hexadecimal number: "+a));for(var b=a.length,c=4*b,d=Math.ceil(c/28),f=[],h=0;h<d;h++)f.push(parseInt(a.substring(b-7*(h+1),b-7*h),16));this._bitSize=c;this._chunks=f}p("internal.util.HexInt",ta);var ua=/[0-9A-Fa-f]+/;ta.prototype.getBitSize=m("_bitSize");q(ta.prototype,"getBitSize",ta.prototype.getBitSize);
ta.prototype.xor=function(a){if(a){var b=a._bitSize;if(!(b<=this._bitSize)){for(var c=Math.ceil(b/28);this._chunks.length<c;)this._chunks.push(0);this._bitSize=b}for(b=0;b<this._chunks.length;b++)this._chunks[b]^=a._chunks[b]||0}};q(ta.prototype,"xor",ta.prototype.xor);ta.prototype.toString=function(){for(var a=[],b=this._chunks.length-1;0<=b;b--)a.push(_.str.lpad(this._chunks[b].toString(16),7,"0"));a=a.join("");return a.substring(a.length-this._bitSize/4)};q(ta.prototype,"toString",ta.prototype.toString);function v(){this._table=new Hashtable(va,wa)}p("internal.util.coll.HashMap",v);var xa=0;function va(a){if(a===k)return"l";if(a===g)return"u";if("function"===typeof a.hashCode)return"_"+va(a.hashCode());var b=typeof a;return"object"===b||"function"===b?(b=a.__wr_map_hash,b===g&&(b=xa++,ya(a,"__wr_map_hash",{value:b})),"o"+b):b.substring(0,1)+a.toString()}function wa(a,b){return a&&a.equals!==g?a.equals(b):b&&b.equals!==g?b.equals(a):a===b}var za={};function Aa(a){return a===k?za:a}
function Ba(a){return a===za?k:a}v.prototype.put=function(a,b){var a=Aa(a),b=Aa(b),c=this._table.put(a,b);return c===k?g:Ba(c)};q(v.prototype,"put",v.prototype.put);v.prototype.putAll=function(a){var b=this;a.each(function(a,d){b.put(a,d)})};q(v.prototype,"putAll",v.prototype.putAll);v.prototype.remove=function(a){a=Aa(a);a=this._table.remove(a);return a===k?g:Ba(a)};q(v.prototype,"remove",v.prototype.remove);v.prototype.clear=function(){this._table.clear()};q(v.prototype,"clear",v.prototype.clear);
v.prototype.isEmpty=function(){return this._table.isEmpty()};q(v.prototype,"isEmpty",v.prototype.isEmpty);v.prototype.getSize=function(){return this._table.size()};q(v.prototype,"getSize",v.prototype.getSize);v.prototype.containsKey=function(a){a=Aa(a);return this._table.containsKey(a)};q(v.prototype,"containsKey",v.prototype.containsKey);v.prototype.containsValue=function(a){a=Aa(a);return this._table.containsValue(a)};q(v.prototype,"containsValue",v.prototype.containsValue);
v.prototype.get=function(a){a=Aa(a);a=this._table.get(a);return a===k?g:Ba(a)};q(v.prototype,"get",v.prototype.get);v.prototype.getKeys=function(){for(var a=this._table.keys(),b=-1,c=a.length;++b<c;)a[b]=Ba(a[b]);return a};q(v.prototype,"getKeys",v.prototype.getKeys);v.prototype.getValues=function(){for(var a=this._table.values(),b=-1,c=a.length;++b<c;)a[b]=Ba(a[b]);return a};q(v.prototype,"getValues",v.prototype.getValues);
v.prototype.getEntries=function(){return jQuery.map(this._table.entries(),function(a){var b=a[1];return{key:Ba(a[0]),value:b===k?g:Ba(b)}})||[]};q(v.prototype,"getEntries",v.prototype.getEntries);v.prototype.each=function(a){a&&this._table.each(function(b,c){b=Ba(b);c=Ba(c);a(b,c)})};q(v.prototype,"each",v.prototype.each);v.prototype.toString=function(){var a=[];a.push("{");this.each(function(b,c){a.push(b===this?"(this)":""+b);a.push("=");a.push(c===this?"(this)":""+c)});a.push("}");return a.join("")};function Ca(a,b){for(var c=-1,d=a.length;++c<d;)if(a[c]===b)return a.splice(c,1),c;return k}p("internal.util.coll.arrayRemove",Ca);p("internal.util.url.isAbsolute",function(a){if(!a)return l;a=parseUri(a);return!(!a.host&&!_.str.startsWith(a.path,"/"))});p("internal.util.url.normalize",function(a){"string"===typeof a&&(a=jQuery.trim(a));if(!a)return"";var b=parseUri(a),c=b.path,d=Da(c);return c!==d?(b.path=d,Ea(b)):a});
function Fa(a,b){if(!a)return b;if(!b)return a;var c=parseUri(b);if(c.authority)return b;var d=parseUri(a);if(c.path)d.path=Da(_.str.startsWith(c.path,"/")?c.path:d.path+"/"+c.path);if(c.path||c.query)d.query=c.query;if(c.path||c.query||c.anchor)d.anchor=c.anchor;return Ea(d)}p("internal.util.url.resolve",Fa);
function Da(a){var b;0===a.indexOf("/")?(b=i,a=a.substring(1)):b=l;var c=[],d=0;jQuery.each(a.split("/"),function(a,h){h&&"."!==h&&(".."===h?0<d?(c.pop(),d--):(b&&e(Error("Attempt to go up above root directory")),c.push("..")):(c.push(h),d++))});return(b?"/":"")+c.join("/")}
function Ea(a){function b(a){var b=[],c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];b.push(c+(d?"="+d:""))}return b.join("&")}var c=parseUri(a.source);if(a.user!==c.user||a.password!==c.password)a.userInfo=a.user?a.user+(a.password?":"+a.password:""):"";if(a.userInfo!==c.userInfo||a.host!==c.host||a.port!==c.port)a.authority=a.host?(a.userInfo?a.userInfo+"@":"")+a.host+(a.port?":"+a.port:""):"";if(a.file!==c.file||a.directory!==c.directory)a.path=a.file?(a.directory?a.directory+"/":"")+a.file:"";
var d=b(a.queryKey),f=b(c.queryKey);if(d!==f)a.query=d;if(a.path!==c.path||a.query!==c.query||a.anchor!==c.anchor)a.relative=a.path?a.path+(a.query?"?"+a.query:"")+(a.anchor?"#"+a.anchor:""):"";return a.protocol!==c.protocol||a.authority!==c.authority||a.relative!==c.relative?(a.protocol?a.protocol+"://":"")+(a.authority||"")+(a.relative||""):a.source}p("internal.util.url.serialize",Ea);function Ga(a){return Fa(a,"..")}p("internal.util.url.getParent",Ga);
function Ha(a,b){if(!b)return a;var c="string"===typeof b?b:jQuery.param(b);if(!c)return a;var d=parseUri(a);d.query=d.query?d.query+"&"+c:c;return Ea(d)}p("internal.util.url.addQueryParams",Ha);function Ia(a){a=parseUri(a);return!a.protocol||"http"===a.protocol||"https"===a.protocol}p("internal.util.url.isHTTP",Ia);function Ja(){}p("wr.Disposable",Ja);Ja.prototype.dispose=r;q(Ja.prototype,"dispose",Ja.prototype.dispose);function La(){}p("wr.Initializable",La);La.prototype.init=r;q(La.prototype,"init",La.prototype.init);function Ma(){}p("wr.Platform",Ma);Ma.prototype.getInfo=r;q(Ma.prototype,"getInfo",Ma.prototype.getInfo);Ma.prototype.supportsStack=r;q(Ma.prototype,"supportsStack",Ma.prototype.supportsStack);Ma.prototype.supportsStackLineNumbers=r;q(Ma.prototype,"supportsStackLineNumbers",Ma.prototype.supportsStackLineNumbers);Ma.prototype.supportsStackCharNumbers=r;q(Ma.prototype,"supportsStackCharNumbers",Ma.prototype.supportsStackCharNumbers);Ma.prototype.supportsStackParameters=r;
q(Ma.prototype,"supportsStackParameters",Ma.prototype.supportsStackParameters);Ma.prototype.supportsPropertyDefinition=r;q(Ma.prototype,"supportsPropertyDefinition",Ma.prototype.supportsPropertyDefinition);function Na(){}p("wr.Startable",Na);Na.prototype.start=r;q(Na.prototype,"start",Na.prototype.start);var w=ka("wr.StateError");p("wr.StateError",w);function Oa(){}p("wr.Stoppable",Oa);Oa.prototype.stop=r;q(Oa.prototype,"stop",Oa.prototype.stop);var ia=ka("wr.UnsupportedError");p("wr.UnsupportedError",ia);function Pa(){this._app=k}p("wr.app.AbstractPlugin",Pa);Pa.prototype.getApp=m("_app");q(Pa.prototype,"getApp",Pa.prototype.getApp);Pa.prototype.setApp=ca("_app");q(Pa.prototype,"setApp",Pa.prototype.setApp);Pa.prototype.configure=ga;q(Pa.prototype,"configure",Pa.prototype.configure);
Pa.prototype.configureObjectsList=function(a,b,c,d){var f=this,h=a[b];return this._app.getConfigPlugin().readInstanceListFactory(h||[]).newInstance().chain(function(a){var b=_.isArray(h)&&h.length===a.length?h:k;c.call(f);for(var s=-1,W=a.length;++s<W;){var M=b&&b[s];M&&(M=jQuery.extend({},M),delete M.name,delete M.url);d.call(f,a[s],M)}})};q(Pa.prototype,"configureObjectsList",Pa.prototype.configureObjectsList);function Qa(){}p("wr.app.AppAware",Qa);Qa.prototype.setApp=r;q(Qa.prototype,"setApp",Qa.prototype.setApp);p("wr.app.ResourceType",{SCRIPT:"script"});var Ra={config:{implementation:"wr.config.ConfigPlugin",handlers:["wr.config.ObjectConfigHandler","wr.config.JsonConfigHandler"]}};p("wr.app.defaultConfig",Ra);function x(a,b){var c=this;this._size=b.length;this._results=[];this._sortedResults=[];this._errors=[];this._result=new Sa;jQuery.each(b,function(b){this.onSuccess(function(f){c._results.push(f);c._sortedResults[b]=f;c._result._resolved||a.call(c,c._result)}).onFailure(function(b){c._errors.push(b);c._result._resolved||a.call(c,c._result)})});this._result._resolved||a.call(this,this._result)}p("wr.async.Condition",x);x.prototype.getSize=m("_size");q(x.prototype,"getSize",x.prototype.getSize);
x.prototype.getResults=m("_results");q(x.prototype,"getResults",x.prototype.getResults);x.prototype.getSortedResults=m("_sortedResults");q(x.prototype,"getSortedResults",x.prototype.getSortedResults);x.prototype.getErrors=m("_errors");q(x.prototype,"getErrors",x.prototype.getErrors);x.prototype.onSuccess=function(a){return this._result.getPromise().onSuccess(a)};q(x.prototype,"onSuccess",x.prototype.onSuccess);x.prototype.onFailure=function(a){return this._result.getPromise().onFailure(a)};
q(x.prototype,"onFailure",x.prototype.onFailure);x.prototype.onComplete=function(a){return this._result.getPromise().onComplete(a)};q(x.prototype,"onComplete",x.prototype.onComplete);x.prototype.chain=function(a,b){return this._result.getPromise().chain(a,b)};q(x.prototype,"chain",x.prototype.chain);function Ta(a){return new x(function(a){var c=this._errors;0<c.length?a.failure(c[0]):this._results.length===this.getSize()&&a.success(this._sortedResults)},jQuery.makeArray(arguments))}
q(x,"allSuccess",Ta);function Ua(){}p("wr.async.Promise",Ua);Ua.prototype.onSuccess=r;q(Ua.prototype,"onSuccess",Ua.prototype.onSuccess);Ua.prototype.onFailure=r;q(Ua.prototype,"onFailure",Ua.prototype.onFailure);Ua.prototype.onComplete=r;q(Ua.prototype,"onComplete",Ua.prototype.onComplete);Ua.prototype.chain=r;q(Ua.prototype,"chain",Ua.prototype.chain);function Va(a){return na(a,Ua)}p("wr.async.isPromise",Va);function Wa(a,b,c){var d=jQuery.makeArray(arguments);d.shift();d.shift();return Xa(a,b,d)}p("wr.async.call",Wa);function Xa(a,b,c){"function"!==typeof a&&e(new TypeError("Invalid function"));c!==g&&c!==k&&("object"!==typeof c||!jQuery.isArray(c))&&e(new TypeError("Invalid arguments array"));var d;try{var f=a.apply(b||GLOBAL,c||[]);d=Va(f)?f:new Ya(f)}catch(h){d=new Ya(h)}return d}p("wr.async.apply",Xa);function Za(){}p("internal.async.AbstractPromise",Za);Za.prototype.onSuccess=r;q(Za.prototype,"onSuccess",Za.prototype.onSuccess);Za.prototype.onFailure=r;q(Za.prototype,"onFailure",Za.prototype.onFailure);Za.prototype.onComplete=r;q(Za.prototype,"onComplete",Za.prototype.onComplete);
Za.prototype.chain=function(a,b){function c(a){a.onSuccess(function(a){d.resolve(a)}).onFailure(function(a){d.reject(a)})}if(!a)return this;var d=jQuery.Deferred();this.onSuccess(function(b){b=a(b);Va(b)?c(b):d.resolve(b)});if(b)this.onFailure(function(a){a=b(a);Va(a)?c(a):d.reject(a)});else this.onFailure(function(a){d.reject(a)});return new $a(d)};q(Za.prototype,"chain",Za.prototype.chain);function $a(a){this._deferred=a}t($a,Za);p("internal.async.JQueryPromise",$a);$a.prototype.onSuccess=function(a){this._deferred.done(a);return this};q($a.prototype,"onSuccess",$a.prototype.onSuccess);$a.prototype.onFailure=function(a){this._deferred.fail(a);return this};q($a.prototype,"onFailure",$a.prototype.onFailure);$a.prototype.onComplete=function(a){this._deferred.always(a);return this};q($a.prototype,"onComplete",$a.prototype.onComplete);
$a.prototype.isSuccess=function(){return"resolved"===this._deferred.state()};q($a.prototype,"isSuccess",$a.prototype.isSuccess);$a.prototype.isFailure=function(){return"rejected"===this._deferred.state()};q($a.prototype,"isFailure",$a.prototype.isFailure);function ab(a){this._deferred=a}t(ab,$a);p("internal.async.JQueryAjaxPromise",ab);ab.prototype.onFailure=function(a){return ab._super.onFailure.call(this,function(b){a(Error(b.status+" "+b.statusText))})};q(ab.prototype,"onFailure",ab.prototype.onFailure);ab.prototype.onComplete=function(a){var b=this;return ab._super.onComplete.call(b,function(c){b.isFailure()?a(Error(c.status+" "+c.statusText)):b.isSuccess()&&a(c)})};q(ab.prototype,"onComplete",ab.prototype.onComplete);function Ya(a){this._result=a}t(Ya,Za);p("wr.async.FixedPromise",Ya);Ya.prototype.onSuccess=function(a){a&&!(this._result instanceof Error)&&a(this._result);return this};q(Ya.prototype,"onSuccess",Ya.prototype.onSuccess);Ya.prototype.onFailure=function(a){a&&this._result instanceof Error&&a(this._result);return this};q(Ya.prototype,"onFailure",Ya.prototype.onFailure);Ya.prototype.onComplete=function(a){a&&a(this._result);return this};q(Ya.prototype,"onComplete",Ya.prototype.onComplete);var bb=new Ya(g);
q(Ya,"UNDEFINED",bb);function Sa(){this._deferred=new jQuery.Deferred;this._resolved=l;this._promise=new $a(this._deferred)}p("wr.async.Result",Sa);Sa.prototype.isResolved=m("_resolved");q(Sa.prototype,"isResolved",Sa.prototype.isResolved);Sa.prototype.getPromise=m("_promise");q(Sa.prototype,"getPromise",Sa.prototype.getPromise);Sa.prototype.success=function(a){this._resolved&&e(new w("Result already resolved"));this._resolved=i;this._deferred.resolve(a!==g?a:g)};q(Sa.prototype,"success",Sa.prototype.success);
Sa.prototype.failure=function(a){this._resolved&&e(new w("Result already resolved"));this._resolved=i;this._deferred.reject(a)};q(Sa.prototype,"failure",Sa.prototype.failure);function cb(){}p("wr.config.ConfigHandler",cb);cb.prototype.accept=r;q(cb.prototype,"accept",cb.prototype.accept);cb.prototype.getRequiredFiles=r;q(cb.prototype,"getRequiredFiles",cb.prototype.getRequiredFiles);cb.prototype.merge=r;q(cb.prototype,"merge",cb.prototype.merge);function db(){}p("wr.config.Configurable",db);db.prototype.configure=r;q(db.prototype,"configure",db.prototype.configure);function eb(){}p("wr.app.Plugin",eb);t(eb,db);eb.prototype.setApp=r;q(eb.prototype,"setApp",eb.prototype.setApp);eb.prototype.getApp=r;q(eb.prototype,"getApp",eb.prototype.getApp);function fb(){}p("wr.config.ObjectConfigHandler",fb);fb.prototype.accept=function(a){return a instanceof Object};q(fb.prototype,"accept",fb.prototype.accept);fb.prototype.getRequiredFiles=function(a){a instanceof Object||e(Error("Invalid new configuration provided"));var b=[];if(a=a._require)jQuery.isArray(a)||(a=[a]),jQuery.each(a,function(a,d){"string"===typeof d&&1<d.length||e(Error("Invalid configuration file"));b.push(d)});return b};q(fb.prototype,"getRequiredFiles",fb.prototype.getRequiredFiles);
fb.prototype.merge=function(a,b){b instanceof Object||e(Error("Invalid new configuration provided"));gb(this,a,b,"")};q(fb.prototype,"merge",fb.prototype.merge);
function gb(a,b,c,d){for(var f in c)if(c.hasOwnProperty(f)&&"_require"!==f){var h,j;"+"===f.charAt(f.length-1)?(h=i,j=f.slice(0,-1)):(h=l,j=f);var o=c[f],s=b[j];if(h)if(s instanceof Object)if(jQuery.isArray(s))if(h=s,jQuery.isArray(o)){j=0;for(s=o.length;j<s;j++)h.push(o[j])}else h.push(o);else o instanceof Object?gb(a,s,o,d+"."+j):e(Error("Unable to merge a primitive value into object value of property '"+j+"'"+(d?" in '"+d+"'":"")));else e(Error("Unable to merge a new value into primitive or missing value of property '"+
j+"'"+(d?" in '"+d+"'":"")));else b[j]=o}};function hb(){this._objConfigHandler=new fb}p("wr.config.JsonConfigHandler",hb);hb.prototype.accept=function(a,b){if(b){var c=b.substring(b.lastIndexOf(".")+1);return"string"===typeof a&&"json"===c}return l};q(hb.prototype,"accept",hb.prototype.accept);hb.prototype.getRequiredFiles=function(a,b){"string"!==typeof a&&e(Error("Invalid new configuration provided"));return this._objConfigHandler.getRequiredFiles(jQuery.parseJSON(a),b)};q(hb.prototype,"getRequiredFiles",hb.prototype.getRequiredFiles);
hb.prototype.merge=function(a,b,c){"string"!==typeof b&&e(Error("Invalid new configuration provided"));b=jQuery.parseJSON(b);this._objConfigHandler.merge(a,b,c)};q(hb.prototype,"merge",hb.prototype.merge);function ib(a,b,c){var d,f;"string"===typeof a?(d=a,f=k):"object"===typeof a&&a!==k?(d=a.name,f=a.url):e(Error("Invalid instance factory configuration"));return new jb(d,b,f,c)}p("wr.config.readInstanceFactory",ib);function kb(a,b,c){if("string"===typeof a||"object"===typeof a&&a!==k){var d=[];jQuery.isArray(a)||(a=[a]);jQuery.each(a,function(a,h){d.push(ib(h,b,c))});return new lb(d)}e(Error("Invalid instance list factory configuration"))}p("wr.config.readInstanceListFactory",kb);function mb(a,b,c){this._type=a;this._sourceObject=b;this._property=c}p("wr.data.Event",mb);mb.prototype.getType=m("_type");q(mb.prototype,"getType",mb.prototype.getType);mb.prototype.getSourceObject=m("_sourceObject");q(mb.prototype,"getSourceObject",mb.prototype.getSourceObject);mb.prototype.getProperty=m("_property");q(mb.prototype,"getProperty",mb.prototype.getProperty);mb.prototype.toString=function(){return"Event:"+this._type+":("+this._sourceObject+"."+this._property+")"};p("wr.data.EventType",{ADD:"add",CHANGE:"change",REMOVE:"remove"});function nb(){}p("wr.data.Object",nb);nb.prototype.get=r;q(nb.prototype,"get",nb.prototype.get);nb.prototype.set=r;q(nb.prototype,"set",nb.prototype.set);nb.prototype.remove=r;q(nb.prototype,"remove",nb.prototype.remove);nb.prototype.toObject=r;q(nb.prototype,"toObject",nb.prototype.toObject);nb.prototype.addEventListener=r;q(nb.prototype,"addEventListener",nb.prototype.addEventListener);nb.prototype.removeEventListener=r;q(nb.prototype,"removeEventListener",nb.prototype.removeEventListener);
nb.prototype.triggerEvent=r;q(nb.prototype,"triggerEvent",nb.prototype.triggerEvent);p("wr.data.Type",{BLOB:"blob",BOOLEAN:"boolean",DATE:"date",DECIMAL:"decimal",FLOAT:"float",INTEGER:"integer",PASSWORD:"password",STRING:"string",TEXT:"text",TIME:"time",TIMESTAMP:"timestamp",URL:"url"});var ob={ERROR:1,WARN:2,INFO:3,DEBUG:4};p("wr.log.Level",ob);function pb(){this._level=4}p("wr.log.AbstractAppender",pb);pb.prototype.setup=function(a){if(a=a&&a.level)this._level=a};q(pb.prototype,"setup",pb.prototype.setup);pb.prototype.append=function(a){a.getLevel()<=this._level&&this.appendFiltered(a)};q(pb.prototype,"append",pb.prototype.append);pb.prototype.appendFiltered=r;q(pb.prototype,"appendFiltered",pb.prototype.appendFiltered);function qb(){}p("wr.log.Appender",qb);qb.prototype.setup=r;q(qb.prototype,"setup",qb.prototype.setup);qb.prototype.append=r;q(qb.prototype,"append",qb.prototype.append);function rb(){}p("wr.log.Log",rb);rb.prototype.isErrorEnabled=r;q(rb.prototype,"isErrorEnabled",rb.prototype.isErrorEnabled);rb.prototype.error=r;q(rb.prototype,"error",rb.prototype.error);rb.prototype.isWarnEnabled=r;q(rb.prototype,"isWarnEnabled",rb.prototype.isWarnEnabled);rb.prototype.warn=r;q(rb.prototype,"warn",rb.prototype.warn);rb.prototype.isInfoEnabled=r;q(rb.prototype,"isInfoEnabled",rb.prototype.isInfoEnabled);rb.prototype.info=r;q(rb.prototype,"info",rb.prototype.info);
rb.prototype.isDebugEnabled=r;q(rb.prototype,"isDebugEnabled",rb.prototype.isDebugEnabled);rb.prototype.debug=r;q(rb.prototype,"debug",rb.prototype.debug);function sb(){}p("wr.log.LogEvent",sb);sb.prototype.getTimestamp=r;q(sb.prototype,"getTimestamp",sb.prototype.getTimestamp);sb.prototype.getCategory=r;q(sb.prototype,"getCategory",sb.prototype.getCategory);sb.prototype.getLevel=r;q(sb.prototype,"getLevel",sb.prototype.getLevel);sb.prototype.getMessage=r;q(sb.prototype,"getMessage",sb.prototype.getMessage);sb.prototype.getErrorInfo=r;q(sb.prototype,"getErrorInfo",sb.prototype.getErrorInfo);function tb(){}p("wr.logic.AbstractActor",tb);tb.prototype.execute=r;q(tb.prototype,"execute",tb.prototype.execute);tb.prototype.setup=ba();q(tb.prototype,"setup",tb.prototype.setup);tb.prototype.destroy=ba();q(tb.prototype,"destroy",tb.prototype.destroy);function ub(){}p("wr.logic.Actor",ub);ub.prototype.setup=r;q(ub.prototype,"setup",ub.prototype.setup);ub.prototype.destroy=r;q(ub.prototype,"destroy",ub.prototype.destroy);ub.prototype.execute=r;q(ub.prototype,"execute",ub.prototype.execute);function vb(a,b,c){!b&&c===g&&e(Error("Either source name or source value is required"));this._targetName=a;this._sourceName=b;this._sourceValue=c}p("wr.logic.Coupling",vb);vb.prototype.getTargetName=m("_targetName");q(vb.prototype,"getTargetName",vb.prototype.getTargetName);vb.prototype.getSourceName=m("_sourceName");q(vb.prototype,"getSourceName",vb.prototype.getSourceName);vb.prototype.getSourceValue=m("_sourceValue");q(vb.prototype,"getSourceValue",vb.prototype.getSourceValue);
vb.prototype.toString=function(){var a=[this._targetName,":",this._sourceName];this._sourceValue!==g&&a.push(",",""+this._sourceValue);return a.join("")};function wb(){}p("wr.nav.AbstractRouter",wb);wb.prototype.route=function(a){var b=this.isRequestImplemented(a);this.alterRequest(a);b&&this.implementRequest(a)};q(wb.prototype,"route",wb.prototype.route);wb.prototype.precompute=function(a){var b=this.isRequestImplemented(a);this.alterRequest(a);return b};q(wb.prototype,"precompute",wb.prototype.precompute);wb.prototype.alterRequest=ba();q(wb.prototype,"alterRequest",wb.prototype.alterRequest);wb.prototype.isRequestImplemented=da(l);
q(wb.prototype,"isRequestImplemented",wb.prototype.isRequestImplemented);wb.prototype.implementRequest=ha;q(wb.prototype,"implementRequest",wb.prototype.implementRequest);function xb(){}p("wr.nav.NavListener",xb);xb.prototype.requestEnqueue=r;q(xb.prototype,"requestEnqueue",xb.prototype.requestEnqueue);xb.prototype.requestCancel=r;q(xb.prototype,"requestCancel",xb.prototype.requestCancel);xb.prototype.requestBeforeServe=r;q(xb.prototype,"requestBeforeServe",xb.prototype.requestBeforeServe);xb.prototype.requestServe=r;q(xb.prototype,"requestServe",xb.prototype.requestServe);xb.prototype.requestRoute=r;q(xb.prototype,"requestRoute",xb.prototype.requestRoute);
xb.prototype.requestStart=r;q(xb.prototype,"requestStart",xb.prototype.requestStart);xb.prototype.requestSuccess=r;q(xb.prototype,"requestSuccess",xb.prototype.requestSuccess);xb.prototype.requestFailure=r;q(xb.prototype,"requestFailure",xb.prototype.requestFailure);p("wr.nav.ResponseType",{HTML:"html",JSON:"json",XML:"xml"});function yb(){}p("wr.nav.Router",yb);yb.prototype.route=r;q(yb.prototype,"route",yb.prototype.route);yb.prototype.precompute=r;q(yb.prototype,"precompute",yb.prototype.precompute);p("wr.ui.Attribute",{ENABLED:"enabled",VISIBLE:"visible",FOCUSED:"focused",SHOW_EFFECT:"showEffect",HIDE_EFFECT:"hideEffect",WIDTH:"width",HEIGHT:"height",RESIZABLE:"resizable",AUTO_RESIZE:"autoResize",DRAGGABLE:"draggable",CURSOR_TYPE:"cursorType",OPEN:"open",MODAL:"modal",MAXIMIZABLE:"maximizable",MINIMIZABLE:"minimizable",CLOSABLE:"closable"});function zb(){}p("wr.ui.ContextRegistry",zb);zb.prototype.addContext=r;q(zb.prototype,"addContext",zb.prototype.addContext);zb.prototype.removeContext=r;q(zb.prototype,"removeContext",zb.prototype.removeContext);function Ab(){}p("wr.ui.ControlFactory",Ab);Ab.prototype.create=r;q(Ab.prototype,"create",Ab.prototype.create);Ab.prototype.destroy=r;q(Ab.prototype,"destroy",Ab.prototype.destroy);p("wr.ui.CursorType",{POINTER:"pointer",WAIT:"wait"});p("wr.ui.EffectType",{FADE:"fade",BLIND:"blind",SLIDE:"slide",SCALE:"scale"});function Bb(a,b,c){this._type=a;this._sourceControl=b;this._sourceView=c}p("wr.ui.Event",Bb);Bb.prototype.getType=m("_type");q(Bb.prototype,"getType",Bb.prototype.getType);Bb.prototype.getSourceControl=m("_sourceControl");q(Bb.prototype,"getSourceControl",Bb.prototype.getSourceControl);Bb.prototype.getSourceView=m("_sourceView");q(Bb.prototype,"getSourceView",Bb.prototype.getSourceView);Bb.prototype.toString=function(){return"Event:"+this._type+":("+this._sourceControl+","+this._sourceView+")"};
q(Bb.prototype,"toString",Bb.prototype.toString);var Cb={FOCUS:"focus",BLUR:"blur",CLICK:"click",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",CHANGE:"change",OPEN:"open",CLOSE:"close",CONTENT_CHANGE:"contentchange"};p("wr.ui.EventType",Cb);function y(){}p("wr.ui.Viewer",y);y.prototype.getView=r;q(y.prototype,"getView",y.prototype.getView);y.prototype.getIndexes=r;q(y.prototype,"getIndexes",y.prototype.getIndexes);y.prototype.setup=r;q(y.prototype,"setup",y.prototype.setup);y.prototype.destroy=r;q(y.prototype,"destroy",y.prototype.destroy);y.prototype.isContextProvider=r;q(y.prototype,"isContextProvider",y.prototype.isContextProvider);y.prototype.setContextRegistry=r;q(y.prototype,"setContextRegistry",y.prototype.setContextRegistry);
y.prototype.getContextRegistry=r;q(y.prototype,"getContextRegistry",y.prototype.getContextRegistry);y.prototype.refreshSubViews=r;q(y.prototype,"refreshSubViews",y.prototype.refreshSubViews);y.prototype.writeAttributes=r;q(y.prototype,"writeAttributes",y.prototype.writeAttributes);y.prototype.readAttributes=r;q(y.prototype,"readAttributes",y.prototype.readAttributes);y.prototype.writeData=r;q(y.prototype,"writeData",y.prototype.writeData);y.prototype.readData=r;q(y.prototype,"readData",y.prototype.readData);
y.prototype.addEventListener=r;q(y.prototype,"addEventListener",y.prototype.addEventListener);y.prototype.removeEventListener=r;q(y.prototype,"removeEventListener",y.prototype.removeEventListener);var Db={fade:"fade",blind:"blind",slide:"slide",scale:"scale"},Eb={fade:"fade",blind:"blind",slide:"slide",scale:"scale"};function Fb(a){return(a=Db[a])?{effect:a,duration:150}:k}p("wr.ui.jquery.getJQueryEffect",Fb);function Gb(a){return Eb[a.effect||a]}p("wr.ui.jquery.getEffectType",Gb);function Hb(a){this._error=a;this._name=a.name.valueOf();this._message=a.message?""+a.message.valueOf():k}p("wr.util.ErrorInfo",Hb);Hb.prototype.getError=m("_error");q(Hb.prototype,"getError",Hb.prototype.getError);Hb.prototype.getName=m("_name");q(Hb.prototype,"getName",Hb.prototype.getName);Hb.prototype.getMessage=m("_message");q(Hb.prototype,"getMessage",Hb.prototype.getMessage);
Hb.prototype.getStack=function(){if(this._stack===g){var a=this._error.stack;if(!a)return k;var b=Ib,c=[];jQuery.each([Jb,Kb],function(){XRegExp.forEach(a,this,function(a){var f=b(a,"line"),h=b(a,"char"),j=b(a,"params")||k,o=b(a,"name")||"",a=b(a,"url"),j=j!==k?j.split(/,/):k;c.push(new Lb(o,j,a,f!==k?Number(f):k,h!==k?Number(h):k))})});this._stack=0<c.length?c:k}return this._stack};q(Hb.prototype,"getStack",Hb.prototype.getStack);
var Jb=new XRegExp("^ +at (?:(?<name0>\\S+) \\((?:unknown source|(?<url0>[^)]+?):(?<line0>\\d+):(?<char0>\\d+))\\)|(?:unknown source|(?<url1>[^)]+?):(?<line1>\\d+):(?<char1>\\d+)))$","mg"),Kb=new XRegExp("^(?<name0>[^(@]*)(?:\\((?<params0>[^)]+)\\))?@(?<url0>.+?):(?<line0>\\d+)(?::(?<char0>\\d+))?$","mg");function Ib(a,b){for(var c=0,d=b+c;a.hasOwnProperty(d);c++,d=b+c)if(d=a[d],"string"===typeof d)return d;return k}
Hb.prototype.toString=function(){var a=this._name+": "+this._message,b=this.getStack();return a=b===k?a+"\n\t[stack trace not available]":a+("\n"+b.join("\n"))};q(Hb.prototype,"toString",Hb.prototype.toString);function Lb(a,b,c,d,f){this._name=a;this._params=b;this._url=c;this._lineNumber=d;this._charNumber=f}n=Lb.prototype;n.getName=m("_name");n.getParams=m("_params");n.getURL=m("_url");n.getLineNumber=m("_lineNumber");n.getCharNumber=m("_charNumber");
n.toString=function(){var a="\tat "+(this._name||"<anonymous>"),a=a+(this._params?"("+this._params.join(",")+")":"");return a=this._url?a+("("+this._url+(this._lineNumber?":"+this._lineNumber:"")+(this._charNumber?":"+this._charNumber:"")+")"):a+"(<unknown location>)"};function Mb(a){var b;Mb=b="function"===typeof GLOBAL.msSetImmediate?function(a){return GLOBAL.msSetImmediate(a)}:function(a){return GLOBAL.setTimeout(a,25)};b(a)}p("internal.setImmediate",Mb);function Nb(a){var b;Nb=b="function"===typeof GLOBAL.msClearImmediate?function(a){GLOBAL.msClearImmediate(a)}:function(a){GLOBAL.clearTimeout(a)};b(a)}p("internal.clearImmediate",Nb);p("internal.setEmergencyLogFunction",function(a){Ob=a});var Ob=k;
function Pb(a,b){var c="UNLOGGED ERROR\n\n"+a;if(b)try{c+="\n\n"+(new Hb(b)).toString()}catch(d){c+="\n\n"+b.message+"\n\t[error retrieving error info]"}Ob?Ob(c):GLOBAL.alert(c)}p("internal.emergencyLog",Pb);function Qb(a,b,c,d){this._command=a||g;this._condition=b;this._expireTime=new Date((new Date).valueOf()+c);this._timeoutCommand=d?d:Rb;this._result=new Sa;this._attemptIntervalHandle=k;this.notify()}p("internal.async.DelayedCall",Qb);function Rb(){return k}Qb.prototype.getPromise=function(){return this._result.getPromise()};q(Qb.prototype,"getPromise",Qb.prototype.getPromise);
Qb.prototype._firstAttempt=function(){var a=new Date>=this._expireTime;if(!Sb(this))a?Tb(this):this._attemptIntervalHandle=GLOBAL.setInterval(jQuery.proxy(this._nextAttempt,this),100)};Qb.prototype._nextAttempt=function(){var a=Sb(this),b=new Date>=this._expireTime;if(a||b)Ub(this),!a&&b&&Tb(this)};function Ub(a){if(a._attemptIntervalHandle)GLOBAL.clearInterval(a._attemptIntervalHandle),a._attemptIntervalHandle=k}
function Sb(a){if(a._condition&&a._condition.call(a)){try{a._result.success(a._command.call(a))}catch(b){a._result.failure(b)}return i}return l}function Tb(a){try{a._result.success(a._timeoutCommand.call(a))}catch(b){a._result.failure(b)}}Qb.prototype.notify=function(){new Date>=this._expireTime||(Ub(this),Mb(jQuery.proxy(this._firstAttempt,this)))};q(Qb.prototype,"notify",Qb.prototype.notify);function Vb(a,b,c){this._postCallback=a;this._stepCallback=b;this._completeCallback=c||k;this._timer=this._state=k}p("internal.async.Task",Vb);Vb.prototype.isRunning=function(){return this._state!==k};q(Vb.prototype,"isRunning",Vb.prototype.isRunning);Vb.prototype.post=function(a){a=this._postCallback.call(this,this._state,a);a=a===g?k:a;a!==k&&this._state===k&&(this.handleStart(),Wb(this));this._state=a};q(Vb.prototype,"post",Vb.prototype.post);
Vb.prototype.shutdown=function(){if(this._timer!==k){Nb(this._timer);if(this._completeCallback)this._completeCallback.call(this,this._state),this._state=k;else for(;this._state!==k;){var a=this._completeCallback.call(this,this._state);this._state=a===g?k:a}this.handleComplete()}};q(Vb.prototype,"shutdown",Vb.prototype.shutdown);
function Wb(a){a._timer=Mb(function(){a._timer=k;for(var b=(new Date).valueOf();a._state!==k&&100>(new Date).valueOf()-b;){var c=a._stepCallback.call(a,a._state);a._state=c===g?k:c}a._state!==k?Wb(a):a.handleComplete()})}Vb.prototype.handleStart=ga;q(Vb.prototype,"handleStart",Vb.prototype.handleStart);Vb.prototype.handleComplete=ga;q(Vb.prototype,"handleComplete",Vb.prototype.handleComplete);function Xb(){var a=this;Vb.call(this,function(a,c){if(c)return a=a||[],a.unshift([c]),a},function(a){for(var c=a[0],d=10,f;0<d--&&(f=c.pop());){var h=f.childNodes;if(0==h.length)Yb(f,i);else{c.push(f);for(var j=0,o=h.length;j<o;j++)c.push(h[j])}}for(;c&&0>=c.length;)a.shift(),c=a[0];if(0<a.length)return a},function(a){for(var c;c=a.shift();)Yb(c[0],l)});this._unloadListener=function(){a.shutdown()}}t(Xb,Vb);p("internal.ui.html.NodeDestroyer",Xb);
Xb.prototype.handleStart=function(){Xb._super.handleStart.call(this);jQuery(GLOBAL).one("unload",this._unloadListener)};q(Xb.prototype,"handleStart",Xb.prototype.handleStart);Xb.prototype.handleComplete=function(){jQuery(GLOBAL).off("unload",this._unloadListener);Xb._super.handleComplete.call(this)};q(Xb.prototype,"handleComplete",Xb.prototype.handleComplete);
function Yb(a,b){if(a){jQuery(a).remove();if(!b)try{a.innerHTML=""}catch(c){for(var d;d=a.lastChild;)Yb(d,l)}a.canHaveChildren&&"removeNode"in a&&a.removeNode(l)}}q(Xb,"removeAndDestroy",Yb);function Zb(a){Yb(a,l)}p("internal.ui.html.removeAndDestroy",Zb);var $b=k;function ac(a){$b||($b=new Xb);$b.post(a)}p("internal.ui.html.removeAndDestroyAsync",ac);function bc(a,b){cc(b,function(){jQuery(a).append(b)})}p("internal.ui.html.appendKeepScripts",bc);function dc(a,b,c){cc(b,function(){c?jQuery(c).before(b):jQuery(a).append(b)})}p("internal.ui.html.insertKeepScripts",dc);
function ec(a){return jQuery(a).find(":input:not(:submit)").filter(function(){return this.disabled?l:"checkbox"===this.type||"radio"===this.type?!!this.checked:i}).get()}p("internal.ui.html.getSuccessfulFormInput",ec);
function cc(a,b){if(a){var c=[];_.each(a,function(a){1===a.nodeType&&("script"===a.tagName.toLowerCase()?c.push(a):c.push.apply(c,jQuery.makeArray(a.getElementsByTagName("script"))))});_.each(c,function(a){a.type=(jQuery(a).attr("type")!==g)+"/"+a.type.replace("script","-script")});b();_.each(c,function(a){var b=/^true\/(.*)/.exec(a.type);b?a.type=b[1].replace("-script","script"):a.removeAttribute("type")});_.each(c,function(a){if((!a.type||/\/(java|ecma)script/i.test(a.type))&&!jQuery.data(a,"wr-executed"))a.src?
jQuery.ajax({type:"GET",global:l,url:a.src,async:l,dataType:"script"}):jQuery.globalEval((a.text||a.textContent||a.innerHTML||"").replace(/^\s*<!(?:\[CDATA\[|\-\-)/,"/*$0*/")),jQuery.data(a,"wr-executed",i)})}}function fc(){function a(a){try{return b.call(this,a)}catch(d){e(new sa(d.message,d,a))}}if(jQuery.globalEval._wr_orig)return l;var b=jQuery.globalEval;a._wr_orig=b;jQuery.globalEval=a;return i}p("internal.ui.html.enableEvalErrorsCapture",fc);
function gc(){var a=jQuery.globalEval._wr_orig;if(a)jQuery.globalEval=a}p("internal.ui.html.disableEvalErrorsCapture",gc);var hc=[];function ic(){function a(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]}var b=GLOBAL.document,c={openFunc:a(b,"open"),closeFunc:a(b,"close"),writeFunc:a(b,"write"),written:[]};hc.push(c);b.open=ba();b.close=ba();b.write=function(a){c.written.push(a)}}p("internal.ui.html.holdDocumentWrites",ic);
function jc(){var a=GLOBAL.document,b=hc.pop();if(!b)return[];b.openFunc!==g?a.open=b.openFunc:delete a.open;b.closeFunc!==g?a.close=b.closeFunc:delete a.close;b.writeFunc!==g?a.write=b.writeFunc:delete a.write;return b.written}p("internal.ui.html.restoreDocumentWrites",jc);var kc={fieldHandlers:[],addFieldHandler:function(a){a&&kc.fieldHandlers.push(a)}};p("internal.logic.AjaxRequestUtils",kc);
kc.addFieldHandler({accept:function(a){return GLOBAL.CKEDITOR&&!!GLOBAL.CKEDITOR.instances[a.name]},getter:function(a){return GLOBAL.CKEDITOR.instances[a.name].getData()},beforeRequest:function(){if(GLOBAL.CKEDITOR){var a=[];_.each(GLOBAL.CKEDITOR.instances,function(b){b instanceof GLOBAL.CKEDITOR.editor&&a.push(b)});_.each(a,function(a){jQuery(a.element.$).closest("html")[0]||a.destroy(i)})}}});kc.patchLibraries=ba();q(kc,"patchLibraries",kc.patchLibraries);
kc.submitForm=function(a,b,c,d){function f(){var a=j[0],d={},f=[];if(b)d.action=h.attr("action")||k,h.attr("action",Ha(d.action||"",a.extraActionParams));c&&_.each(c,function(a,b){var c=jQuery("<input/>").attr("type","hidden").attr("name",b).val(a);c.appendTo(h);f.push(c[0])});if(a.target)d.target=h.attr("target")||k,h.attr("target",a.target);h[0].submit();Mb(function(){var a=j.shift();_.each(d,function(a,b){a!==k?h.attr(b,a):h.removeAttr(b)});_.each(f,function(a){Zb(a)});a.result.success()})}var h=
jQuery(a),a={extraActionParams:b,extraInputs:c,target:d,result:new Sa},j=h.data("wr-hijacks");j||h.data("wr-hijacks",j=[]);j.push(a);if(d=1<j.length?j[j.length-2]:k)d.result.getPromise().onComplete(f);else f();return a.result.getPromise()};q(kc,"submitForm",kc.submitForm);function z(a,b){this._maxSize="number"===typeof b?b:Number.MAX_VALUE;this._timeout=1E4;this._ensureDispatch=l;this._objects=[];this._objectAvailableCondition=jQuery.proxy(function(){return 0<this._objects.length},this);this._timeoutCommand=jQuery.proxy(function(){this._ensureDispatch&&e(Error("No object available to dispatch to"));return k},this);this._iface=a||k}p("internal.util.coll.DispatchCollection",z);q(z,"DEFAULT_PRIORITY",0);z.prototype.getSize=function(){return this._objects.length};
q(z.prototype,"getSize",z.prototype.getSize);z.prototype.getMaxSize=m("_maxSize");q(z.prototype,"getMaxSize",z.prototype.getMaxSize);z.prototype.getTimeout=m("_timeout");q(z.prototype,"getTimeout",z.prototype.getTimeout);z.prototype.setTimeout=ca("_timeout");q(z.prototype,"setTimeout",z.prototype.setTimeout);z.prototype.isEnsureDispatch=m("_ensureDispatch");q(z.prototype,"isEnsureDispatch",z.prototype.isEnsureDispatch);z.prototype.setEnsureDispatch=ca("_ensureDispatch");
q(z.prototype,"setEnsureDispatch",z.prototype.setEnsureDispatch);z.prototype.add=function(a,b){b=b||0;la(this._iface,a);var c=-1,d=-1;jQuery.each(this._objects,function(f,h){0>c&&h.priority>b&&(c=f);0>d&&h.object===a&&(d=f)});0<=d||(this._objects.length>=this._maxSize&&e(new RangeError("Unable to add more than "+this._maxSize+" object(s)")),this._objects.splice(0>c?this._objects.length:c,0,{object:a,priority:b}))};q(z.prototype,"add",z.prototype.add);
z.prototype.remove=function(a){la(this._iface,a);var b=this;jQuery.each(this._objects,function(c,d){if(d.object===a)return b._objects.splice(c,1),l})};q(z.prototype,"remove",z.prototype.remove);z.prototype.clear=function(){this._objects=[]};q(z.prototype,"clear",z.prototype.clear);z.prototype.dispatchOne=function(a,b){var a=a||g,b=b||k,c;c=b!==k?_.find(this._objects,function(a){return b.apply(a.object)}):0<this._objects.length?this._objects[0]:k;return!c?this._timeoutCommand():a.apply(c.object)};
q(z.prototype,"dispatchOne",z.prototype.dispatchOne);z.prototype.dispatchAll=function(a,b){var a=a||g,b=b||k,c=l,d=[];(b!==k||0<this._objects.length)&&jQuery.each(this._objects,function(f,h){if(b===k||b.apply(h.object)){var j=a.apply(h.object);"undefined"!==typeof j&&d.push(j);c=i}});return!c?this._timeoutCommand():d};q(z.prototype,"dispatchAll",z.prototype.dispatchAll);
z.prototype.dispatchOneAsync=function(a,b,c){var a=a||g,b=b||k,c="number"===typeof c?c:this._timeout,d=this,f;f=b!==k?jQuery.proxy(function(){return _.find(this._objects,function(a){return b.apply(a.object)}||lc(i))!==k},this):this._objectAvailableCondition;return(new Qb(function(){return d.dispatchOne(a,b)},f,c,this._timeoutCommand)).getPromise()};q(z.prototype,"dispatchOneAsync",z.prototype.dispatchOneAsync);
z.prototype.find=function(a){var a=a||k,b;b=a!==k?_.find(this._objects,function(b){return a.apply(b.object)}):0<this._objects.length?this._objects[0]:k;return!b?this._timeoutCommand():b.object};q(z.prototype,"find",z.prototype.find);z.prototype.toString=function(){var a=z._super.toString.call(this),b="*";this._iface!==k&&(b=""+this._iface);return a+"<"+b+">["+this._objects.length+"]"};p("wr.DEBUG",i);p("wr.VERSION","7.2.18.20180613150103");var mc;p("wr.getBase",function(){mc||e(new w("Base URL not yet available"));return mc});var nc;function oc(){nc||e(new w("Boot parameters not yet available"));return nc}p("wr.getBootParams",oc);
function pc(){"function"!==typeof jQuery&&e(Error("JQuery library not loaded. Please ensure that jQuery JavaScript file is fully loaded before loading the WebRatio Runtime."));var a=jQuery.fn.jquery;0>qc(a,"1.7.1")&&e(Error("Incompatible JQuery library version found: "+a+". The WebRatio Runtime requires JQuery 1.7.1 or later."))}p("wr.checkEnvironment",pc);p("wr.getPlatform",function(){return pa()});function rc(){}p("wr.util.LifecycleListener",rc);rc.prototype.init=r;q(rc.prototype,"init",rc.prototype.init);rc.prototype.start=r;q(rc.prototype,"start",rc.prototype.start);rc.prototype.stop=r;q(rc.prototype,"stop",rc.prototype.stop);rc.prototype.dispose=r;q(rc.prototype,"dispose",rc.prototype.dispose);function sc(){}p("wr.util.StackEntry",sc);sc.prototype.getName=r;q(sc.prototype,"getName",sc.prototype.getName);sc.prototype.getParams=r;q(sc.prototype,"getParams",sc.prototype.getParams);sc.prototype.getURL=r;q(sc.prototype,"getURL",sc.prototype.getURL);sc.prototype.getLineNumber=r;q(sc.prototype,"getLineNumber",sc.prototype.getLineNumber);sc.prototype.getCharNumber=r;q(sc.prototype,"getCharNumber",sc.prototype.getCharNumber);var tc=new XRegExp("(?<num>[0-9]+)|(?<str>[^\\.\\s0-9]+)");function qc(a,b){function c(a){var b=[];XRegExp.forEach(""+(a||""),tc,function(a){a.num?b.push(Number(a.num)):b.push(a.str)});return b}for(var d=c(a),f=c(b),h=0,j=Math.max(d.length,f.length);h<j;h++){var o=d[h],s=f[h];o===g&&(o="number"===typeof s?0:"");s===g&&(s="number"===typeof o?0:"");if(o>s)return 1;if(o<s)return-1}return 0}p("wr.util.compareVersions",qc);var uc=new v;p("wr.util.emptyFunction",ga);
function lc(a){if(a===g)return ga;var b=uc.get(a);b||(b=function(){return a},uc.put(a,b));return b}p("wr.util.valueFunction",lc);p("wr.util.errorFunction",function(a,b){if("function"!==typeof a)a=GLOBAL.Error;var c=b?[b]:[];return function(){var b=ja(a.prototype);a.apply(b,c);e(b)}});function vc(a){a&&(a=a.replace(/([^a-zA-Z0-9\-_])/g,"\\$1"));return a}p("wr.util.escapeCss",vc);function wc(a){a&&(a=a.replace(/(['"\\])/g,"\\$1"));return a}p("wr.util.escapeCssString",wc);function xc(a){this._appenders=new z(qb);this._rethrowErrors=l;this._categoryLevels={};this._preservedEvents=a?[]:k;this.setLevel("",4)}p("wr.log.Manager",xc);xc.prototype.addAppender=function(a){this._appenders.add(a);if(this._preservedEvents!==k){var b=this;jQuery.each(this._preservedEvents,function(){yc(b,this)});this._preservedEvents=k}};q(xc.prototype,"addAppender",xc.prototype.addAppender);xc.prototype.removeAppender=function(a){this._appenders.remove(a)};q(xc.prototype,"removeAppender",xc.prototype.removeAppender);
xc.prototype.setRethrowErrors=ca("_rethrowErrors");q(xc.prototype,"setRethrowErrors",xc.prototype.setRethrowErrors);xc.prototype.stopPreserving=function(){this._preservedEvents=k};q(xc.prototype,"stopPreserving",xc.prototype.stopPreserving);xc.prototype.setLevel=function(a,b){a=a||"";b?this._categoryLevels[a]=b:(""===a&&e(new w("Root category logging level cannot be removed")),delete this._categoryLevels[a])};q(xc.prototype,"setLevel",xc.prototype.setLevel);
xc.prototype.getLog=function(a){var a=a||"",b=this;return{isErrorEnabled:function(){return zc(b,a,1)},error:function(c,d){b._log(a,1,c,d)},isWarnEnabled:function(){return zc(b,a,2)},warn:function(c,d){b._log(a,2,c,d)},isInfoEnabled:function(){return zc(b,a,3)},info:function(c,d){b._log(a,3,c,d)},isDebugEnabled:function(){return zc(b,a,4)},debug:function(c,d){b._log(a,4,c,d)}}};q(xc.prototype,"getLog",xc.prototype.getLog);
xc.prototype._log=function(a,b,c,d){try{var f=new Ac(a,b,c,d?new Hb(d):k);if(this._preservedEvents!==k){this._preservedEvents.push(f);1>=b&&Pb(c,d);return}yc(this,f)}catch(h){Pb("Error logging",h)}d&&this._rethrowErrors&&e(d)};function yc(a,b){try{var c=Bc(a,b.getCategory());b.getLevel()<=c&&a._appenders.dispatchAll(function(){this.append(b)})}catch(d){Pb("Error dispatching log event",d)}}function zc(a,b,c){a=Bc(a,b);return c<=a?i:l}
function Bc(a,b){for(;;){var c=a._categoryLevels[b];if(c)return c;b=b.substring(0,b.lastIndexOf("."))}}function Ac(a,b,c,d){this._timestamp=new Date;this._category=a;this._level=b;this._message=c;this._errorInfo=d}n=Ac.prototype;n.getTimestamp=m("_timestamp");n.getCategory=m("_category");n.getLevel=m("_level");n.getMessage=m("_message");n.getErrorInfo=m("_errorInfo");p("wr.log.ROOT_CATEGORY","");p("wr.log.CATEGORY_SEPARATOR",".");var Cc={isErrorEnabled:lc(l),isWarnEnabled:lc(l),isInfoEnabled:lc(l),isDebugEnabled:lc(l),error:ga,warn:ga,info:ga,debug:ga};p("wr.log.NULL_LOG",Cc);Cc.error=Pb;var A=new xc(i);p("wr.log.getManager",function(){return A});function Dc(a){this._iframe=a;this._usePseudoXML=l;this._contents=this._contentType=k}p("internal.util.IFrameAccessor",Dc);Dc.prototype._log=A.getLog("internal.util.IFrameAccessor");Dc.prototype.getIFrame=m("_iframe");q(Dc.prototype,"getIFrame",Dc.prototype.getIFrame);Dc.prototype.setUsePseudoXML=ca("_usePseudoXML");q(Dc.prototype,"setUsePseudoXML",Dc.prototype.setUsePseudoXML);Dc.prototype.getContentType=function(){var a=Ec(this);return"text/x-pseudo-xml"===a?"text/xml":a};
q(Dc.prototype,"getContentType",Dc.prototype.getContentType);function Ec(a){if(!a._contentType)a._contentType=Fc(a,a._iframe);return a._contentType}Dc.prototype.getContents=function(){if(!this._contents)this._contents=Gc(this);return this._contents.value};q(Dc.prototype,"getContents",Dc.prototype.getContents);Dc.prototype.getContentsAsText=function(){if(!this._contents)this._contents=Gc(this);return this._contents.text};q(Dc.prototype,"getContentsAsText",Dc.prototype.getContentsAsText);
function Gc(a){var b=Ec(a),c=Hc(a._iframe);"text/html"===b?(a=Ic(c),a={value:a,text:a.documentElement.outerHTML?a.documentElement.outerHTML:"<"+a.documentElement.tagName+">"+a.documentElement.innerHTML+"</"+a.documentElement.tagName+">"}):"text/xml"===b||"application/xml"===b?(a=Ic(c.XMLDocument||c),b=GLOBAL.XMLSerializer?(new GLOBAL.XMLSerializer).serializeToString(a):""+a.xml,a={value:a,text:b}):"text/x-pseudo-xml"===b?(b=c.documentElement.textContent||c.documentElement.innerText,a._log.debug("Parsing pseudo-XML"),
b="<"+b.substr(1),GLOBAL.DOMParser?a=(new GLOBAL.DOMParser).parseFromString(b,"text/xml"):(a=new GLOBAL.ActiveXObject("Microsoft.XMLDOM"),a.async="false",a.loadXML(b)),a={value:a,text:b}):"text/plain"===b?(a=c.documentElement.textContent||c.documentElement.innerText,a={value:a,text:a}):a={value:k,text:k};return a}var Jc=/^<head><\/head>\s*<body><pre[^>]*>[^><]+<\/pre><\/body>$/i;
function Fc(a,b){var c=Hc(b),d=c.documentElement;if(c.contentType)return a._usePseudoXML&&"text/plain"===c.contentType&&0===(d.textContent||d.innerText).indexOf("#?xml")?"text/x-pseudo-xml":c.contentType;if(c.xmlVersion||c.XMLDocument)return"text/xml";if(a._usePseudoXML&&0===(d.textContent||d.innerText).indexOf("#?xml"))return"text/x-pseudo-xml";if(a._usePseudoXML)c=c.documentMode,"number"===typeof c&&6>Number(c)&&a._log.warn("A frame is using IE Qurks Mode, possibly resulting in XML parse errors. This may be caused by an X-UA-Compatible header or meta tag");
return Jc.test(d.innerHTML)?"text/plain":"text/html"}function Hc(a){var b=a.contentDocument;if(!b)b=a.contentWindow.document;return b}function Ic(a){var b=a.cloneNode(i);b||(b=a.implementation.createDocument(a.documentElement.namespaceURI,a.documentElement.nodeName),b.replaceChild(b.importNode(a.documentElement,i),b.documentElement));return b};var Nc=function(){function a(a,b){var c={};_.each(b.useless||[],function(b){c[b]=function(){h.warn("Calling "+a+"."+b+" - Method has no more use")}});_.each(b.gone||[],function(b){c[b]=function(){h.warn("Calling "+a+"."+b+" - Method is no longer available")}});jQuery.extend(c,b.impl||{});return c}function b(a){"toObject"in a&&(a=a.toObject());return a||{}}function c(a,b){var c=GLOBAL.$H,d=GLOBAL.ajaxRequest;"function"!==typeof c||"function"!==typeof d?h.error("Functions '$H' and 'ajaxRequest' are required for using legacy utilities."):
(c=c(b||{}),d(a,c))}function d(a){return Kc(function(b){var c=this,d=jQuery.makeArray(arguments),f=Lc();f.isStarted()?a.apply(c,d):(h.debug("Delaying "+b.type+" handler fire to application startup"),f.addLifecycleListener({start:function(){f.removeLifecycleListener(this);a.apply(c,d)}}))})}function f(a){Mc.fireWith(GLOBAL,[a]);return a.isPropagationStopped()?(h.debug("Handling of "+a.type+" halted by custom interceptor"),i):l}var h=A.getLog("wr.LegacyUtils"),j=a("WRAjax",{useless:[],gone:["FrameRequest",
"XMLFrameTransport"],impl:{onReady:function(a){jQuery(GLOBAL.document).ready(Kc(function(){var b=Lc();b.isStarted()?a():b.addLifecycleListener({start:Kc(a)})}))}}}),o=a("WRAjaxRequestQueue",{useless:[],gone:"add,submitForm,start,sendRequest,remove,DTO".split(","),impl:{}}),s=a("WRAjaxRequestUtils",{useless:[],gone:"addRequest,removeRequest,startRequest,changeCursor,getResponsePage,computeRequest,processElement,processElementContent,updateElement,addFieldHandler,showNotification,clearNotification,addDroppable".split(","),
impl:{requestsQueue:o}}),W=a("WREvent",{useless:[],gone:["doEvent"],impl:{observe:function(){function a(h,j,o,s){var s=b(s),W=jQuery(h.target),M=h.type;if(!(d[M]===i&&f[M]===i)){if(W.data("ui-wrAutocomplete")){if("change"===M)return;"wrautocompletechange"===M&&(M="change")}(function(){f[M]=i;c(j+"FormBean",jQuery.extend({sourcePage:j,isForm:i,pressedLink:"button:"+o},{onCompleteCallBack:function(){f[M]=l}},s))})()}}var d={focus:i,blur:i,focusin:i,focusout:i},f={};a.bindAsEventListener=function(a){var b=
this,c=jQuery.makeArray(arguments).slice(1);return function(d){return b.apply(a,[d].concat(c))}};return a}()}}),M=a("WREventUtils",{useless:["updateFocusedElement","getFocusedElement","getLastFocusedField","forgetForm","saveFieldValue"],gone:["fieldValueChanged","getActiveAutocompleter"],impl:{observe:function(a,b,c){a=jQuery("#"+vc(a));"change"===b&&a.is(":text, :password")&&(b+=" wrautocompletechange");a.on(b,d(function(a){return f(a)?g:c(a)}))}}}),Ka=a("Form",{useless:[],gone:[],impl:{Element:a("Form.Element",
{useless:[],gone:[],impl:function(){function a(b,c,h,j){jQuery("#"+vc(c)).find(b+"[name='"+wc(h)+"']").each(function(){var a=jQuery(this);a.click(d(function(b){f(b)||j(a[0],a.val())}))})}return{RadioEventObserver:function(b,c,d){a(":radio",b,c,d)},CheckboxEventObserver:function(b,c,d){a(":checkbox",b,c,d)}}}()})}});return{WRAjax:j,WRAjaxRequestUtils:s,WRAjaxRequestQueue:o,WREvent:W,WREventUtils:M,Form:Ka}}();p("wr.LegacyUtils",Nc);var Mc=jQuery.Callbacks("unique");function Oc(){}p("wr.app.Loader",Oc);Oc.prototype._log=A.getLog("wr.app.Loader");var Pc={};Oc.prototype.load=function(a,b){var c=this._log,d=Qc[b];d||e(Error("Invalid type "+b));var f=Pc[a];if(!f){c.debug("Loading resource "+a);d=d(a);f=new ab(d);if(c.isDebugEnabled())f.onSuccess(function(){c.debug("Loaded resource "+a)}).onFailure(function(b){c.error("Failed to load resource "+a,b)});Pc[a]=f}return f};q(Oc.prototype,"load",Oc.prototype.load);
var Qc={script:function(a){return jQuery.ajax({url:a,dataType:"script",mimeType:"text/plain"})}};function B(){this._app=k;this._config={};this._handlers=new z(cb);this._handlers.setEnsureDispatch(i);this._savedFiles={}}t(B,Pa);p("wr.config.ConfigPlugin",B);B.prototype._log=A.getLog("wr.config.ConfigPlugin");B.prototype.getConfig=m("_config");q(B.prototype,"getConfig",B.prototype.getConfig);B.prototype.setConfig=ca("_config");q(B.prototype,"setConfig",B.prototype.setConfig);B.prototype.configure=function(a){return this.configureObjectsList(a,"handlers",function(){this._handlers.clear()},function(a){this.addHandler(a)})};
q(B.prototype,"configure",B.prototype.configure);B.prototype.addHandler=function(a){this._handlers.add(a)};q(B.prototype,"addHandler",B.prototype.addHandler);B.prototype.removeHandler=function(a){this._handlers.remove(a)};q(B.prototype,"removeHandler",B.prototype.removeHandler);
B.prototype.merge=function(a){var b=this._log,c=this,d=new Sa;try{var f=Rc(c,a,k),h=f.getRequiredFiles(a,k);if(0<h.length)c.mergeFiles.apply(c,h).onSuccess(function(){try{f.merge(c._config,a,k),d.success()}catch(b){d.failure(b)}}).onFailure(function(a){d.failure(a)});else f.merge(c._config,a,k),d.success()}catch(j){b.error("Error merging new configuration ",j),d.failure(j)}return d.getPromise()};q(B.prototype,"merge",B.prototype.merge);
B.prototype.mergeFiles=function(a){var b=this._log,c=this,d=jQuery.makeArray(arguments),f=[];b.debug("Loading files "+d);jQuery.each(d,function(a,d){var o=c._savedFiles[d];if(o)f.push(o);else{var s=new Sa,o=s.getPromise();c._savedFiles[d]=o;f.push(o);b.debug("Downloading file "+d);o=jQuery.ajax({url:d,mimeType:"text/plain"});(new ab(o)).onSuccess(function(a){try{var f=Rc(c,a,d),h=f.getRequiredFiles(a,d);if(0<h.length){var o=Ga(d);jQuery.each(h,function(a,b){h[a]=Fa(o,b)});c.mergeFiles.apply(c,h).onSuccess(function(){b.debug("Merging file "+
d);try{f.merge(c._config,a,d),s.success()}catch(h){b.error("Error merging file "+d,h),s.failure(h)}}).onFailure(function(a){b.error("Error loading file "+d,a);s.failure(a)})}else b.debug("Merging file "+d),f.merge(c._config,a,d),s.success()}catch(Yd){b.error("Error loading file "+d,Yd),s.failure(Yd)}}).onFailure(function(a){b.error("Error downloading file "+d,a);s.failure(a)})}});return Ta.apply(x,f)};q(B.prototype,"mergeFiles",B.prototype.mergeFiles);
function Rc(a,b,c){return a._handlers.dispatchOne(function(){return this},function(){return this.accept(b,c)})}B.prototype.readInstanceFactory=function(a,b){return ib(a,b||k,this.getApp()._loader)};q(B.prototype,"readInstanceFactory",B.prototype.readInstanceFactory);B.prototype.readInstanceListFactory=function(a,b){return kb(a,b||k,this.getApp()._loader)};q(B.prototype,"readInstanceListFactory",B.prototype.readInstanceListFactory);function Sc(){this._appenders=[]}t(Sc,Pa);p("wr.log.LogPlugin",Sc);Sc.prototype.configure=function(a){var b=a.categories||{},c=this.getLogManager();b[""]||(b[""]=4);C(b,function(a,b){c.setLevel(b,a)});return this.configureObjectsList(a,"appenders",function(){for(var a=-1,b=this._appenders.length;++a<b;)this.removeAppender(this._appenders[a])},function(a,b){a.setup(b);this.addAppender(a)})};q(Sc.prototype,"configure",Sc.prototype.configure);Sc.prototype.init=function(){this.getLogManager().stopPreserving()};
q(Sc.prototype,"init",Sc.prototype.init);Sc.prototype.addAppender=function(a){this.getLogManager().addAppender(a);this._appenders.push(a)};q(Sc.prototype,"addAppender",Sc.prototype.addAppender);Sc.prototype.removeAppender=function(a){this.getLogManager().removeAppender(a);Ca(this._appenders,a)};q(Sc.prototype,"removeAppender",Sc.prototype.removeAppender);Sc.prototype.getLog=function(a){return this.getLogManager().getLog(a)};q(Sc.prototype,"getLog",Sc.prototype.getLog);Sc.prototype.getLogManager=function(){return A};
q(Sc.prototype,"getLogManager",Sc.prototype.getLogManager);function D(){this._routers=new z(yb);this._requests=[];this._serving=l;this._listeners=[]}t(D,Pa);p("wr.nav.NavPlugin",D);D.prototype._log=A.getLog("wr.nav.NavPlugin");D.prototype.configure=function(a){return this.configureObjectsList(a,"routers",function(){this._routers.clear()},function(a,c){this.addRouter(a,Number(c.priority)||g)})};q(D.prototype,"configure",D.prototype.configure);q(D,"DEFAULT_PRIORITY",0);D.prototype.addRouter=function(a,b){this._routers.add(a,-b||0)};
q(D.prototype,"addRouter",D.prototype.addRouter);D.prototype.removeRouter=function(a){this._routers.remove(a)};q(D.prototype,"removeRouter",D.prototype.removeRouter);D.prototype.getRouterOfType=function(a){var b=this._routers.find(function(){return this instanceof a});b||e(Error("No router of requested type was found"));return b};q(D.prototype,"getRouterOfType",D.prototype.getRouterOfType);
D.prototype.navigate=function(a){var b=new Sa;this._requests.push({request:a,result:b});this._triggerListeners("requestEnqueue",a);if(!this._serving)this._serving=i,Tc(this);return b.getPromise()};q(D.prototype,"navigate",D.prototype.navigate);D.prototype.cancel=function(a){var b=this;_.find(this._requests,function(c,d){if(c.request===a)return b._requests.splice(d,1),b._log.debug("Canceling "+a),b._triggerListeners("requestCancel",a),c.result.failure(Error("Canceled")),i})};
q(D.prototype,"cancel",D.prototype.cancel);D.prototype.precompute=function(a){var b=l;this._routers.dispatchAll(function(){b||(b=this.precompute(a))});b||e(Error("Found no router implementing "+a))};q(D.prototype,"precompute",D.prototype.precompute);
function Tc(a){var b;do(b=a._requests[0])&&a._triggerListeners("requestBeforeServe",b.request);while(b&&b!==a._requests[0]);if(b){a._requests.shift();var c=b.request,d=b.result;a._log.isDebugEnabled()&&a._log.debug("Serving "+c);a._triggerListeners("requestServe",c);b=function(b,f,h){a._triggerListeners("requestSuccess",c,b,f,h);d.success(h);Tc(a)};var f=function(b,f){a._triggerListeners("requestFailure",c,b,f);d.failure(Error(b||"Failed"));Tc(a)};c.addSuccessListener(b);c.addFailureListener(f);try{var h=
l;a._routers.dispatchAll(function(){h||(a._triggerListeners("requestRoute",c,this),this.route(c),h=c.isStarted())});h||(a._log.error("Found no router implementing "+c),c.removeSuccessListener(b),c.removeFailureListener(f),e(Error("Not routed")));a._triggerListeners("requestStart",c)}catch(j){a._log.error("Error serving "+c,j),d.failure(j)}}else a._serving=l}D.prototype.addListener=function(a){a&&0>_.indexOf(this._listeners,a)&&this._listeners.push(a)};q(D.prototype,"addListener",D.prototype.addListener);
D.prototype.removeListener=function(a){Ca(this._listeners,a)};q(D.prototype,"removeListener",D.prototype.removeListener);D.prototype._triggerListeners=function(a,b){var c=this,d=jQuery.makeArray(arguments);d.shift();_.each(this._listeners,function(b){var h=b[a];if(h)try{h.apply(b,d)}catch(j){c._log.error("Error invoking '"+a+"' of navigation listener",j)}})};function E(a,b,c,d){a=Uc(a);this._url=a.url;this._params=jQuery.extend({},a.params)||{};jQuery.extend(this._params,b);this._inputs=jQuery.makeArray(c)||[];this._target=d;this._responseTypes=k;this._listeners={};this._completed=this._started=l}p("wr.nav.Request",E);E.prototype._log=A.getLog("wr.nav.Request");E.prototype.getURL=m("_url");q(E.prototype,"getURL",E.prototype.getURL);E.prototype.setURL=function(a){a=Uc(a);this._url=a.url;jQuery.extend(this._params,a.params)};q(E.prototype,"setURL",E.prototype.setURL);
function Uc(a){var a=parseUri(a),b=jQuery.deparam(a.query);a.query="";return{url:Ea(a),params:b}}E.prototype.getParams=m("_params");q(E.prototype,"getParams",E.prototype.getParams);E.prototype.getInputs=m("_inputs");q(E.prototype,"getInputs",E.prototype.getInputs);E.prototype.isDeparting=function(){return this._target!==g};q(E.prototype,"isDeparting",E.prototype.isDeparting);E.prototype.getTarget=m("_target");q(E.prototype,"getTarget",E.prototype.getTarget);
E.prototype.setTarget=function(a){this.isDeparting()||e(new w("Cannot change target of non-departing requests"));this._target=a!==g?a:k};q(E.prototype,"setTarget",E.prototype.setTarget);E.prototype.getResponseTypes=function(){return this._responseTypes&&this._responseTypes.slice()};q(E.prototype,"getResponseTypes",E.prototype.getResponseTypes);E.prototype.setResponseTypes=function(a){this._responseTypes=0<arguments.length?jQuery.makeArray(arguments):k};q(E.prototype,"setResponseTypes",E.prototype.setResponseTypes);
E.prototype.isStarted=m("_started");q(E.prototype,"isStarted",E.prototype.isStarted);E.prototype.addStartListener=function(a){Vc(this,"start",a)};q(E.prototype,"addStartListener",E.prototype.addStartListener);E.prototype.removeStartListener=function(a){Wc(this,"start",a)};q(E.prototype,"removeStartListener",E.prototype.removeStartListener);E.prototype.start=function(){Xc(this,l,k);this._started=i;this._triggerListeners("start")};q(E.prototype,"start",E.prototype.start);E.prototype.isCompleted=m("_completed");
q(E.prototype,"isCompleted",E.prototype.isCompleted);E.prototype.addSuccessListener=function(a){Vc(this,"success",a)};q(E.prototype,"addSuccessListener",E.prototype.addSuccessListener);E.prototype.removeSuccessListener=function(a){Wc(this,"success",a)};q(E.prototype,"removeSuccessListener",E.prototype.removeSuccessListener);E.prototype.success=function(a,b,c){Xc(this,i,l);this._completed=i;this._triggerListeners("success",[a,b,c])};q(E.prototype,"success",E.prototype.success);
E.prototype.addFailureListener=function(a){Vc(this,"failure",a)};q(E.prototype,"addFailureListener",E.prototype.addFailureListener);E.prototype.removeFailureListener=function(a){Wc(this,"failure",a)};q(E.prototype,"removeFailureListener",E.prototype.removeFailureListener);E.prototype.failure=function(a,b){Xc(this,i,l);this._completed=i;this._triggerListeners("failure",[a,b])};q(E.prototype,"failure",E.prototype.failure);
function Vc(a,b,c){"function"===typeof c&&(a=a._getCallbacks(b,i),a.add(c),a._count++)}function Wc(a,b,c){var d=a._getCallbacks(b);d&&(c&&(d.remove(c),d._count--),(!c||0>=d._count)&&a._removeCallbacks(b))}E.prototype._triggerListeners=function(a,b){var c=this._getCallbacks(a);if(c)try{c.fireWith(this,b)}catch(d){this._log.error("Error handling "+a+" of request "+this,d)}};E.prototype._getCallbacks=function(a,b){var c=this._listeners,d=c[a];if(!d&&b)c[a]=d=jQuery.Callbacks("unique"),d._count=0;return d};
E.prototype._removeCallbacks=function(a){var b=this._listeners,c=b[a];c&&(c.empty(),delete b[a])};function Xc(a,b,c){b!==k&&a._started!==b&&e(new w("Request "+(b?"not":"already")+" started"));c!==k&&a._completed!==c&&e(new w("Request "+(c?"not":"already")+" completed"))}E.prototype.toString=function(){return"Request to "+this._url};var Yc=A.getLog("wr.ui.html"),Zc={blob:k,"boolean":"boolean",date:"Date",decimal:"number","float":"number",integer:"number",password:"string",string:"string",text:"string",time:"Date",timestamp:"Date",url:"string"};p("wr.ui.html.getScriptType",function(a){return Zc[a]});
function $c(a){function b(a){return!jQuery(a).parents().addBack().filter(function(){var a=jQuery(this);return!(a.is("div")&&"inline"===a.css("display"))&&("hidden"===a.attr("type")||a.is(":hidden"))}).length}var c=!isNaN(jQuery(a).attr("tabindex")),d=a.nodeName.toLowerCase();if("area"===d){c=a.parentNode;d=c.name;if(!a.href||!d||"map"!==c.nodeName.toLowerCase())return l;a=jQuery("img[usemap=#"+d+"]")[0];return!!a&&b(a)}return(/input|select|textarea|button|object/.test(d)?!a.disabled:"a"==d?a.href||
c:c)&&b(a)}p("wr.ui.html.isFocusable",$c);function ad(a){Yc.isDebugEnabled()&&Yc.debug("Focusing element "+u(a));try{a.focus()}catch(b){Yc.warn("Element "+u(a)+" is not currently focusable")}}p("wr.ui.html.focus",ad);
function bd(a){var b=cd(a);try{if("number"===typeof a.selectionStart)return{start:a.selectionStart};if("undefined"!==typeof b.selection&&"string"===typeof a.value){var c=b.selection.createRange();if(c&&c.parentElement()===a)return c.moveStart("character",-a.value.length),{start:c.text.length}}}catch(d){}return k}p("wr.ui.html.getSelectedRange",bd);
function dd(a,b){var c=cd(a);try{if("number"===typeof a.selectionStart)a.setSelectionRange(b.start,b.start);else if("undefined"!==typeof c.selection&&"string"===typeof a.value){var d=c.selection.createRange();d&&d.parentElement()===a&&(d.move("character",-a.value.length),d.move("character",b.start),d.select())}}catch(f){}}p("wr.ui.html.setSelectedRange",dd);
var ed=function(){var a=/\W/g;return function(b,c,d){if(c.replace(a,"")!==d.replace(a,""))return b;for(var f=0,h=Math.min(b.start,c.length,d.length),j=0,o=0;j<=h&&o<=h;j++,o++){var s=a.test(c[j]),W=a.test(d[o]);s!==W&&(s&&!W?(o--,j<b.start&&f--):(j--,f++))}return{start:Math.max(0,b.start+f)}}}();p("wr.ui.html.recomputeRange",ed);p("wr.ui.html.addRemoveListener",function(a,b){var c=GLOBAL.setInterval(function(){jQuery.contains(GLOBAL.document.documentElement,a)||(GLOBAL.clearInterval(c),b(a))},500)});
function cd(a){a=a&&a.ownerDocument;(!a||9!==a.nodeType)&&e(Error("Element must be part of a document"));return a};var fd=A.getLog("wr.ui.html.resx");function gd(a,b){var c=jQuery(a),d=c.attr("src")||c.attr("href"),f=c.data("wr-resname");return f?(d=c.data("wr-resver")||k,{name:f,version:d!==k?""+d:k,unloadable:hd(c)}):b&&d?{name:"_path-"+d,version:k,unloadable:hd(c)}:k}p("wr.ui.html.resx.getInfo",gd);function hd(a){var b=a[0].nodeName.toLowerCase();return"style"===b?i:"link"===b?"stylesheet"===a.attr("rel"):l}
p("wr.ui.html.resx.getLoaded",function(a){var b=_.clone(id());a||_.each(_.keys(jd),function(a){delete b[a]});return b});
function kd(a){var b=id(),c=b[a.name];if(c)return c.version===a.version?fd.debug("Skipping loading of resource '"+a.name+"' (version "+(a.version||"unknown")+") since it is already loaded"):fd.warn("Blocked loading of conflicting resource '"+a.name+"': version "+(a.version||"unknown")+" was incoming, but version "+(c.version||"unknown")+" is already loaded"),l;b[a.name]=jQuery.extend({unloadable:l},a);return jd[a.name]=i}p("wr.ui.html.resx.registerLoading",kd);
function ld(a){jd[a]!==i&&e(new w);delete jd[a];md(a)}p("wr.ui.html.resx.registerLoaded",ld);function nd(){id(i)}p("wr.ui.html.resx.refreshLoaded",nd);
var id=function(){var a=k;return function(b){if(!a||b){a||(a={});var c=_.clone(a);jQuery("script, link, style").each(function(){var d=gd(this,i);if(d){if(!b||!a.hasOwnProperty(d.name))a[d.name]=d,md(d.name);delete c[d.name]}});_.each(c,function(b){b.unloadable&&(fd.debug("Unloading resource '"+b.name+"' (version "+(b.version||"unknown")+") which is no longer in the document"),delete a[b.name])})}return a}}(),jd={},od={};
p("wr.ui.html.resx.addListener",function(a,b,c){(od[a]||(od[a]=jQuery.Callbacks("unique"))).add(b);c&&md(a,b)});p("wr.ui.html.resx.removeListener",function(a,b){var c=od[a];c&&c.remove(b)});function md(a,b){var c,d=id()[a];d&&(b?b.apply(GLOBAL,[d]):(c=od[a])&&c.fireWith(GLOBAL,[d]))};function F(a){this._owner=a;this._objects=[];this._runningPhase=this._completedPhase=k;this._listeners=[]}p("wr.util.LifecycleManager",F);F.prototype._log=A.getLog("wr.util.LifecycleManager");F.prototype.getOwner=m("_owner");q(F.prototype,"getOwner",F.prototype.getOwner);var pd={};pd[k]=["init"];pd.init=["start","dispose"];pd.start=["stop"];pd.stop=["dispose","start"];pd.dispose=[];
var qd={init:["init"],start:["init","start"],stop:["init"],dispose:[]},rd={init:["dispose"],start:["stop","dispose"],stop:["dispose"],dispose:[]};function sd(a,b){0>_.indexOf(pd[a._completedPhase],b)&&e(new w("Unable to transition to "+b+" phase after "+a._completedPhase+" phase"));a._log.debug("Running phase "+b);a._runningPhase=b;var c=a._objects.slice(0);return td(a,[b],c).chain(function(){a._runningPhase=k;a._completedPhase=b;ud(a,b);a._log.debug("Completed phase "+b)})}
function vd(a,b){var c=[b],d=bb,f=qd[a._completedPhase];f&&(d=d.chain(function(){a._log.debug("Applying completed phases "+f+" to "+b);return td(a,f,c)},g));a._runningPhase!==k&&(d=d.chain(function(){a._log.debug("Applying running phase "+a._runningPhase+" to "+b);return td(a,[a._runningPhase],c)}));return d}function wd(a,b){var c=rd[a._completedPhase];return c?(a._log.debug("Applying future phases "+c+" to "+b),td(a,c,[b])):bb}
function td(a,b,c){for(var d=[],f=-1,h=c.length;++f<h;){for(var j=c[f],o=bb,s=-1,W=b.length;++s<W;){var M=b[s],Ka=j[M];"function"===typeof Ka&&(o=o.chain(function(){return Xa(Ka,j)}).onFailure(function(b){a._log.error("Error during "+M+" of "+j,b)}))}d.push(o)}return Ta.apply(x,d)}F.prototype.register=function(a){var b=this;if(!a)return bb;var c=l;jQuery.each(this._objects,function(b,f){if(f===a)return c=i,l});return c?bb:vd(this,a).chain(function(){b._objects.push(a)})};
q(F.prototype,"register",F.prototype.register);F.prototype.unregister=function(a){var b=this;if(!a)return bb;var c=k;jQuery.each(this._objects,function(d,f){if(f===a)return b._objects.splice(d,1),c=a,l});return!c?bb:wd(this,c)};q(F.prototype,"unregister",F.prototype.unregister);F.prototype.addListener=function(a,b){if(a&&!_.contains(this._listeners,a)&&(this._listeners.push(a),b)){var c=qd[this._completedPhase];c&&_.each(c,function(b){xd(this,a,b)},this)}};q(F.prototype,"addListener",F.prototype.addListener);
F.prototype.removeListener=function(a){a&&Ca(this._listeners,a)};q(F.prototype,"removeListener",F.prototype.removeListener);function ud(a,b){0<a._listeners.length&&a._log.debug("Invoking "+a._listeners.length+" "+b+" listeners");_.each(a._listeners,function(a){xd(this,a,b)},a)}function xd(a,b,c){c=b[c];if("function"===typeof c)try{c.call(b,a._owner)}catch(d){a._log.error("Error in lifecycle listener",d)}}F.prototype.init=function(){return sd(this,"init")};q(F.prototype,"init",F.prototype.init);
F.prototype.start=function(){return sd(this,"start")};q(F.prototype,"start",F.prototype.start);F.prototype.stop=function(){return sd(this,"stop")};q(F.prototype,"stop",F.prototype.stop);F.prototype.dispose=function(){return sd(this,"dispose")};q(F.prototype,"dispose",F.prototype.dispose);function yd(a){this._data={};this._size=0;a!==g&&this.setRootData(a)}p("wr.util.coll.DataTree",yd);yd.prototype.getSize=m("_size");q(yd.prototype,"getSize",yd.prototype.getSize);yd.prototype.getData=function(a){return this._data[(a?a+".":"")+"__"]};q(yd.prototype,"getData",yd.prototype.getData);yd.prototype.setData=function(a,b){var c=(a?a+".":"")+"__",d=this._data.hasOwnProperty(c);b!==g?(this._data[c]=b,d||this._size++):d&&(delete this._data[c],this._size--)};q(yd.prototype,"setData",yd.prototype.setData);
yd.prototype.getRootData=function(){return this.getData(k)};q(yd.prototype,"getRootData",yd.prototype.getRootData);yd.prototype.setRootData=function(a){this.setData(k,a)};q(yd.prototype,"setRootData",yd.prototype.setRootData);yd.prototype.getTree=function(a){var b=(a||"")+".",c=b.length,d=this._data,a={},f=0,h;for(h in d)d.hasOwnProperty(h)&&zd(d,h)&&0===h.indexOf(b)&&(a[h.substring(c)]=d[h],f++);h=new yd;h._data=a;h._size=f;return h};q(yd.prototype,"getTree",yd.prototype.getTree);
yd.prototype.setTree=function(a,b){var c=(a||"")+".",d=this._data,f;for(f in d)d.hasOwnProperty(f)&&zd(d,f)&&0===f.indexOf(c)&&(delete d[f],this._size--);if(b){var h=b._data;for(f in h)h.hasOwnProperty(f)&&zd(h,f)&&(d[c+f]=h[f],this._size++)}};q(yd.prototype,"setTree",yd.prototype.setTree);
yd.prototype.toString=function(){var a=jQuery.map(this._data,function(a,b){var f=b.split(".");f.pop();return{name:f.join("."),depth:f.length,data:a}});a.sort(function(a,b){return a.name<b.name?-1:1});var b=[yd._super.toString.call(this)];jQuery.each(a,function(a,d){0<d.depth&&b.push(_.str.repeat(">",d.depth)+" "+d.name);b.push(u(d.data))});return 0<b.length?b.join("\n"):"<empty tree>"};function Ad(a,b){function c(a){var b=d.get(a);b||(b={o:[],n:[]},d.put(a,b));return b}var a=a||[],b=b||[],d=new v;jQuery.each(a,function(a,b){c(b).o.push(a)});jQuery.each(b,function(a,b){c(b).n.push(a)});var f=[],h=[];d.each(function(a,b){for(;b.n.length>b.o.length;){var c=b.n.pop();f.push({value:a,newIndex:c})}for(;b.o.length>b.n.length;)c=b.o.pop(),h.push({value:a,oldIndex:c})});return{added:f,removed:h}}p("wr.util.coll.computeArrayDiffs",Ad);
function Bd(a,b,c,d){if(c||d){var a=Ad(a,b),f,h;if(c)for(b=-1,f=a.removed.length;++b<f;)h=a.removed[b],c(h.value,h.oldIndex);if(d)for(b=-1,f=a.added.length;++b<f;)h=a.added[b],d(h.value,h.newIndex)}}p("wr.util.coll.walkArrayDiffs",Bd);function Cd(a){function b(){e(new ia("Array is unmodifiable"))}var c={};jQuery.each("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a,f){c[f]=b});return ja(a||[],c)}p("wr.util.coll.unmodifiableArray",Cd);function G(a,b,c){this._view=a;this._lastSubViews=k;this._indexes=b;this._subViewsSupported=c;this._eventListeners=this._contextRegistry=k}p("wr.ui.AbstractViewer",G);G.prototype.getView=m("_view");q(G.prototype,"getView",G.prototype.getView);G.prototype.getIndexes=function(){return Cd(this._indexes)};q(G.prototype,"getIndexes",G.prototype.getIndexes);G.prototype.setup=r;q(G.prototype,"setup",G.prototype.setup);G.prototype.destroy=function(){this._contextRegistry=k};q(G.prototype,"destroy",G.prototype.destroy);
G.prototype.isContextProvider=m("_subViewsSupported");q(G.prototype,"isContextProvider",G.prototype.isContextProvider);G.prototype.setContextRegistry=function(a){this.isContextProvider()||e(new ia("Not a context provider"));this._contextRegistry=a};q(G.prototype,"setContextRegistry",G.prototype.setContextRegistry);G.prototype.getContextRegistry=m("_contextRegistry");q(G.prototype,"getContextRegistry",G.prototype.getContextRegistry);G.prototype.refreshSubViews=ba();
q(G.prototype,"refreshSubViews",G.prototype.refreshSubViews);G.prototype.collectSubViewsDiffs=function(a){var a=a||this.getView().getViews(),b=[],c=[];Bd(this._lastSubViews,a,function(a){c.push(a)},function(a){b.push(a)});this._lastSubViews=a.slice();return{added:b,removed:c}};q(G.prototype,"collectSubViewsDiffs",G.prototype.collectSubViewsDiffs);G.prototype.writeAttributes=ba();q(G.prototype,"writeAttributes",G.prototype.writeAttributes);G.prototype.readAttributes=function(){return{}};
q(G.prototype,"readAttributes",G.prototype.readAttributes);G.prototype.writeData=ba();q(G.prototype,"writeData",G.prototype.writeData);G.prototype.readData=ba();q(G.prototype,"readData",G.prototype.readData);G.prototype.addEventListener=function(a){if(a)(this._eventListeners||(this._eventListeners=jQuery.Callbacks("unique"))).add(a)};q(G.prototype,"addEventListener",G.prototype.addEventListener);G.prototype.removeEventListener=function(a){this._eventListeners&&(a?this._eventListeners.remove(a):this._eventListeners.empty())};
q(G.prototype,"removeEventListener",G.prototype.removeEventListener);G.prototype.raiseEvent=function(a,b){a&&this._eventListeners&&(b=b||this._view,this._eventListeners.fireWith(this,[a,b]))};q(G.prototype,"raiseEvent",G.prototype.raiseEvent);function Dd(a,b){G.call(this,a,b,i)}t(Dd,G);p("wr.ui.AbstractDisplayViewer",Dd);Dd.prototype.setup=function(){Ed(this)};q(Dd.prototype,"setup",Dd.prototype.setup);Dd.prototype.destroy=function(){Ed(this);Dd._super.destroy.call(this)};q(Dd.prototype,"destroy",Dd.prototype.destroy);Dd.prototype.refreshSubViews=function(){Ed(this)};q(Dd.prototype,"refreshSubViews",Dd.prototype.refreshSubViews);
function Ed(a){var b=a.collectSubViewsDiffs();jQuery.each(b.removed,function(b,d){a.destroyWindow(d)});jQuery.each(b.added,function(b,d){a.createWindow(d)})}Dd.prototype.createWindow=r;q(Dd.prototype,"createWindow",Dd.prototype.createWindow);Dd.prototype.destroyWindow=r;q(Dd.prototype,"destroyWindow",Dd.prototype.destroyWindow);function Fd(a,b){this._id=a;this._config=b;this._parent=k;this._views=[]}p("wr.ui.View",Fd);Fd.prototype.getId=m("_id");q(Fd.prototype,"getId",Fd.prototype.getId);Fd.prototype.getConfig=m("_config");q(Fd.prototype,"getConfig",Fd.prototype.getConfig);Fd.prototype.getParent=m("_parent");q(Fd.prototype,"getParent",Fd.prototype.getParent);
Fd.prototype.setParent=function(a){if(this._parent!==a&&!this._guard_setParent){this._guard_setParent=i;try{if(this._parent)this._parent.removeView(this),this._parent=k;if(a)a.addView(this),this._parent=a}finally{delete this._guard_setParent}}};q(Fd.prototype,"setParent",Fd.prototype.setParent);Fd.prototype.getViews=function(){return Cd(this._views)};q(Fd.prototype,"getViews",Fd.prototype.getViews);
Fd.prototype.addView=function(a){if(a&&!this._guard_addView){this._guard_addView=i;try{var b=a.getParent();b!==this&&(b&&e(new w("View has been already added to another view")),a.setParent(this),this._views.push(a))}finally{delete this._guard_addView}}};q(Fd.prototype,"addView",Fd.prototype.addView);
Fd.prototype.removeView=function(a){if(a&&!this._guard_removeView){this._guard_removeView=i;try{var b=a.getParent();if(b)b!==this&&e(new w("View is not part of this view")),a.setParent(k),this._views=jQuery.grep(this._views,function(b){return b!==a})||[]}finally{delete this._guard_removeView}}};q(Fd.prototype,"removeView",Fd.prototype.removeView);Fd.prototype.toString=m("_id");function Gd(a,b){G.call(this,a,b,i);this._box=k}t(Gd,G);p("wr.ui.web.BoxViewer",Gd);Gd.prototype.setup=function(a,b){jQuery.isWindow(b)||e(Error("Context must be a browser window"));var c;var d=a.boxSelector,f=jQuery(b.document);f.find("html")[0]?(c=f.find(d).eq(0),c[0]||e(Error("No box element found")),c=c[0]):e(Error("Document type not supported"));this._box=c;this._refreshContexts(l)};q(Gd.prototype,"setup",Gd.prototype.setup);
Gd.prototype.destroy=function(){this._refreshContexts(i);this._box=k};q(Gd.prototype,"destroy",Gd.prototype.destroy);Gd.prototype._refreshContexts=function(){var a=this.getContextRegistry(),b=this._box,c=this.collectSubViewsDiffs(!b?[]:g);a&&($.each(c.removed,function(b,c){a.removeContext(c)}),b&&$.each(c.added,function(c,f){a.addContext(f,k,b)}))};Gd.prototype.readAttributes=function(){var a=Gd._super.readAttributes.call(this);a.open=!!this._box;return a};q(Gd.prototype,"readAttributes",Gd.prototype.readAttributes);
Gd.prototype.writeData=function(a){var b=this._box;if(b){var c=a&&a.title;c!==g&&jQuery(b).attr("title",c)}Gd._super.writeData.call(this,a)};q(Gd.prototype,"writeData",Gd.prototype.writeData);Gd.prototype.readData=function(){var a=Gd._super.readData.call(this)||{},b=this._box;b&&(a.title=jQuery(b).attr("title"));return a};q(Gd.prototype,"readData",Gd.prototype.readData);function Hd(a,b){Dd.call(this,a,b);this._window=k}t(Hd,Dd);p("wr.ui.web.BrowserViewer",Hd);Hd.prototype.setup=function(a,b){jQuery.isWindow(b)||e(Error("Context must be a browser window"));this._window=b;Hd._super.setup.call(this,a,b)};q(Hd.prototype,"setup",Hd.prototype.setup);Hd.prototype.destroy=function(){this._window=k;Hd._super.destroy.call(this)};q(Hd.prototype,"destroy",Hd.prototype.destroy);Hd.prototype.createWindow=function(a){var b=this.getContextRegistry();b&&b.addContext(a,k,window)};
q(Hd.prototype,"createWindow",Hd.prototype.createWindow);Hd.prototype.destroyWindow=function(a){var b=this.getContextRegistry();b&&b.removeContext(a)};q(Hd.prototype,"destroyWindow",Hd.prototype.destroyWindow);function H(a,b){G.call(this,a,b,i);this._pendingAttributes=this._window=k;this._autoResize=l}t(H,G);p("wr.ui.web.WindowViewer",H);H.prototype.setup=function(a,b){jQuery.isWindow(b)||e(Error("Context must be a browser window"));this._window=b;this._refreshContexts(l)};q(H.prototype,"setup",H.prototype.setup);H.prototype.destroy=function(){Id(this,l);this._refreshContexts(i);this._window=k;H._super.destroy.call(this)};q(H.prototype,"destroy",H.prototype.destroy);
H.prototype._refreshContexts=function(a){var b=this.getContextRegistry(),c=this.getWindow(),d=this.collectSubViewsDiffs(!c?[]:g);if(b){jQuery.each(d.removed,function(a,c){b.removeContext(c)});var f=!a&&c&&c.document;f&&jQuery.each(d.added,function(a,c){b.addContext(c,k,f)})}};
H.prototype.writeAttributes=function(a){var b=this.getWindow(),c=a&&a.open;c!==g&&(Id(this,c),b=this.getWindow());if(b&&a){var c=a.width,d=a.height;if(c!==g||d!==g)b.resizeTo(c||b.outerWidth,d||b.outerHeight);b=a.autoResize;if(b!==g)this._autoResize=b}else if(a)this._pendingAttributes=this._pendingAttributes||{},jQuery.extend(this._pendingAttributes,a),delete this._pendingAttributes.open;H._super.writeAttributes.call(this,a)};q(H.prototype,"writeAttributes",H.prototype.writeAttributes);
H.prototype.readAttributes=function(){var a=H._super.readAttributes.call(this),b=this.getWindow();b?(a.width=b.outerWidth,a.height=b.outerHeight,a.autoResize=this._autoResize):this._pendingAttributes&&jQuery.extend(a,this._pendingAttributes);a.open=!!b;return a};q(H.prototype,"readAttributes",H.prototype.readAttributes);
H.prototype.writeData=function(a){var b=this.getWindow();if(b){var c=a&&a.title;if(c!==g){var d=b&&b.document;if(d&&"string"===typeof d.title)d.title=c||""}}H._super.writeData.call(this,a);this._autoResize&&"function"===typeof b.sizeToContent&&b.sizeToContent()};q(H.prototype,"writeData",H.prototype.writeData);H.prototype.readData=function(){var a=H._super.readData.call(this)||{},b=this.getWindow();if(b)b=b&&b.document,a.title=b&&b.title||k;return a};q(H.prototype,"readData",H.prototype.readData);
H.prototype.getWindow=m("_window");q(H.prototype,"getWindow",H.prototype.getWindow);function Id(a,b){var c=!!a.getWindow();if(b!==c){if(b){if(a.openWindow(),a._pendingAttributes)a.writeAttributes(a._pendingAttributes),a._pendingAttributes=k}else a._pendingAttributes=a.readAttributes(),delete a._pendingAttributes.open,a.closeWindow();a._refreshContexts(l)}}H.prototype.openWindow=ba();q(H.prototype,"openWindow",H.prototype.openWindow);H.prototype.closeWindow=ba();q(H.prototype,"closeWindow",H.prototype.closeWindow);function I(a,b){G.call(this,a,b,i);this._name=[a._id,"_",b?b.join(","):"","_"].join("");this._$dialog=k;this._autoResize=this._focused=l}t(I,G);p("wr.ui.jquery.AbstractDialogViewer",I);I.prototype.setup=function(a,b){jQuery.isWindow(b)||e(Error("Context must be a browser window"));this._$dialog=this.createDialog();this._refreshContexts(l);this._$dialog.parent(".ui-dialog").on("focusin.wr focusout.wr",jQuery.proxy(this._stopEvent,this))};q(I.prototype,"setup",I.prototype.setup);
I.prototype.destroy=function(){this.closeDialog();this._$dialog.parent(".ui-dialog").off("focusin.wr focusout.wr",this._stopEvent);this._refreshContexts(i);this._$dialog.dialog("destroy");Zb(this._$dialog[0]);this._$dialog=k};q(I.prototype,"destroy",I.prototype.destroy);I.prototype.refreshSubViews=function(){this._refreshContexts(l)};q(I.prototype,"refreshSubViews",I.prototype.refreshSubViews);
I.prototype._refreshContexts=function(a){var b=this.getContextRegistry(),c=this.getDialog(),d=this.collectSubViewsDiffs(!c.dialog("isOpen")?[]:g);if(b){jQuery.each(d.removed,function(a,c){b.removeContext(c)});var f=!a?c[0]:k;f&&jQuery.each(d.added,function(a,c){b.addContext(c,k,f)})}};I.prototype._stopEvent=function(a){a.stopPropagation()};I.prototype.getDialog=function(){this._$dialog||e(new w("Dialog not available"));return this._$dialog};q(I.prototype,"getDialog",I.prototype.getDialog);
I.prototype.createDialog=function(){var a=this;return jQuery("<div/>").dialog({autoOpen:l,open:function(){a.raiseEvent("open")},close:function(){a.raiseEvent("close");a.closeDialog()},focus:function(){if(!a._focused)a._focused=i,a.raiseEvent("focus")}})};q(I.prototype,"createDialog",I.prototype.createDialog);I.prototype.openDialog=function(){var a=this.getDialog();jQuery(a[0].ownerDocument).on("focusin.wr"+this._name+" click.wr"+this._name,jQuery.proxy(this._handleDocumentInteraction,this));a.dialog("open")};
q(I.prototype,"openDialog",I.prototype.openDialog);I.prototype.closeDialog=function(){var a=this._$dialog;if(a)a.dialog("isOpen")&&a.dialog("close"),jQuery(a[0].ownerDocument).off("focusin.wr"+this._name+" click.wr"+this._name,this._handleDocumentInteraction),a.empty(),this._focused=l,this.raiseEvent("blur")};q(I.prototype,"closeDialog",I.prototype.closeDialog);
I.prototype._handleDocumentInteraction=function(a){if(this._focused&&jQuery(a.target).closest(".ui-dialog")[0]!==this.getDialog().closest(".ui-dialog")[0])this._focused=l,this.raiseEvent("blur")};
I.prototype.writeAttributes=function(a){var b=this.getDialog(),c=a&&a.open;if(c!==g){var d=b.dialog("isOpen");c&&!d?this.openDialog():!c&&d&&this.closeDialog();this._refreshContexts(l)}c=a&&a.modal;c!==g&&b.dialog("option","modal",!!c);c=a&&a.showEffect;c!==g&&b.dialog("option","show",Fb(c));c=a&&a.hideEffect;c!==g&&b.dialog("option","hide",Fb(c));c=a&&a.autoResize;if(c!==g)this._autoResize=c,Jd(this);this._autoResize||(c=a&&a.width,c!==g&&b.dialog("option","width",Number(c)),c=a&&a.height,c!==g&&
b.dialog("option","height",Number(c)));c=a&&a.resizable;c!==g&&b.dialog("option","resizable",!!c);c=a&&a.draggable;c!==g&&b.dialog("option","draggable",!!c);c=a&&a.className;c!=g&&b.dialog("option","dialogClass",c);I._super.writeAttributes.call(this,a)};q(I.prototype,"writeAttributes",I.prototype.writeAttributes);
I.prototype.readAttributes=function(){var a=I._super.readAttributes.call(this),b=this.getDialog();a.open=!!b.dialog("isOpen");a.modal=b.dialog("option","modal");a.showEffect=Gb(""+b.dialog("option","show"));a.hideEffect=Gb(""+b.dialog("option","hide"));a.autoResize=this._autoResize;a.width=Number(b.dialog("option","width"));a.height=Number(b.dialog("option","height"));a.resizable=b.dialog("option","resizable");a.draggable=b.dialog("option","draggable");a.className=b.dialog("option","dialogClass");
return a};q(I.prototype,"readAttributes",I.prototype.readAttributes);I.prototype.writeData=function(a){I._super.writeData(a);if(a){var b=this.getDialog(),c=a.title;c!==g&&b.dialog("option","title",c);a=a.content;a!==g&&(b.html(a),Jd(this))}};q(I.prototype,"writeData",I.prototype.writeData);I.prototype.readData=function(){var a=I._super.readData()||{},b=this.getDialog();a.title=b.dialog("option","title");return a};q(I.prototype,"readData",I.prototype.readData);
function Jd(a){if(a._autoResize){var b=a.getDialog();b.dialog("option",{width:10,height:"auto"});b.find("img").filter(function(){return!this.complete}).one("load",function(){Jd(a)});for(var c=b.outerWidth()-b.width(),d=jQuery(GLOBAL).width(),f,h;;){f=b[0].scrollWidth;h=b.width();var j=Math.min(d,f+c);if(Math.abs(f-h)<=c||j>=d)break;b.dialog("option",{width:j,height:"auto"})}c=b.dialog("option","position");b.dialog("option","position",c)}};function Kd(a,b){I.call(this,a,b);this._extendedAttributes={maximize:l,minimize:l}}t(Kd,I);p("wr.ui.jquery.DialogViewer",Kd);Kd.prototype.createDialog=function(){var a=Kd._super.createDialog.call(this);a.dialog("option",{width:200,height:300,resizable:l,draggable:l,closeOnEscape:l});a=a.dialogExtend(this._extendedAttributes);Ld(a);Md(a).hide();return a};q(Kd.prototype,"createDialog",Kd.prototype.createDialog);
function Ld(a){var b=new function(a){function b(d){return a.test(d)?g:f.call(this,d)}var f=jQuery.error;this.enable=function(){jQuery.error=b};this.disable=function(){jQuery.error=f}}(/^cannot call methods on draggable prior to initialization\b.+$/);a.on("beforeMaximize.dialogExtend",jQuery.proxy(b.enable,b));a.on("maximize.dialogExtend",jQuery.proxy(b.disable,b));a.on("beforeMinimize.dialogExtend",jQuery.proxy(b.enable,b));a.on("minimize.dialogExtend",jQuery.proxy(b.disable,b))}
function Md(a){return a.parents(".ui-dialog").find(".ui-dialog-titlebar-close")}Kd.prototype.writeAttributes=function(a){var b=this.getDialog(),c=a&&a.maximizable,d=a&&a.minimizable;if(c!==g||d!==g)c!==g&&(this._extendedAttributes.maximize=!!c),d!==g&&(this._extendedAttributes.minimize=!!d),b.dialogExtend(this._extendedAttributes);c=a&&a.closable;c!==g&&(d=Md(b),c?d.show():d.hide(),b.dialog("option","closeOnEscape",!!c));Kd._super.writeAttributes.call(this,a)};q(Kd.prototype,"writeAttributes",Kd.prototype.writeAttributes);
Kd.prototype.readAttributes=function(){var a=Kd._super.readAttributes.call(this),b=this.getDialog();a.maximizable=this._extendedAttributes.maximize;a.minimizable=this._extendedAttributes.minimize;a.closable=Md(b).is(":visible");return a};q(Kd.prototype,"readAttributes",Kd.prototype.readAttributes);function Nd(a,b){I.call(this,a,b)}t(Nd,I);p("wr.ui.jquery.WaitDialogViewer",Nd);Nd.prototype.createDialog=function(){var a=Nd._super.createDialog.call(this);a.siblings(".ui-dialog-titlebar").hide();a.prepend(jQuery("<div/>").addClass("progress"));a.dialog("option",{closeOnEscape:l,draggable:l,resizable:l,modal:i});return a};q(Nd.prototype,"createDialog",Nd.prototype.createDialog);Nd.prototype.writeData=function(a){Nd._super.writeData.call(this,a);a&&a&&a.content&&this.getDialog().append(jQuery("<div/>").addClass("progress"))};
q(Nd.prototype,"writeData",Nd.prototype.writeData);function Od(a,b){H.call(this,a,b);this._secondaryWindowName=[a._id,"[",b?b.join(","):"","]"].join("");this._fixedAttributes=this._secondaryWindow=k;this.writeAttributes({width:200,height:300})}t(Od,H);p("wr.ui.web.SecondaryWindowViewer",Od);Od.prototype.getWindow=m("_secondaryWindow");q(Od.prototype,"getWindow",Od.prototype.getWindow);
Od.prototype.openWindow=function(){var a=this,b=Od._super.getWindow.call(this),c=this.readAttributes(),d=[];d.push("left=200");d.push("top=100");c.width&&d.push("width="+c.width);c.height&&d.push("height="+c.height);d.push("resizable="+(c.resizable?"yes":"no"));d.push("dialog="+(c.maximizable?"no":"yes"));d.push("minimizable="+(c.minimizable?"yes":"no"));this._fixedAttributes={};this._fixedAttributes.resizable=c.resizable;this._fixedAttributes.minimizable=c.minimizable;this._fixedAttributes.maximizable=
c.maximizable;var f=b.open(k,this._secondaryWindowName,d.join(","));jQuery(f).on("unload",function(){Mb(function(){if(f.closed)a.raiseEvent("close"),a._secondaryWindow=k,a._fixedAttributes=k})});jQuery(f).focus(function(){a.raiseEvent("focus")});this.raiseEvent("open");this._secondaryWindow=f};q(Od.prototype,"openWindow",Od.prototype.openWindow);Od.prototype.closeWindow=function(){this._secondaryWindow&&this._secondaryWindow.close()};q(Od.prototype,"closeWindow",Od.prototype.closeWindow);
Od.prototype.writeAttributes=function(a){a&&this._fixedAttributes&&C(this._fixedAttributes,function(b,c){var d=a&&a[c];d!==g&&d!==b&&e(new w("Cannot change attribute '"+c+"' at this time"))});Od._super.writeAttributes.call(this,a)};q(Od.prototype,"writeAttributes",Od.prototype.writeAttributes);Od.prototype.readAttributes=function(){var a=Od._super.readAttributes.call(this);this._fixedAttributes&&jQuery.extend(a,this._fixedAttributes);return a};q(Od.prototype,"readAttributes",Od.prototype.readAttributes);function Pd(a){return 9===a.nodeType?i:l}p("wr.util.dom.isDocument",Pd);function Qd(a){return 1===a.nodeType?i:l}p("wr.util.dom.isElement",Qd);function Rd(a,b){var c=jQuery(a);return b?(c=c.find(b),c.not(c.find(b))):c.children()}p("wr.util.dom.findImmediateDescendants",Rd);function J(){v.call(this);this._id="wr:"+Sd++ +":safeMap";this._elementKeys=[]}t(J,v);p("internal.util.coll.SafeMap",J);var Sd=0;J.prototype.put=function(a,b){if(Qd(a)){var c=jQuery.data(a);"undefined"===typeof c[this._id]&&this._elementKeys.push(a);var d=c[this._id];c[this._id]=b;return d}return J._super.put.call(this,a,b)};q(J.prototype,"put",J.prototype.put);J.prototype.putAll=function(a){var b=this;a.each(function(a,d){b.put(a,d)})};q(J.prototype,"putAll",J.prototype.putAll);
J.prototype.remove=function(a){if(Qd(a)){var b=jQuery.data(a,this._id);jQuery.removeData(a,this._id);this._elementKeys=jQuery.grep(this._elementKeys,function(b){return b!==a});return b}return J._super.remove.call(this,a)};q(J.prototype,"remove",J.prototype.remove);J.prototype.clear=function(){for(var a=-1,b=this._elementKeys.length;++a<b;)jQuery.removeData(this._elementKeys[a],this._id);this._elementKeys=[];J._super.clear.call(this)};q(J.prototype,"clear",J.prototype.clear);
J.prototype.isEmpty=function(){return 0===this._elementKeys.length&&J._super.isEmpty.call(this)};q(J.prototype,"isEmpty",J.prototype.isEmpty);J.prototype.getSize=function(){return this._elementKeys.length+J._super.getSize.call(this)};q(J.prototype,"getSize",J.prototype.getSize);J.prototype.containsKey=function(a){if(J._super.containsKey.call(this,a))return i;for(var b=-1,c=this._elementKeys.length;++b<c;)if(this._elementKeys[b]===a)return i;return l};q(J.prototype,"containsKey",J.prototype.containsKey);
J.prototype.containsValue=function(a){if(J._super.containsValue.call(this,a))return i;for(var b=-1,c=this._elementKeys.length;++b<c;)if(jQuery.data(this._elementKeys[b],this._id)===a)return i;return l};q(J.prototype,"containsValue",J.prototype.containsValue);J.prototype.get=function(a){return Qd(a)?jQuery.data(a,this._id):J._super.get.call(this,a)};q(J.prototype,"get",J.prototype.get);
J.prototype.getKeys=function(){var a=[].concat(this._elementKeys);Array.prototype.push.apply(a,J._super.getKeys.call(this));return Cd(a)};q(J.prototype,"getKeys",J.prototype.getKeys);J.prototype.getValues=function(){for(var a=[],b=-1,c=this._elementKeys.length;++b<c;){var d=jQuery.data(this._elementKeys[b],this._id);a.push(d)}Array.prototype.push.apply(a,J._super.getValues.call(this));return Cd(a)};q(J.prototype,"getValues",J.prototype.getValues);
J.prototype.getEntries=function(){for(var a=[],b=-1,c=this._elementKeys.length;++b<c;){var d=this._elementKeys[b],f=jQuery.data(d,this._id);a.push({key:d,value:f})}Array.prototype.push.apply(a,J._super.getEntries.call(this));return Cd(a)};q(J.prototype,"getEntries",J.prototype.getEntries);J.prototype.each=function(a){if(a){for(var b=-1,c=this._elementKeys.length;++b<c;){var d=this._elementKeys[b],f=jQuery.data(d,this._id);a(d,f)}J._super.each.call(this,a)}};q(J.prototype,"each",J.prototype.each);function K(a,b,c){G.call(this,a,b,c);this._lastFocusedElementId=this._context=k;this._focused=l}t(K,G);p("wr.ui.html.AbstractHtmlViewer",K);K.prototype._log=A.getLog("wr.ui.html.AbstractHtmlViewer");K.prototype.setup=function(a,b){Qd(b)||e(Error("Context must be an HTML DOM element"));this._context=b;jQuery(this._context).on("focusin focusout click keypress",jQuery.proxy(this._handleFocusEvents,this))};q(K.prototype,"setup",K.prototype.setup);
K.prototype.destroy=function(){jQuery(this._context).off("focusin focusout click keypress",this._handleFocusEvents);this._context=k;K._super.destroy.call(this)};q(K.prototype,"destroy",K.prototype.destroy);K.prototype.getContext=function(){this._context||e(new w("Context not available"));return this._context};q(K.prototype,"getContext",K.prototype.getContext);K.prototype.raiseEventForHtmlEvent=function(a,b,c){c&&Td(c,"uiEventRaised")&&this.raiseEvent(a,b)};q(K.prototype,"raiseEventForHtmlEvent",K.prototype.raiseEventForHtmlEvent);
function Td(a,b){function c(a,b){var c=a.originalEvent||a;"string"===typeof c.data?c.data=(c.data?c.data+",":"")+b:(c.__wr_eventTags||(c.__wr_eventTags={}))[b]=i}return!function(a,b){var c=a.originalEvent||a;return"string"===typeof c.data?0<=_.indexOf(c.data.split(","),b):(c.__wr_eventTags||(c.__wr_eventTags={}))[b]===i}(a,b)?(c(a,b),i):l}
K.prototype._handleFocusEvents=function(a){if(Td(a,"focusTracked")){var b=jQuery(a.target),c=b.attr("id")||k,d="click"===a.type||"keypress"===a.type||"focusin"===a.type,f="focusin"==a.type||"focusout"==a.type;if(f||$c(b[0])){if(d!==this._focused||d&&c!==this._lastFocusedElementId)c?this._log.debug("["+this.getView()._id+"] Focus "+(d?"received":"lost")+" by element '"+c+"'"):this._log.debug("["+this.getView()._id+"] Focus "+(d?"received":"lost")+" by element with no id "+u(b[0]));this._focused=!!d;
if(d)this._lastFocusedElementId=c||k,f?this.raiseEventForHtmlEvent("focus",this.getView(),a):this.raiseEvent("focus",this.getView())}}};K.prototype.getLastFocusedElement=function(){var a;if(this._lastFocusedElementId){a=jQuery("#"+vc(this._lastFocusedElementId));if(0<a.length)return a[0];this._lastFocusedElementId=k}return k};q(K.prototype,"getLastFocusedElement",K.prototype.getLastFocusedElement);K.prototype.isFocused=m("_focused");q(K.prototype,"isFocused",K.prototype.isFocused);
K.prototype.writeAttributes=function(a){if((a&&a.focused)===i){var b=this.getLastFocusedElement();b||jQuery(this._context).find(":input:not(:submit)").each(function(){if($c(this))return b=this,l});b&&ad(b)}K._super.writeAttributes.call(this,a)};q(K.prototype,"writeAttributes",K.prototype.writeAttributes);K.prototype.readAttributes=function(){var a=K._super.readAttributes.call(this);a.focused=this.isFocused();return a};q(K.prototype,"readAttributes",K.prototype.readAttributes);function ya(a,b,c){var d;ya=d=pa().supportsPropertyDefinition()?function(a,b,c){(c.get||c.set)&&e(new TypeError("Accessor properties not supported"));Object.defineProperty(a,b,c)}:function(a,b,c){(!a||!c)&&e(new ReferenceError);(c.get||c.set)&&e(new TypeError("Accessor properties not supported"));var d=a.__wr_property_definitions;d||(a.__wr_property_definitions=d={});var s=d[b];s?s.configurable||e(new TypeError("Property is not configurable")):d[b]=s={writable:l,enumerable:l,configurable:l};jQuery.extend(s,
c);a[b]=s.value};d(a,b,c)}p("wr.util.obj.defineProperty",ya);function Ud(a,b){if(a===k||a===g||b===k||b===g)return i;b=""+b;if(!Object.prototype.hasOwnProperty.call(a,b))return i;var c;try{if(c=delete a[b],c!==Object.prototype.hasOwnProperty.call(a,b))return c}catch(d){}try{return a[b]=g,i}catch(f){return l}}p("wr.util.obj.deleteProperty",Ud);
function zd(a,b){var c;zd=c=pa().supportsPropertyDefinition()?da(i):function(a,b){if("__wr_property_definitions"===b)return l;var c=a&&a.__wr_property_definitions;return(c=c&&c[b])?!!c.enumerable:i};return c(a,b)}p("wr.util.obj.isLoopedPropertyEnumerable",zd);function Vd(a,b){if(a){var c=a.split("."),d=b||GLOBAL;try{for(var f;c.length&&(f=c.shift());)d=d[f]}catch(h){h instanceof TypeError&&(h=new TypeError(""+a+" is undefined")),e(h)}return d}}p("wr.util.obj.lookup",Vd);
function Wd(a){var b;Wd=b="function"===typeof Object.keys?Object.keys:function(a){("object"!==typeof a&&"function"!==typeof a||a===k)&&e(new TypeError);var b=[],f;for(f in a)Object.prototype.hasOwnProperty.call(a,f)&&zd(a,f)&&b.push(f);return b};return b(a)}p("wr.util.obj.keys",Wd);function C(a,b){var c;C=c=pa().supportsPropertyDefinition()?function(a,b){_.each(a,b)}:function(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&zd(a,c)&&b(a[c],c)};c(a,b)}p("wr.util.obj.each",C);
function Xd(a,b,c){if(!a||!b||!jQuery.isPlainObject(a)||!jQuery.isPlainObject(b))return a;c===i?jQuery.extend(i,a,b):0<c?C(b,function(b,f){"undefined"!==typeof b&&(jQuery.isPlainObject(a[f])&&jQuery.isPlainObject(b)?Xd(a[f],b,c-1):a[f]=b)}):jQuery.extend(a,b);return a}p("wr.util.obj.extend",Xd);var $d=new v;new v;
function ae(a){a||e(new TypeError("Invalid enumeration type"));var b=$d.get(a);if(!b){var b=[],c=[],d=new v,f;for(f in a)if(Object.prototype.hasOwnProperty.call(a,f)&&zd(a,f)){var h=a[f];"function"!==typeof h&&(b.push(f),c.push(h),d.put(h,f))}b={names:b,values:c,namesByValue:d};$d.put(a,b)}return b}function be(a){return ae(a).values}p("wr.util.obj.getEnumValues",be);p("wr.util.obj.getEnumNames",function(a){return ae(a).names});
function ce(a,b){var c=ae(a).namesByValue.get(b);c||e(new TypeError("Invalid constant value '"+b+"' for enumeration type "+a));return c||k}p("wr.util.obj.getEnumName",ce);function de(a,b){this.readyState=0;this.onreadystatechange=k;this.status=0;this.statusText="";this.responseXML=this.responseText=k;this._$form=jQuery(a);this._formInputs=b;this._accessor=this._$iframe=k;this._error=this._complete=this._sending=l;this._responseHeaders=k;this._log.isDebugEnabled()&&this._log.debug("Constructed for form "+u(a))}p("internal.logic.AjaxFrameTransport",de);de.prototype._log=A.getLog("internal.logic.AjaxFrameTransport");
de.prototype.open=function(){var a=jQuery,b;b=jQuery("#wr-ajaxFramesDiv");0===b.length&&(b=jQuery("<div>",{id:"wr-ajaxFramesDiv"}).css({position:"absolute",display:"none",height:"0",width:"0"}).prependTo(GLOBAL.document.body));var c="wr-ajaxRequest"+Math.floor(2147483647*Math.random());b=jQuery(this._createFrame(c)).attr({name:c,id:c}).css({display:"none",height:"0",width:"0"}).appendTo(b)[0];this._$iframe=a(b);this._accessor=new Dc(this._$iframe[0]);ee(this,1,i)};
de.prototype._createFrame=function(a){var b=k;try{b=GLOBAL.document.createElement('<div name="__test">')}catch(c){}b=b&&"DIV"===b.tagName.toUpperCase()&&"__test"===b.name?function(a){return GLOBAL.document.createElement('<iframe name="'+a+'">')}:function(a){return jQuery("<iframe>",{name:a})[0]};de.prototype._createFrame=b;return b(a)};de.prototype.setRequestHeader=ba();
de.prototype.send=function(a){var b=this._$iframe,c=this._accessor,d=this._$form;if(!this._sending){this._complete=l;this._sending=i;this._responseHeaders=k;for(var f=[],h={},j=/([^=&]+)=([^&]*)/g,o;o=j.exec(a);){var s=o[1];(h[s]||(h[s]=[])).push(o[2])}var W=this._formInputs;C(h,function(a,b){var c=W[b],d=c?c.values:[],h=c&&c.element;if(!(!h?0:_.find(kc.fieldHandlers,function(a){return!!a.accept(h)})))c=fe(a),d=fe(d),d!=c&&jQuery.each(a,function(a,c){f.push(b+"="+c)})});"undefined"===typeof GLOBAL.DOMParser&&
(f.push("pxml=true"),c.setUsePseudoXML(i));b.one("complete load",jQuery.proxy(this._onComplete,this,l));b.one("abort error",jQuery.proxy(this._onComplete,this,i));b.one("load",jQuery.proxy(this._destroyFrame,this));kc.submitForm(d[0],0<f.length?f.join("&"):k,k,b.prop("name"))}};function fe(a){return a.join("&").replace(/%0D%0A/gi,"%0A").replace(/\+/g,"%20")}de.prototype.abort=function(){this._finish(i);ee(this,4,i);ee(this,0,l)};
de.prototype._onComplete=function(a){if(!this._complete)this._complete=i,this._error=a,this._finish(l),ee(this,4,i)};
de.prototype._finish=function(a){a?(this._log.debug("Aborted"),this.status=0,this.responseText=this.statusText="",this._responseHeaders=this.responseXML=k):(this._log.debug("Finished: extracting result"),this.status=200,this.statusText="OK",a=this._accessor.getContentType(),this.responseText=this._accessor.getContentsAsText(),this.responseXML="text/xml"===a||"application/xml"===a?this._accessor.getContents():k,this._responseHeaders={"content-type":a});this._sending=l};
de.prototype._destroyFrame=function(){this._sending?Mb(jQuery.proxy(this._destroyFrame,this)):GLOBAL.setTimeout(jQuery.proxy(function(){this._$iframe&&(this._$iframe.off(),Zb(this._$iframe[0]));this._accessor=this._$iframe=k},this),5E3)};de.prototype.getResponseHeader=function(a){return this._responseHeaders&&this._responseHeaders[a.toLowerCase()]||k};
de.prototype.getAllResponseHeaders=function(){if(this._responseHeaders){var a=[];C(this._responseHeaders,function(b,c){a.push(c);a.push(": ");a.push(b);a.push("\r\n")});return a.join("")}return k};function ee(a,b,c){a._log.isDebugEnabled()&&a._log.debug("Ready state "+b);a.readyState=b;c&&(a.onreadystatechange||ga)()};function ge(a,b){this._callback=a;this._finishOnInteraction=b;this._uniqueId=this._done=k;he(this)}p("internal.util.RequestWaiter",ge);var ie=[];
function he(a){a._done!==k&&e(new w("Already started waiting"));a._done=l;ie.push(a);if(1===ie.length){if(a._finishOnInteraction)jQuery(GLOBAL).on("click focusin","a, area, :submit",je);jQuery(GLOBAL).on("unload",je)}a._uniqueId=0<ke.length?ke.shift():(""+(new Date).valueOf()).slice(-3)+(""+Math.floor(100*Math.random()));var b="wrReq"+a._uniqueId;jQuery.cookie(b,"waiting",{path:"/"});le(b,function(b,d){(!d||"done"===d)&&a._finish()})}
ge.prototype._finish=function(){this._done===k&&e(new w("Not waiting"));this._done=i;Ca(ie,this);0===ie.length&&(jQuery(GLOBAL).off("unload",je),this._finishOnInteraction&&jQuery(GLOBAL).off("click focusin","a, area, :submit",je));if(this._uniqueId){var a="wrReq"+this._uniqueId;me.hasOwnProperty(a)&&(delete me[a],0===--ne&&GLOBAL.clearInterval(oe));jQuery.removeCookie(a,{path:"/"});ke.push(this._uniqueId);this._uniqueId=k}this._callback.call(GLOBAL)};
ge.prototype.notifyDone=function(){this._done===l&&this._finish()};q(ge.prototype,"notifyDone",ge.prototype.notifyDone);ge.prototype.getWaitedCookieName=function(){return this._uniqueId?"wrReq"+this._uniqueId:k};q(ge.prototype,"getWaitedCookieName",ge.prototype.getWaitedCookieName);function je(){_.each(ie,function(a){a._finish()})}var me={},ne=0,oe=k;
function le(a,b){me.hasOwnProperty(a)&&e(new w("Already observing"));0===ne++&&(oe=GLOBAL.setInterval(pe,100));me[a]={lastValue:jQuery.cookie(a)||k,callback:b}}function pe(){C(me,function(a,b){var c=jQuery.cookie(b)||k,d=a.lastValue!==c;a.lastValue=c;d&&a.callback.call(GLOBAL,b,c)})}var ke=[];function qe(){this._level=4;this._queue=[]}t(qe,pb);p("wr.log.ConsoleAppender",qe);var re={1:["error"],2:["warn"],3:["info"],4:["debug","log"]};qe.prototype.appendFiltered=function(a){var b=this;this._queue.push(a);1<=this._queue.length&&Mb(function(){for(var a;a=b._queue.shift();)se(a)})};q(qe.prototype,"appendFiltered",qe.prototype.appendFiltered);
function se(a){var b=GLOBAL.console;if(b){var c=a.getLevel(),d=a.getErrorInfo(),f=[];f.push(te(a.getTimestamp()));f.push(ce(ob,c));f.push("["+a.getCategory()+"]");f.push(a.getMessage());d&&f.push(""+d);for(var h=f.join(" "),a=d&&1>=c?ja(d._error,{toString:function(){return h}}):h,c=re[c],d=0;d<c.length;d++)if(f=b[c[d]]){"function"===typeof f?f.call(b,a):Function.prototype.call.call(f,b,a);break}}}
function te(a){var b=_.str.lpad,c=[];c.push(""+a.getFullYear());c.push("-");c.push(b(""+(a.getMonth()+1),2,"0"));c.push("-");c.push(b(""+a.getDate(),2,"0"));c.push(" ");c.push(b(""+a.getHours(),2,"0"));c.push(":");c.push(b(""+a.getMinutes(),2,"0"));c.push(":");c.push(b(""+a.getSeconds(),2,"0"));c.push(".");c.push(b(""+a.getMilliseconds(),3,"0"));return c.join("")};function ue(){this._level=4;this._autoShowLevel=2;this._historyVisible=this._loggerVisible=l;this._follow=i;this._highestLevel=4}t(ue,pb);p("wr.log.HtmlAppender",ue);
ue.prototype.appendFiltered=function(a){var b=a.getLevel(),c=a.getErrorInfo(),d,f=this._getStripe();if(f){var h=f.find(".wr-log-message"),j=f.find(".wr-log-history");d=[];d.push(ve(a.getTimestamp()));d.push(ce(ob,b));d.push("["+a.getCategory()+"]");d.push(a.getMessage());c&&d.push(""+c);c=d.join(" ");if(b<=this._highestLevel){if(b<this._highestLevel)this._highestLevel=b,this._setColors(f,this._highestLevel);h.text(a.getMessage())}f.css({"z-index":this._getMaxZIndex(".ui-dialog")+1});b<=this._autoShowLevel&&
!this._loggerVisible&&this._toggleLogger();a=jQuery("<div/>").addClass("wr-log-entry");a.attr("data-loglevel",ce(ob,b).toLowerCase());this._setColors(a,b,i);a.text(c).appendTo(j);this._follow&&j.scrollTop(j[0].scrollHeight)}};q(ue.prototype,"appendFiltered",ue.prototype.appendFiltered);
function ve(a){var b=_.str.lpad,c=[];c.push(""+a.getFullYear());c.push("-");c.push(b(""+(a.getMonth()+1),2,"0"));c.push("-");c.push(b(""+a.getDate(),2,"0"));c.push(" ");c.push(b(""+a.getHours(),2,"0"));c.push(":");c.push(b(""+a.getMinutes(),2,"0"));c.push(":");c.push(b(""+a.getSeconds(),2,"0"));c.push(".");c.push(b(""+a.getMilliseconds(),3,"0"));return c.join("")}
var we={1:["#FF0000","#FFFFFF"],2:["#FFFF00","#000000"],3:["#0000FF","#FFFFFF"],4:["#808080","#FFFFFF"]},xe={1:["#FFB2B2","#000000"],2:["#FFFFB2","#000000"],3:["#B2B2FF","#000000"],4:["#D8D8D8","#000000"]},ye={thickness:"1.5em",toggleShow:"<<",toggleHide:">>"},ze="#wr-log { position: fixed; top: 0; right: 0; overflow: hidden; text-align: center; font: 12px sans-serif; },.wr-log-toggle { float: right; width: ${thickness}; line-height: ${thickness}; text-align: center; font-weight: bold; cursor: pointer; },.wr-log-message { height: ${thickness}; margin-right: ${thickness}; line-height: ${thickness}; margin: 0; overflow: hidden; font-weight: bold; -moz-user-select: none; -ms-user-select: none; },.wr-log-history { max-height: 300px; margin: 5px; border: 3px solid #222222; border-bottom: 0; overflow: auto; background-color: #EEEEEE; text-align: left; white-space: pre-wrap; font: 90% monospace; },.wr-log-historyLinks { padding: 0 3px; margin: -5px 5px 5px; background-color: #111111; text-align: left; font-size: 80%; },.wr-log-historyLinks a { cursor: pointer; color: #FFFFFF; text-decoration: none; },.wr-log-historyLinks a ~ a { margin-left: 2em; },.wr-log-entry { border-bottom: 1px solid #222222; }".split(",");
n=ue.prototype;n._toggleLogger=function(){var a=this._getStripe();this._loggerVisible=!this._loggerVisible;a.animate({width:this._loggerVisible?"100%":ye.thickness},200);a.find(".wr-log-toggle").text(this._loggerVisible?ye.toggleHide:ye.toggleShow);!this._loggerVisible&&this._historyVisible&&this._toggleHistory()};
n._toggleHistory=function(){var a=this._getStripe();this._historyVisible=!this._historyVisible;a.css({height:this._historyVisible?"auto":ye.thickness});this._historyVisible&&a.find(".wr-log-history").each(function(){this.scrollTop=this.scrollHeight})};
n._getStripe=function(){var a=this,b=GLOBAL.document.body,c=k,d=k;b&&(d=jQuery("#wr-log-style"),d[0]||(c=ze.join("\r\n").replace(/\$\{([^}]+)}/g,function(a,b){return ye[b]}),d=jQuery("<style id='wr-log-style'>"+c+"</style>").prependTo(b)),c=jQuery("#wr-log"),c[0]||(c=jQuery("<div id='wr-log'/>").css({width:ye.thickness,height:ye.thickness}).on("click keydown keyup keypress",l).prependTo(b).fadeIn(),jQuery("<div/>").addClass("wr-log-toggle").attr("title","Click to show/hide logger").text(ye.toggleShow).appendTo(c),
jQuery("<p/>").addClass("wr-log-message").attr("title","Double-click to show/hide log history").appendTo(c),jQuery("<div/>").addClass("wr-log-history").appendTo(c),b=jQuery("<div/>").addClass("wr-log-historyLinks").appendTo(c),jQuery("<a/>").text("SELECT ALL").click(function(){a._selectText(jQuery(this).parent().siblings(".wr-log-history")[0])}).attr("title","Selects all log entries").appendTo(b),jQuery("<a/>").text("FOLLOW:"+(a._follow?"ON":"OFF")).click(function(){a._follow=!a._follow;jQuery(this).text("FOLLOW:"+
(a._follow?"ON":"OFF"))}).attr("title","Toggles automatic scrolling to the last log entry").appendTo(b),jQuery("<a/>").text("RETHROW").click(function(){var a=l;return function(){a=!a;A.setRethrowErrors(a);jQuery(this).text("RETHROW:"+(a?"ON":"OFF"))}}()).attr("title","Toggles re-throwing of errors, allowing browser tools to detect them").appendTo(b),this._setColors(c,this._highestLevel),c.find(".wr-log-toggle").click(jQuery.proxy(this._toggleLogger,this)),c.find(".wr-log-message").dblclick(jQuery.proxy(this._toggleHistory,
this))));return c};n._getMaxZIndex=function(a){if(!jQuery.fn.zIndex)return 999;var b=Number.MIN_VALUE;jQuery(a||"*").each(function(){b=Math.max(b,jQuery(this).zIndex())});return b>Number.MIN_VALUE?b:999};n._setColors=function(a,b,c){b=(c?xe:we)[b];a.css({"background-color":b[0],color:b[1]})};
n._selectText=function(a){var b;b=GLOBAL.getSelection?function(a){var b=GLOBAL.getSelection(),f=a.ownerDocument.createRange();f.selectNodeContents(a);b.removeAllRanges();b.addRange(f)}:a.ownerDocument.createTextRange?function(a){var b=a.ownerDocument.body.createTextRange();b.moveToElementText(a);b.select()}:function(){GLOBAL.alert("Text selection not supported")};ue.prototype._selectText=b;return b(a)};function Ae(){this._level=4;this._useNotifies=i;this._notifyMessage="<strong>Log Status</strong>";this._notifyStats=i;this._notifyLevel=2;this._notifying=l;this._highestLevel=4;this._tempStats={};this._tempLines=[];this._refreshTimeout=k;this._maxSize=512E3;this._viewer=k;Be(this,_.str.repeat("=",80));Be(this,""+GLOBAL.document.location);Be(this,""+new Date);Be(this,""+GLOBAL.navigator.userAgent);Be(this,_.str.repeat("=",80));var a=this;jQuery(GLOBAL).on("unload",function(){a._viewer&&a._viewer.w.close()});
Ce.push(this)}t(Ae,pb);p("wr.log.LocalAppender",Ae);var Ce=[];Ae.prototype.setup=function(a){Ae._super.setup.call(this,a);this._useNotifies="boolean"===typeof a.notify?a.notify:i;this._notifyMessage=a.notifyMessage||"<strong>Log Status</strong>";this._notifyStats="boolean"===typeof a.notifyStats?a.notifyStats:i;this._notifyLevel=a.notifyLevel||2;this._maxSize=a.maxSize||512E3};q(Ae.prototype,"setup",Ae.prototype.setup);
Ae.prototype.appendFiltered=function(a){var b=a.getLevel(),c=a.getErrorInfo();if(b<this._highestLevel)this._highestLevel=b;if(b<=this._notifyLevel&&!this._notifying)this._notifying=i;var d=[];d.push(De(a.getTimestamp()));d.push(ce(ob,b));d.push("["+a.getCategory()+"]");d.push(a.getMessage());c&&d.push(""+c);Be(this,d.join(" "),Ee[b])};q(Ae.prototype,"appendFiltered",Ae.prototype.appendFiltered);
function De(a){var b=_.str.lpad,c=[];c.push(""+a.getFullYear());c.push("-");c.push(b(""+(a.getMonth()+1),2,"0"));c.push("-");c.push(b(""+a.getDate(),2,"0"));c.push(" ");c.push(b(""+a.getHours(),2,"0"));c.push(":");c.push(b(""+a.getMinutes(),2,"0"));c.push(":");c.push(b(""+a.getSeconds(),2,"0"));c.push(".");c.push(b(""+a.getMilliseconds(),3,"0"));return c.join("")}function Be(a,b,c){try{a._tempLines.push(Fe(b)),c&&(a._tempStats[c]=(a._tempStats[c]||0)+1),Ge(a)}catch(d){He(d)}}
function Fe(a){return a.replace(/[\u0000-\u0008\u000B-\u000C\u000E-\u001F]/g,function(a){return"[0x"+a.charCodeAt(0)+"]"})}function Ie(a){a._highestLevel=4;a._tempLines=[];a._tempStats={};Je()&&(GLOBAL.localStorage.removeItem("wr.clientLog.text"),GLOBAL.localStorage.removeItem("wr.clientLog.stats"));Ge(a)}function Ge(a){if(!a._refreshTimeout)a._refreshTimeout=GLOBAL.setTimeout(jQuery.proxy(a._refreshNow,a),100)}
Ae.prototype._refreshNow=function(){this._refreshTimeout=k;try{var a=Ke();a&&this._tempLines.unshift(a);a=this._tempLines.join("\n");if(a.length>this._maxSize)var b=a.indexOf("\n",a.length-this._maxSize),a=a.substring(0<=b?b+1:a.length);Je()&&GLOBAL.localStorage.setItem("wr.clientLog.text",a);this._tempLines=[];var c=Le(),d;for(d in this._tempStats)this._tempStats.hasOwnProperty(d)&&(c[d]=(c[d]||0)+this._tempStats[d]);Je()&&GLOBAL.localStorage.setItem("wr.clientLog.stats",GLOBAL.JSON.stringify(c));
this._tempStats={};Me(this);Ne(this)}catch(f){He(f)}};function He(a){var b=GLOBAL.console;"function"===typeof b.error&&b.error(a)}function Ke(){if(Je())return GLOBAL.localStorage.getItem("wr.clientLog.text")||""}function Le(){if(Je())return GLOBAL.JSON.parse(GLOBAL.localStorage.getItem("wr.clientLog.stats")||"{}")}function Je(){return!!GLOBAL.localStorage&&!!GLOBAL.JSON}q(Ae,"openViewer",function(){_.each(Ce,function(a){Oe(a)})});
function Me(a){if(a._viewer){var b=jQuery(a._viewer.history),c=Ke();b.text(c||"");a._viewer.follow&&b.scrollTop(b[0].scrollHeight)}}
function Oe(a){if(a._viewer)a._viewer.w.focus();else{var b=GLOBAL.open();b||e(Error("Unable to open viewer window: this may be caused by popup blocking."));var c=b.document;c.open("text/html","replace");c.write('<html><head><title></title><meta http-equiv="X-UA-Compatible" content="IE=8"></head><body></body></html>');c.close();var d=GLOBAL.document.location;c.title="Log - "+d.protocol+"//"+d.host;var f={};f.w=b;f.follow=i;f.history=jQuery(c.createElement("PRE")).css({position:"absolute",top:10,left:10,
right:10,bottom:25,padding:5,margin:0,overflow:"scroll",border:"3px solid #222222","background-color":"#EEEEEE"}).appendTo(c.body)[0];d=jQuery(c.createElement("DIV")).css({position:"absolute",left:10,right:10,bottom:5,height:16,padding:"2px 4px","background-color":"#111111","font-size":"14px","line-height":"16px"}).appendTo(c.body)[0];jQuery(c.createElement("A")).text("Follow:"+(f.follow?"ON":"OFF")).attr({title:"Toggles automatic scrolling to the last log entry"}).css({color:"#FFFFFF",cursor:"pointer"}).click(function(){f.follow=
!f.follow;jQuery(this).text("Follow:"+(f.follow?"ON":"OFF"))}).appendTo(d);jQuery(c.createElement("A")).text("Clear").attr({title:"Clears all recorded log entries"}).css({color:"#FFFFFF",cursor:"pointer","margin-left":"2em"}).click(function(){Ie(a)}).appendTo(d);a._viewer=f;jQuery(b).on("unload",function(){a._viewer=k});Me(a)}}
var Pe={1:["#FF0000","#FFFFFF"],2:["#FFFF00","#000000"],3:["#0000FF","#FFFFFF"],4:["#808080","#FFFFFF"]},Ee={1:"Error",2:"Warn",3:"Info",4:"Debug"},Qe={thickness:"1.5em",dismiss:"X"},Re="#wr-clientLog { position: fixed; top: 0; right: 0; max-width: 16em; padding: 0 5px 5px; overflow: hidden; box-shadow: 0 0 5px #000000; -ms-user-select: none; -moz-user-select: none; -webkit-user-select: none; cursor: default; text-align: left; font: 12px sans-serif; },.wr-clientLog-dismiss { float: right; width: ${thickness}; margin: 0 -5px 0 10px; line-height: ${thickness}; text-align: center; font-weight: bold; cursor: pointer; background-color: #111111; color: #FFFFFF; },.wr-clientLog-stats { width: 100%; margin-top: 5px; font-weight: normal; },.wr-clientLog-stats th { text-align: left; background-color: inherit !important; color: inherit !important; },.wr-clientLog-stats td { text-align: right; background-color: inherit !important; color: inherit !important; },.wr-clientLog-links { padding: 0 3px; margin-top: 5px; background-color: #111111; font-size: 80%; font-weight: normal; },.wr-clientLog-links a { cursor: pointer; color: #FFFFFF; text-decoration: none; },.wr-clientLog-links a ~ a { margin-left: 2em; }".split(",");
function Ne(a){var b=a._getStripe();if(b){a._setColors(b,a._highestLevel);b.css({"z-index":a._getMaxZIndex(".ui-dialog")+1});a._notifying&&b.show();var c=b.find(".wr-clientLog-stats");if(c[0]){var d=Le(),f=Ee;_.each(be(ob),function(b){if(b<=a._notifyLevel){var j=f[b],b=c.find(".wr-clientLog-stats-"+b);b.find("th").text(j);b.find("td").text(d[j]||0)}})}}}
Ae.prototype._getStripe=function(){var a=this;if(!this._useNotifies)return k;var b=GLOBAL.document.body,c=k,d=k,f;b&&(d=jQuery("#wr-clientLog-style"),d[0]||(d=Re.join("\r\n").replace(/\$\{([^}]+)}/g,function(a,b){return Qe[b]}),d=jQuery("<style id='wr-clientLog-style'>"+d+"</style>").prependTo(b)),c=jQuery("#wr-clientLog"),c[0]||(c=jQuery("<div id='wr-clientLog'/>").html(this._notifyMessage).css({display:"none"}).on("click keydown keyup keypress",l).prependTo(b),jQuery("<div/>").addClass("wr-clientLog-dismiss").text(Qe.dismiss).click(function(){a._notifying=
l;c.hide()}).attr("title","Click to dismiss").prependTo(c),this._notifyStats&&(f=jQuery("<table/>").addClass("wr-clientLog-stats").appendTo(c),_.each(be(ob),function(a){jQuery("<tr><th></th><td></td></tr>").addClass("wr-clientLog-stats-"+a).appendTo(f)})),b=jQuery("<div/>").addClass("wr-clientLog-links").appendTo(c),jQuery("<a/>").text("SHOW").click(function(){Oe(a)}).attr("title","Shows the full log").appendTo(b),jQuery("<a/>").text("CLEAR").click(function(){Ie(a);a._notifying=l;c.hide()}).attr("title",
"Clears the log and dismisses this notification").appendTo(b),this._setColors(c,this._highestLevel)));return c};Ae.prototype._getMaxZIndex=function(a){if(!jQuery.fn.zIndex)return 999;var b=Number.MIN_VALUE;jQuery(a||"*").each(function(){b=Math.max(b,jQuery(this).zIndex())});return b>Number.MIN_VALUE?b:999};Ae.prototype._setColors=function(a,b){var c=Pe[b];a.css({"background-color":c[0],color:c[1]})};function Se(){this._lastDepartureWaiter=k}t(Se,wb);p("wr.nav.HttpWebRouter",Se);Se.prototype._log=A.getLog("wr.nav.HttpWebRouter");Se.prototype.isRequestImplemented=function(){return Te(i)!=k};q(Se.prototype,"isRequestImplemented",Se.prototype.isRequestImplemented);
Se.prototype.implementRequest=function(a){Te();var b=a.getURL();if((b=b&&parseUri(b))&&(b.protocol||b.host||b.path||b.query))a.isDeparting()?0<a._inputs.length?Ue(this,a):Ve(this,a):We(this,a);else{var b=a.getURL(),c=a._target;a.start();this._log.debug("Request to "+b+" with target "+c+" - Consumed");a.success("Consumed",k,k)}};q(Se.prototype,"implementRequest",Se.prototype.implementRequest);function Te(a){var b=GLOBAL.document;a!==i&&!b&&e(Error("Document DOM not available"));return b}
function We(a,b){var c=Xe(a,b),d=c[0]?c[0].form:k,f={};_.each(c,function(a){var b=encodeURIComponent(a.name);(f[b]||(f[b]={element:a,values:[]})).values.push(encodeURIComponent(a.value))});var h=b.getURL(),j={};j.xhr=Ye(d,f)||g;j.type="POST";j.data=Ze(b.getParams(),c);j.dataType=$e(b.getResponseTypes())||g;var o=k;j.beforeSend=function(){a._log.debug("Request to "+h+" - Started");af();b.start();o=(new Date).valueOf()};j.success=function(c,d,j){var Ka=(new Date).valueOf()-o;a._log.isDebugEnabled()&&
a._log.debug("Request to "+h+" - Succeeded in "+Ka+" ms");b.success(d,j&&j.responseText,c);b=f=k};j.error=function(c,d,j){var Ka=(new Date).valueOf()-o,j=j&&(j.message||j),d=_.str.capitalize(d||"Generic error")+(j?" - "+j:"");a._log.isDebugEnabled()&&a._log.debug("Request to "+h+" - Failed in "+Ka+"ms, "+d);b.failure(d,c&&c.responseText);b=f=k};a._log.isDebugEnabled()&&a._log.debug("Request to "+h+" - Underway\nType: "+j.type+"\nData: "+u(j.data)+"\nData type: "+j.dataType);jQuery.ajax(h,j)}
function af(){jQuery.each(kc.fieldHandlers,function(a,b){b.beforeRequest()})}function Ye(a,b){return a&&_.any(b,function(a){return jQuery(a.element).is(":file")})?function(){return new de(a,b)}:k}
function Ze(a,b){var c=[];c.push(jQuery.param(a));var d=jQuery(b),f={};d.each(function(a,b){var c=k;jQuery.each(kc.fieldHandlers,function(a,d){if(d.accept(b))return c=d,l});if(c)f[b.id]=c.getter});d=d.filter(function(){return"submit"!=this.type&&"file"!=this.type&&"image"!=this.type&&!f[this.id]});c.push(d.serialize());C(f,function(a,b){var d=a(jQuery("#"+vc(b))[0]);c.push(encodeURIComponent(b)+"="+encodeURIComponent(d))});return _.filter(c,function(a){return!!a}).join("&")}
var bf={html:"html",json:"json",xml:"xml"};function $e(a){return!a?k:_.map(a,function(a){return bf[a]}).join(" ")}
function Ue(a,b){var c=jQuery(Xe(a,b)),d=jQuery(c[0].form);cf(a,b,l,function(){a._log.debug("Request to "+h+" - Form post complete");b.success("Form post complete",k,k)});var f={};jQuery.extend(f,b.getParams());c.filter(":submit").each(function(){var a=jQuery(this);f[a.prop("name")]=a.val()});var h=b.getURL(),c=b._target,j=df(),c=c||j.target;a._log.isDebugEnabled()&&a._log.debug("Request to "+h+" - Form submit underway\nForm: "+u(d[0])+"\nExtra parameters: "+u(f)+"\nTarget: "+c);b.start();kc.submitForm(d[0],
k,f,c).onComplete(function(){a._log.debug("Request to "+h+" - Form submitted")})}
function Ve(a,b){var c=b.getURL(),d=b._target,f=ef(c),h=cf(a,b,f,function(){a._log.debug("Request to "+c+" - Location get complete");b.success("Location get complete",k,k)}),c=Ha(c,b.getParams()),c=_.str.strLeftBack(c,"#"),j=df(),c=Fa(j.href,c),d=d||j.target;a._log.isDebugEnabled()&&a._log.debug("Request to "+c+" - Location change underway\nTarget: "+d);b.start();(j=ff(d))?(d=j.location,d.href===c?d.reload(i):d.assign(c),a._log.debug("Request to "+c+" - Location changed"),(f||j!==GLOBAL)&&h.notifyDone()):
b.failure("Unable to open window for target "+d,k)}function Xe(a,b){var c=[];_.each(b._inputs,function(b){if(jQuery(b).is(":input")){var f;var h=jQuery(b);!h.prop("disabled")&&!gf(b)?f=b:(f=h.data("wr-originalId")||h.attr("id"),h=h.data("wr-originalName")||h.attr("name"),f=(f?jQuery("#"+vc(f))[0]:h?jQuery(":input[name='"+wc(h)+"']:not(:disabled)")[0]:k)||k);f?c.push(f):a._log.debug("No replacement found for input "+u(b))}});return c}
function gf(a){var b=a&&a.ownerDocument;if(!b)return i;do if(a===b)return l;while(a=a.parentNode);return i}function ef(a){var b=df().href,c=parseUri(Fa(b,".")),a=parseUri(Fa(b,a));return c.authority!==a.authority}function df(){var a=jQuery(Te()).find("base").eq(0),b=GLOBAL.location.href,b=a[0]&&a.attr("href")||Ga(b),a=a[0]&&a.attr("target")||"_self";return{href:b,target:a}}function ff(a){var b=GLOBAL;return!a||"_self"===a?b:"_parent"===a?b.parent:"_top"===a?b.top:b.open("about:blank",a)}
q(Se,"CALLBACK_COOKIE_PARAM","cbck");function cf(a,b,c,d){if(a._lastDepartureWaiter)a._lastDepartureWaiter.notifyDone(),a._lastDepartureWaiter=k;a=new ge(d,i);c||(b.getParams().cbck=a.getWaitedCookieName());return a};function L(){this.linkInfosSelective={};this.linkInfos={};this._linkData={};this._keptHahsesPages={};this._keptHashes={}}t(L,wb);p("wr.nav.PropagationRouter",L);L.prototype._log=A.getLog("wr.nav.PropagationRouter");q(L,"HASH_PARAMETER","CRC");
L.prototype.mergeLinkData=function(a,b){var c=this._linkData,d=c[a]||(c[a]={}),c=this._keptHashes,f=this._keptHahsesPages[a]!==l?c[a]||(c[a]={}):k;C(b,function(a,b){var c;if(a){if(c="object"===typeof a?{value:a.value,hash:a.hash}:{value:a,hash:k},d[b]=c,f&&c.hash)(f[b]||(f[b]={}))[c.value]=c.hash}else delete d[b]})};q(L.prototype,"mergeLinkData",L.prototype.mergeLinkData);L.prototype.clearLinkData=function(a){a?delete this._linkData[a]:this._linkData={}};q(L.prototype,"clearLinkData",L.prototype.clearLinkData);
L.prototype.getLinkData=m("_linkData");q(L.prototype,"getLinkData",L.prototype.getLinkData);L.prototype.setKeepHashes=function(a,b){this._keptHahsesPages[a]=!!b};q(L.prototype,"setKeepHashes",L.prototype.setKeepHashes);L.prototype.extendParameters=function(a,b,c){if(c){var d=k;C(this.linkInfos,function(a,b){a[c]&&(d=b)});if(d){var f=a.CRC?new ta(a.CRC):k,h={},j=this._keptHashes[d];if(b)C(b,function(b,c){h[c]={value:b};f=hf(a,c,h,j,f)}),f&&(a.CRC=f.toString())}}};q(L.prototype,"extendParameters",L.prototype.extendParameters);
L.prototype.alterRequest=function(a){L._super.alterRequest.call(this,a);var b=jf(a);if(b){var c=k,d=k,f="true"===a.getParams().ajaxRefresh?this.linkInfosSelective:this.linkInfos;C(f,function(a,f){a[b]&&(c=a[b],d=f)});if(c&&d){var h=a.getParams(),j=h.CRC?new ta(h.CRC):k,o=this._linkData[d],s=this._keptHashes[d];if(o)this._log.isDebugEnabled()&&this._log.debug("Propagating link "+b),_.each(c,function(a){j=hf(h,a,o,s,j)}),j&&(h.CRC=j.toString())}}};q(L.prototype,"alterRequest",L.prototype.alterRequest);
function hf(a,b,c,d,f){function h(a){if(f||a)a?(a=new ta(a),f?f.xor(a):f=a):j.warn("Found missing hashes: request may fail validation")}var j=L.prototype._log,o=(c=c[b])&&c.value;if(o===g||o===k)return f;var s=a[b];s!==o&&(j.isDebugEnabled()&&j.debug("Propagating parameter "+b+" (old value: "+s+"): "+u(c)),s!==k&&s!==g&&h(d&&d[b]&&d[b][s]),h(c.hash));a[b]=o;return f}var kf=new XRegExp("^!(?<fparams>.+)"),lf=new XRegExp("^button:(?<id>.+)$");
function jf(a){var b=parseUri(a.getURL()),b=XRegExp.exec(b.anchor,kf),c=(b?jQuery.deparam(b.fparams):{}).link||a.getParams().link;c||C(a.getParams(),function(a,b){var h=XRegExp.exec(b,lf);h&&(c=h.id)});c||jQuery.each(a._inputs,function(a,b){var h=jQuery(b);if(h.is(":input")&&(h=h.attr("name"),h=XRegExp.exec(h,lf)))return c=h.id,l});return c||k};function N(){this._app=k}t(N,tb);p("wr.logic.AjaxRequestActor",N);N.prototype._log=A.getLog("wr.logic.AjaxRequestActor");N.prototype._responseLog=A.getLog("wr.logic.AjaxRequestActor._response");N.prototype.setApp=ca("_app");q(N.prototype,"setApp",N.prototype.setApp);N.prototype.setup=function(a){N._super.setup.call(this,a);this._defaults=a};q(N.prototype,"setup",N.prototype.setup);
N.prototype.execute=function(a,b,c){var d=this,f=c.getDisplay(),h;jQuery.extend(a,this._defaults);h=mf(this,a,f);h=h.chain(function(){try{nf(f);try{return of(d,a)}finally{pf(f)}}catch(b){return d._log.error("Error in core request execution",b),new Ya(b)}});h=h.chain(function(a){var b=(a="object"===typeof a?a:k)&&a.getElementsByTagName("parsererror")[0];if(!a||b)e(Error("Received a non-XML response from server (see log for full text)"+(b?"\r\n"+b.textContent:"")));return qf(d,a,c)});b=function(b){rf(d,
a,f);return b};return h=h.chain(b,b)};q(N.prototype,"execute",N.prototype.execute);function mf(a,b,c){var d=b.waitWin,f=b.indicator,a=d&&d.id?sf(a,d,c):bb;f&&Qd(f)&&(a=a.chain(function(){jQuery(f).show()}));return a}function rf(a,b,c){var d=b.waitWin;(b=b.indicator)&&Qd(b)&&jQuery(b).hide();if(d&&d.id)d=d.id,a._log.debug("Closing waiting window "+d),c.closeWindow(d);return bb}
function sf(a,b,c){var d=b.id,f={},h;a._log.debug("Opening waiting window "+d);b=jQuery.extend({},{width:200,height:100},b)||{};a=c.getWindow(d);f={};f.width=b.width;f.height=b.height;f.className="wr-waitDialog "+(b.className||"");a.setAttributes(f);tf(a,b.message);a.open();h=new Sa;GLOBAL.setTimeout(function(){h.success()},b.duration);return h.getPromise()}function nf(a){a.getOpenWindows()[0].getControls()[0].setAttribute("cursorType","wait")}
function pf(a){a.getOpenWindows()[0].getControls()[0].setAttribute("cursorType",k)}function of(a,b){var c=uf(a,b.url,b.formPost,b.allowIgnoreFields||l);c.setResponseTypes("xml");var d=new Sa;c.addSuccessListener(function(b,c,j){try{d.success(j)}catch(o){vf(a,"Error at request success ("+b+")",c,o)}});c.addFailureListener(function(b,c){d.failure(vf(a,"Server request "+b,c,k))});a._app.getPlugin("nav").navigate(c);return d.getPromise()}
function qf(a,b,c){var d=c.getDisplay();_.each(b.getElementsByTagName("CloseWindow"),function(b){var b=b.getAttribute("name"),c;a._log.debug("Closing window "+b);(c=d.getWindow(b))?(tf(c,""),c.close()):a._log.warn("Window "+b+" not found for closing")});_.each(b.getElementsByTagName("OpenWindow"),function(b){var c=b.getElementsByTagName("UIConfig")[0],c=jQuery.parseJSON(c.textContent||c.text),f=b.getElementsByTagName("Params")[0],s=[];f&&_.each(f.attributes,function(a){s[a.name]=a.value});wf(a,b.getAttribute("name"),
c,s,d)});var b=jQuery(b).find("Content").eq(0),f=b.attr("location");return f?xf(a,f):yf(a,b,c)}function xf(a,b){var c=new E(b,g,g,k);c.addFailureListener(function(b,c){vf(a,"External content request "+b,c,k)});return a._app.getPlugin("nav").navigate(c)}
function yf(a,b,c){var d=c.getDisplay(),f=c._state,c=b.attr("window");(d=d.getWindow(c))||e(Error("Unable to find window "+c+" to update"));c=b.children("PageRefresh").eq(0);c[0]?(c.find("HiddenFields").each(function(){var a=jQuery(this);f.set(a.attr("page")+"HiddenFields",a.text())}),c.find("LinkData").each(function(){var b=_.str.trim(jQuery(this).text()),b=b?jQuery.parseJSON(b):{},c=a._app.getPlugin("nav").getRouterOfType(L);C(b,function(a,b){c.mergeLinkData(b,a)});a._log.isDebugEnabled()&&a._log.debug("Received new link data: "+
u(b))}),c.find("ControlData").each(function(){var a=jQuery(this);f.set(a.attr("control"),a.text())})):(tf(d,b.text()),d.triggerEvent("contentchange"),d.setAttribute("autoResize",d.getAttribute("autoResize")));a._log.debug("Focusing updated window "+d);d.focus();return bb}
function vf(a,b,c,d){var f=d&&(d.message||d),b=b+(f?" - "+f:""),d=d instanceof Error?d:k;a._log.error(b,d);a._responseLog.isDebugEnabled()&&a._responseLog.debug("Server response was"+(c?":\r\n"+c:" still to be received"));return d||Error(b)}
function uf(a,b,c,d){var f={},h=[];f.ajax=i;if(c){Array.prototype.push.apply(h,jQuery(ec(c.form)).filter(function(){var a=jQuery(this).attr("ignore");return!a&&a!=d}).get());f[c.button]="link";c.selectiveRefresh&&(f.ajaxRefresh="true");var j=_.str.strRight(c.button,"button:")+(c.selectiveRefresh?"_sr":""),j=jQuery(c.form).find(":input:hidden[name='"+vc(j)+"']")[0];0>_.indexOf(h,j)&&a._log.warn("Action URL input associated with button '"+c.button+"' was not sent along the request: this may disrupt application state")}return new E(b,
f,h)}
function wf(a,b,c,d,f){var h={};a._log.debug("Opening window "+b);a._app.getPlugin("ui").configureViews(k,c);c=f.getWindow(b);h={};h.modal="true"===d.modal;h.closable="true"===d.closable;h.draggable="true"===d.draggable;h.width=Number(d.width||"200");h.height=Number(d.height||"300");h.resizable="true"===d.resizable;h.autoResize="true"===d.autoResizing;h.maximizable="true"===d.maximizable;h.minimizable="true"===d.minimizable;h.showEffect=d.showEffect||k;h.hideEffect=d.hideEffect||k;h.className=d.className;
c.setAttributes(h);c.setData({title:d.title});c.isOpen()?a._log.warn("Window "+b+" is already open"):c.open()}function tf(a,b){var c=a.getControls()[0];c?c.setData({html:b}):a.setData({content:b})}N.prototype.precomputeRequest=function(a){jQuery.extend(a,this._defaults);var b=uf(this,a.url,a.formPost,a.allowIgnoreFields||l),a=_.str.strLeft(b.getURL(),"#"),b=jQuery.param(b.getParams());return{url:a,params:b}};q(N.prototype,"precomputeRequest",N.prototype.precomputeRequest);
N.prototype.startFullWaitUX=function(a,b){return mf(this,a,b)};q(N.prototype,"startFullWaitUX",N.prototype.startFullWaitUX);N.prototype.stopFullWaitUX=function(a,b){return rf(this,a,b)};q(N.prototype,"stopFullWaitUX",N.prototype.stopFullWaitUX);N.prototype.startSendWaitUX=function(a,b){nf(b)};q(N.prototype,"startSendWaitUX",N.prototype.startSendWaitUX);N.prototype.stopSendWaitUX=function(a,b){pf(b)};q(N.prototype,"stopSendWaitUX",N.prototype.stopSendWaitUX);
N.prototype.processResponse=function(a,b){qf(this,a,b)};q(N.prototype,"processResponse",N.prototype.processResponse);function O(a,b){this._id=a;this._viewer=b;this._viewerListener=this._listeners=this._parent=k;this.addViewerListener()}p("wr.ui.Control",O);O.prototype._log=A.getLog("wr.ui.Control");O.prototype.destroy=function(){if(this._viewer){this.removeEventListener(k,k);this.removeViewerListener();this.setParent(k);try{this._viewer.destroy()}catch(a){this._log.error("Error destroying viewer",a)}this._viewer=k}};q(O.prototype,"destroy",O.prototype.destroy);O.prototype.getId=m("_id");q(O.prototype,"getId",O.prototype.getId);
O.prototype.getViewer=m("_viewer");q(O.prototype,"getViewer",O.prototype.getViewer);O.prototype.getParent=m("_parent");q(O.prototype,"getParent",O.prototype.getParent);O.prototype.setParent=function(a){if(this._parent!==a&&!this._guard_setParent){this._guard_setParent=i;try{if(this._parent)this._parent.removeControl(this),this._parent=k;if(a)a.addControl(this),this._parent=a}finally{delete this._guard_setParent}}};q(O.prototype,"setParent",O.prototype.setParent);
O.prototype.addEventListener=function(a,b){var c=this;if("function"===typeof b)if(a){var d=this._getCallbacks(a,i);d.add(b);d._count++}else jQuery.each(be(Cb),function(a,d){c.addEventListener(d,b)})};q(O.prototype,"addEventListener",O.prototype.addEventListener);O.prototype.removeEventListener=function(a,b){var c=this;if(a){var d=this._getCallbacks(a);d&&(b&&(d.remove(b),d._count--),(!b||0>=d._count)&&this._removeCallbacks(a))}else jQuery.each(be(Cb),function(a,d){c.removeEventListener(d,b)})};
q(O.prototype,"removeEventListener",O.prototype.removeEventListener);O.prototype.triggerEvent=function(a){zf(this,a,k)};q(O.prototype,"triggerEvent",O.prototype.triggerEvent);function zf(a,b,c){b&&(c=c||a._viewer.getView(),Af(a,new Bb(b,a,c)))}function Af(a,b){if(b){a._log.isDebugEnabled()&&a._log.debug("Dispatching "+b+" to "+a);var c=a._getCallbacks(b._type);if(c)try{c.fireWith(a,[b])}catch(d){a._log.error("Error handling "+b+" on "+a,d)}a._parent&&Af(a._parent,b)}}
O.prototype._getCallbacks=function(a,b){var c=this._eventListeners;if(!c&&b)this._eventListeners=c={};var d=c&&c[a];if(!d&&b)c[a]=d=jQuery.Callbacks("unique"),d._count=0,this.addViewerListener();return d};O.prototype._removeCallbacks=function(a){var b=this._eventListeners,c=b&&b[a];c&&(c.empty(),delete b[a],this.removeViewerListener())};
O.prototype.addViewerListener=function(){var a=this,b=this._eventListeners;if(!b)this._eventListeners=b={};var c=b._count||0;if(0===c){var d=function(b,c){zf(a,b,c)};this._viewer.addEventListener(d);this._viewerListener=d}b._count=c+1};q(O.prototype,"addViewerListener",O.prototype.addViewerListener);
O.prototype.removeViewerListener=function(){var a=this._eventListeners,b=a._count;if(0<b)a._count=b-1;else{if(this._viewerListener)this._viewer.removeEventListener(this._viewerListener),this._viewerListener=k;delete a._count}};q(O.prototype,"removeViewerListener",O.prototype.removeViewerListener);O.prototype.isVisible=function(){return this.getAttribute("visible")!==l};q(O.prototype,"isVisible",O.prototype.isVisible);O.prototype.setVisible=function(a){this.setAttribute("visible",a)};
q(O.prototype,"setVisible",O.prototype.setVisible);O.prototype.isEnabled=function(){return this.getAttribute("enabled")!==l};q(O.prototype,"isEnabled",O.prototype.isEnabled);O.prototype.setEnabled=function(a){this.setAttribute("enabled",a)};q(O.prototype,"setEnabled",O.prototype.setEnabled);O.prototype.isFocused=function(){return this.getAttribute("focused")===i};q(O.prototype,"isFocused",O.prototype.isFocused);O.prototype.focus=function(){this.setAttribute("focused",i)};q(O.prototype,"focus",O.prototype.focus);
O.prototype.setAttribute=function(a,b){var c={};c[a]=b;this.writeAttributes(c)};q(O.prototype,"setAttribute",O.prototype.setAttribute);O.prototype.setAttributes=function(a){this.writeAttributes(a)};q(O.prototype,"setAttributes",O.prototype.setAttributes);O.prototype.writeAttributes=function(a){this._viewer.writeAttributes(a)};q(O.prototype,"writeAttributes",O.prototype.writeAttributes);O.prototype.getAttribute=function(a){var b=this.readAttributes();return b?b[a]:g};q(O.prototype,"getAttribute",O.prototype.getAttribute);
O.prototype.getAttributes=function(){return this.readAttributes()};q(O.prototype,"getAttributes",O.prototype.getAttributes);O.prototype.readAttributes=function(){return this._viewer.readAttributes()};q(O.prototype,"readAttributes",O.prototype.readAttributes);O.prototype.setData=function(a){a!==g&&this._viewer.writeData(a)};q(O.prototype,"setData",O.prototype.setData);O.prototype.getData=function(){var a=this._viewer.readData();a===g&&e(new ia);return a};q(O.prototype,"getData",O.prototype.getData);
O.prototype.setDataTree=function(a){this.setData(a?a.getRootData():k)};q(O.prototype,"setDataTree",O.prototype.setDataTree);O.prototype.getDataTree=function(){var a=this._viewer.readData();return new yd(a)};q(O.prototype,"getDataTree",O.prototype.getDataTree);O.prototype.toString=function(){return"Control:"+this._id};function P(a,b){O.call(this,a,b);this._controls=[];this._controlsById={}}t(P,O);p("wr.ui.Container",P);P.prototype.destroy=function(){_.each(this.getControls(),function(a){a.destroy()});P._super.destroy.call(this)};q(P.prototype,"destroy",P.prototype.destroy);P.prototype.getControls=function(){return Cd(this._controls)};q(P.prototype,"getControls",P.prototype.getControls);
P.prototype.addControl=function(a){if(a&&!this._guard_addControl){this._guard_addControl=i;try{var b=a.getParent();b!==this&&(b&&e(new w("Control has been already added to a container")),a.setParent(this),this._controls.push(a),this._controlsById[a._id]=a)}finally{delete this._guard_addControl}}};q(P.prototype,"addControl",P.prototype.addControl);
P.prototype.removeControl=function(a){if(a&&!this._guard_removeControl){this._guard_removeControl=i;try{var b=a.getParent();if(b)b!==this&&e(new w("Control is not part of this container")),a.setParent(k),this._controls=jQuery.grep(this._controls,function(b){return b!==a})||[],delete this._controlsById[a._id]}finally{delete this._guard_removeControl}}};q(P.prototype,"removeControl",P.prototype.removeControl);
P.prototype.getControl=function(a){return this._controlsById.hasOwnProperty(a)?this._controlsById[a]||k:k};q(P.prototype,"getControl",P.prototype.getControl);P.prototype.lookupControl=function(a){var b=k;if(b=this.getControl(a))return b;jQuery.each(this._controls,function(c,d){if(d instanceof P&&(b=d.lookupControl(a)))return l});return b};q(P.prototype,"lookupControl",P.prototype.lookupControl);
P.prototype.setAttributes=function(a){P._super.setAttributes.call(this,a);jQuery.each(this.getControls(),function(b,c){c.setAttributes(a)})};q(P.prototype,"setAttributes",P.prototype.setAttributes);P.prototype.setDataTree=function(a){P._super.setDataTree.call(this,a);jQuery.each(this.getControls(),function(b,c){var d=a.getTree(c._id);c.setDataTree(d)})};q(P.prototype,"setDataTree",P.prototype.setDataTree);
P.prototype.getDataTree=function(){var a=P._super.getDataTree.call(this);jQuery.each(this.getControls(),function(b,c){var d=c._id,f=c.getDataTree(d);f&&a.setTree(d,f)});return a};q(P.prototype,"getDataTree",P.prototype.getDataTree);function Bf(a,b){this._rootContainer=a;this._factoryProvider=b;this._contexts={}}p("wr.ui.ControlTreeBuilder",Bf);Bf.prototype._log=A.getLog("wr.ui.ControlTreeBuilder");Bf.prototype.getRootContainer=m("_rootContainer");q(Bf.prototype,"getRootContainer",Bf.prototype.getRootContainer);
Bf.prototype.addContext=function(a,b,c){var d=this,f=a._id,h=b===k?"":b.join("_"),j=b===k?0:b.length,o=this._contexts[f];o||(this._contexts[f]=o={rank:j,ctxs:{},ctrls:{}});o.rank!==j&&e(new w("View '"+f+"' already has a context added with a different number of indexes"));var j=o.ctxs,s=o.ctrls;j.hasOwnProperty(h)&&e(new w("View '"+f+"' already has a context added with indexes "+u(b)));j[h]=c;if(a=Cf(this,a,b,c))if(s[h]=a,Va(a))a.onSuccess(function(a){s[h]=a}).onFailure(function(a){d._log.error("Error creating '"+
f+"' control",a)})};q(Bf.prototype,"addContext",Bf.prototype.addContext);Bf.prototype.removeContext=function(a,b){var c=this,d=a._id,f=this._contexts[d];if(f){var h=f.ctxs,f=f.ctrls;if(b!==g){var j=b===k?"":b.join("_");if(h.hasOwnProperty(j)){var o=f[j];if(o)if(Va(o))o.onSuccess(function(d){Df(c,a,b,d)});else Df(this,a,b,o);delete h[j]}}else{for(j in h)if(h.hasOwnProperty(j)&&zd(h,j)){if(o=f[j])if(Va(o))o.onSuccess(function(b){Df(c,a,Ef(j),b)});else Df(this,a,Ef(j),o);delete h[j]}delete this._contexts[d]}}};
q(Bf.prototype,"removeContext",Bf.prototype.removeContext);function Ef(a){return a?jQuery.map(a.split("_"),function(a){return Number(a)}):k}function Cf(a,b,c,d){var f=a._factoryProvider(b);if(!f)return k;b=f.create(b,c,d,a._factoryProvider);Va(b)?b=b.chain(function(b){a._rootContainer.addControl(b);return b}):a._rootContainer.addControl(b);return b}function Df(a,b,c,d){var f=a._factoryProvider(b);a._rootContainer.removeControl(d);f?f.destroy(b,c,d):d.destroy()};function Q(a,b){P.call(this,a,b)}t(Q,P);p("wr.ui.Display",Q);Q.prototype.setParent=function(a){a!==k&&e(new ia("Cannot set display parent"))};q(Q.prototype,"setParent",Q.prototype.setParent);Q.prototype.readAttributes=function(){var a=Q._super.readAttributes.call(this);a.visible=i;a.enabled=i;a.focused=i;return a};q(Q.prototype,"readAttributes",Q.prototype.readAttributes);
Q.prototype.writeAttributes=function(a){a.visible!==g&&e(new ia("Cannot set display 'visible' attribute"));a.enabled!==g&&e(new ia("Cannot set display 'enabled' attribute"));a.focused!==g&&e(new ia("Cannot set display 'focused' attribute"));Q._super.writeAttributes.call(this,a)};q(Q.prototype,"writeAttributes",Q.prototype.writeAttributes);Q.prototype.getWindows=function(){return this.getControls()};q(Q.prototype,"getWindows",Q.prototype.getWindows);Q.prototype.getWindow=function(a){return this.getControl(a)};
q(Q.prototype,"getWindow",Q.prototype.getWindow);Q.prototype.getOpenWindows=function(){var a=[];jQuery.each(this.getWindows(),function(b,c){c.isOpen()&&a.push(c)});return Cd(a)};q(Q.prototype,"getOpenWindows",Q.prototype.getOpenWindows);Q.prototype.openWindow=function(a){(a=a&&this.getWindow(a))&&a.open()};q(Q.prototype,"openWindow",Q.prototype.openWindow);Q.prototype.closeWindow=function(a){(a=a&&this.getWindow(a))&&a.close()};q(Q.prototype,"closeWindow",Q.prototype.closeWindow);
Q.prototype.toString=function(){return"Display:"+this._id};function Ff(a,b){this._display=a;this._state=b}p("wr.logic.Context",Ff);Ff.prototype.getDisplay=m("_display");q(Ff.prototype,"getDisplay",Ff.prototype.getDisplay);Ff.prototype.getState=m("_state");q(Ff.prototype,"getState",Ff.prototype.getState);function R(a,b){this._id=a;this._actor=b;this._failureLink=this._successLinks=this._transportLinks=k}p("wr.logic.Action",R);R.prototype._log=A.getLog("wr.logic.Action");R.prototype.destroy=function(){this._failureLink=this._successLinks=this._transportLinks=k;try{this._actor.destroy()}catch(a){this._log.error("Error destroying actor",a)}this._actor=k};q(R.prototype,"destroy",R.prototype.destroy);R.prototype.getId=m("_id");q(R.prototype,"getId",R.prototype.getId);R.prototype.getActor=m("_actor");
q(R.prototype,"getActor",R.prototype.getActor);R.prototype.addTransport=function(a,b){if(a)this._transportLinks?jQuery.each(this._transportLinks,function(b,d){d.action===a&&e(new w("Propagation for "+a+" already added"))}):this._transportLinks=[],this._transportLinks.push({action:a,couplings:b||k})};q(R.prototype,"addTransport",R.prototype.addTransport);
R.prototype.removeTransport=function(a){var b=this;a&&this._transportLinks&&jQuery.each(this._transportLinks,function(c,d){if(d.action===a)return b._transportLinks.splice(c,1),l})};q(R.prototype,"removeTransport",R.prototype.removeTransport);R.prototype.addSuccessHop=function(a,b,c){if(b)a=a||k,this._successLinks?this._successLinks.hasOwnProperty(a)&&e(new w("Success hop for '"+a+"' already added")):this._successLinks={},this._successLinks[a]={action:b,couplings:c||k}};
q(R.prototype,"addSuccessHop",R.prototype.addSuccessHop);R.prototype.removeSuccessHop=function(a){this._successLinks&&delete this._successLinks[a||k]};q(R.prototype,"removeSuccessHop",R.prototype.removeSuccessHop);R.prototype.addFailureHop=function(a,b){if(a)this._failureLink&&e(new w("Failure hop already added")),this._failureLink={action:a,couplings:b||k}};q(R.prototype,"addFailureHop",R.prototype.addFailureHop);R.prototype.removeFailureHop=function(){this._failureLink=k};
q(R.prototype,"removeFailureHop",R.prototype.removeFailureHop);R.prototype.execute=function(a,b){return Gf(this,a,{},b)};q(R.prototype,"execute",R.prototype.execute);
function Gf(a,b,c,d){a._log.isDebugEnabled&&a._log.debug("Executing "+a+". Input: "+u(b));var f={},b=Wa(a._actor.execute,a._actor,b||{},f,d);return b=b.chain(function(b){a._log.isDebugEnabled&&a._log.debug("Executed "+a+": success. Output: "+u(f));var j=a._successLinks&&a._successLinks[b||k];return j?Hf(a,j,f,c,d):b},function(b){a._log.isDebugEnabled&&a._log.debug("Executed "+a+": failure. Output: "+u(f),b);var j=a._failureLink;return j?Hf(a,j,f,c,d):b})}
function Hf(a,b,c,d,f){a._transportLinks&&jQuery.each(a._transportLinks,function(a,b){If(b,c,d)});If(b,c,d);return Gf(b.action,d[b.action._id]||{},d,f)}function If(a,b,c){var d=a.action._id,a=a.couplings,f;(f=c[d])||(f=c[d]={});jQuery.each(a,function(a,c){var d=g,s=c._sourceName,W=c._sourceValue;s&&(d=b[s]);d===g&&(d=W);d!==g&&(f[c._targetName]=d)})}R.prototype.toString=function(){return"Action:"+this._id};function Jf(){this._actions=this._app=k}t(Jf,Pa);p("wr.logic.LogicPlugin",Jf);Jf.prototype._log=A.getLog("wr.logic.LogicPlugin");Jf.prototype.configure=function(a){Kf(this);if(a.actions)return Lf(this,a.actions)};q(Jf.prototype,"configure",Jf.prototype.configure);Jf.prototype.dispose=function(){Kf(this)};q(Jf.prototype,"dispose",Jf.prototype.dispose);
function Lf(a,b){var c=a.getApp().getConfigPlugin(),d={},f=[],h={};C(b,function(b,f){var h=Mf(a,f,b,c);d[f]=h});C(b,function(a,b){var c=d[b],c=c.chain(function(b){return Nf(b,a,d)}),c=c.chain(function(a){h[b]=a});f.push(c)});return Ta.apply(x,f).chain(function(){a._actions=h},g)}function Kf(a){if(a._actions)C(a._actions,function(a){a.destroy()}),a._actions=k}
function Mf(a,b,c,d){var f,d=d.readInstanceFactory(c.actor);f=c.actorConfig||{};return d.newInstance().chain(function(c){na(c,Qa)&&c.setApp(a.getApp());c.setup(f);return new R(b,c)})}
function Nf(a,b,c){var d=[];C(b,function(b,h){var j,o,s;if(j=/^(transport|success|failure)(?:_(.+))?$/.exec(h))o=j[1],s=j[2],C(b,function(b,f){var h=[],j;(j=c[f])||e(Error("Invalid target action '"+f+"'"));C(b,function(a,b){var c=k,d=g;"string"===typeof a?c=a:"object"===typeof a&&(d=a.value||g);h.push(new vb(b,c,d))});j=j.chain(function(b){"success"===o?a.addSuccessHop(s,b,h):"failure"===o?a.addFailureHop(b,h):"transport"===o&&a.addTransport(b,h)});d.push(j)})});return Ta.apply(x,d).chain(function(){return a},
g)}Jf.prototype.getAction=function(a){this._actions||e(new w("Actions are not available"));return this._actions[a]||k};q(Jf.prototype,"getAction",Jf.prototype.getAction);Jf.prototype.executeAction=function(a,b,c){var d=this.getAction(a);d||e(Error("Action '"+a+"' not found"));return d.execute(b,c)};q(Jf.prototype,"executeAction",Jf.prototype.executeAction);function Of(){this._app=k}p("wr.ui.ViewerBasedControlFactory",Of);Of.prototype.setApp=ca("_app");q(Of.prototype,"setApp",Of.prototype.setApp);
Of.prototype.create=function(a,b,c,d){var f=this;this._app||e(new w("Application not set"));var h=this._app.getConfigPlugin().readInstanceFactory(a._config.viewer,[a,b]),j=a._config.viewerConfig||{};h||e(Error("View does not have a configured viewer"));return h.newInstance().chain(function(h){var s;a.getViews();na(h,Qa)&&h.setApp(f._app);h.isContextProvider()?(s=f.newContainer(a,b,h),d&&h.setContextRegistry(f.newContextRegistry(s,0,d))):s=f.newControl(a,b,h);h.setup(j,c,k);return s})};
q(Of.prototype,"create",Of.prototype.create);Of.prototype.destroy=function(a,b,c){c.destroy()};q(Of.prototype,"destroy",Of.prototype.destroy);Of.prototype.newContextRegistry=function(a,b,c){return new Bf(a,c)};q(Of.prototype,"newContextRegistry",Of.prototype.newContextRegistry);Of.prototype.newControl=function(a,b,c){return new O(this.makeControlId(a,b),c)};q(Of.prototype,"newControl",Of.prototype.newControl);Of.prototype.newContainer=function(a,b,c){return new P(this.makeControlId(a,b),c)};
q(Of.prototype,"newContainer",Of.prototype.newContainer);Of.prototype.makeControlId=function(a,b){var c=[a._id];b&&jQuery.each(b,function(a,b){jQuery.merge(c,["[",b,"]"])});return c.join("")};q(Of.prototype,"makeControlId",Of.prototype.makeControlId);function Pf(){this._app=k}t(Pf,Of);p("wr.ui.DisplayControlFactory",Pf);Pf.prototype.newControl=function(a,b,c){return new Q(this.makeControlId(a,b),c)};q(Pf.prototype,"newControl",Pf.prototype.newControl);Pf.prototype.newContainer=function(a,b,c){return new Q(this.makeControlId(a,b),c)};q(Pf.prototype,"newContainer",Pf.prototype.newContainer);function S(a,b){P.call(this,a,b);this._lastFocusedControlId=k;this.addEventListener("focus",jQuery.proxy(this._handleFocus,this))}t(S,P);p("wr.ui.Window",S);S.prototype.open=function(){this.setAttribute("open",i)};q(S.prototype,"open",S.prototype.open);S.prototype.close=function(){this.setAttribute("open",l)};q(S.prototype,"close",S.prototype.close);S.prototype.isOpen=function(){return this.getAttribute("open")===i};q(S.prototype,"isOpen",S.prototype.isOpen);S.prototype.setTitle=function(a){this.setData({title:a})};
q(S.prototype,"setTitle",S.prototype.setTitle);S.prototype.getTitle=function(){return this.getData().title||k};q(S.prototype,"getTitle",S.prototype.getTitle);S.prototype.readAttributes=function(){var a=S._super.readAttributes.call(this);a.visible=a.open;a.enabled=i;return a};q(S.prototype,"readAttributes",S.prototype.readAttributes);
S.prototype.writeAttributes=function(a){a.visible!==g&&e(new ia("Cannot set window 'visible' attribute directly"));a.enabled!==g&&e(new ia("Cannot set window 'enabled' attribute"));S._super.writeAttributes.call(this,a);a.focused===i&&Qf(this)};q(S.prototype,"writeAttributes",S.prototype.writeAttributes);S.prototype._handleFocus=function(a){a=a._sourceControl;a===this?Qf(this):this._lastFocusedControlId=a._id};
function Qf(a){var b;(b=a._lastFocusedControlId?a.lookupControl(a._lastFocusedControlId):a.getControls()[0]||k)?b.focus():a._lastFocusedControlId=k}S.prototype.toString=function(){var a=["Window:",this._id],b=k;try{b=this.getTitle()}catch(c){}b&&(a.push(':("'),a.push(b),a.push('")'));return a.join("")};function Rf(){this._app=k}t(Rf,Of);p("wr.ui.WindowControlFactory",Rf);Rf.prototype.newControl=function(a,b,c){return new S(this.makeControlId(a,b),c)};q(Rf.prototype,"newControl",Rf.prototype.newControl);Rf.prototype.newContainer=function(a,b,c){return new S(this.makeControlId(a,b),c)};q(Rf.prototype,"newContainer",Rf.prototype.newContainer);function T(a,b,c){K.call(this,a,b,c)}t(T,K);p("wr.ui.html.ElementViewer",T);T.prototype._log2=A.getLog("wr.ui.html.ElementViewer");T.prototype._codeLog=A.getLog("wr.ui.html.ElementViewer._code");T.prototype.setup=function(a,b){T._super.setup.call(this,a,b);jQuery(this.getContext()).on(Sf,jQuery.proxy(this.handleEvent,this))};q(T.prototype,"setup",T.prototype.setup);T.prototype.destroy=function(){jQuery(this.getContext()).off(Sf,this.handleEvent);T._super.destroy.call(this)};
q(T.prototype,"destroy",T.prototype.destroy);var Tf={focusin:"focus",focusout:"blur",click:"click",keypress:"keypress",keydown:"keydown",keyup:"keyup"},Sf=function(){var a=[];C(Tf,function(b,c){a.push(c+".wr")});return a.join(" ")}();T.prototype.handleEvent=function(a){var b=Tf[a.type];b&&this.raiseEventForHtmlEvent(b,k,a)};q(T.prototype,"handleEvent",T.prototype.handleEvent);var Uf={pointer:"pointer",wait:"wait"},Vf={pointer:"pointer",wait:"wait"};
T.prototype.writeAttributes=function(a){var b=jQuery(this.getContext()),c=a&&a.visible;c!==g&&(c?b.show():b.hide());c=a&&a.cursorType;if(c!==g)b[0].style.cursor=Vf[c]||"";T._super.writeAttributes.call(this,a)};q(T.prototype,"writeAttributes",T.prototype.writeAttributes);T.prototype.readAttributes=function(){var a=T._super.readAttributes.call(this),b=jQuery(this.getContext());a.visible=b.is(":visible");a.cursorType=Uf[b[0].style.cursor]||g;return a};q(T.prototype,"readAttributes",T.prototype.readAttributes);
T.prototype.writeData=function(a){var b=a.html;if(b!==g){var c=jQuery(this.getContext()),d=jQuery(this.getLastFocusedElement()),f=this.isFocused()?d.attr("id"):g,a=d[0]&&bd(d[0]),d=d.is(":text")?d.val():k;this.updateContent(b);f&&(this._log2.debug(Wf(this,"Restoring focus to element '"+f+"'")),b=c.find("#"+vc(f)),0<b.length?(ad(b[0]),a&&(f=b.is(":text")?b.val():k,d&&f&&d!==f&&(a=ed(a,d,f)),dd(b[0],a))):this._log2.debug(Wf(this,"Focus not restored to disappeared element '"+f+"'")))}};
q(T.prototype,"writeData",T.prototype.writeData);T.prototype.sanitizeHTML=function(a){var b,c;return(b=/<body(?:\s[^>]+)?>/i.exec(a))&&(c=/<\/body>/i.exec(a))?a.substring(b.index+b[0].length,c.index):a};q(T.prototype,"sanitizeHTML",T.prototype.sanitizeHTML);
T.prototype.extractResourceElements=function(a){var b,c,d=k;if((b=/<head[^>]*>/i.exec(a))&&(c=/<\/head>/i.exec(a)))d=_.str.trim(a.substring(b.index+b[0].length,c.index));return d?jQuery(jQuery.parseHTML(d,i)).filter("script, link, style").get():[]};q(T.prototype,"extractResourceElements",T.prototype.extractResourceElements);
function Xf(a,b){"string"===typeof b&&(/<\/?html[\s>]/.test(b)||/<\/?head[\s>]/.test(b)||/<\/?body[\s>]/.test(b))&&a._log2.warn("HTML fragment appears to contain elements forbidden in document body: this may cripple UI behavior");var c=jQuery("<div/>")[0];if("string"===typeof b)a._setInnerHTML(c,b);else for(var d;d=b[0];)c.insertBefore(d,k);return c}
T.prototype._setInnerHTML=function(a,b){var c=l,d=jQuery("<div/>")[0];d.innerHTML='<script>"test";<\/script>';if(0>d.innerHTML.toLowerCase().indexOf("<script"))d.innerHTML='<form></form><script>"test";<\/script>',c=0<d.innerHTML.toLowerCase().indexOf("<script");Zb(d);c=c?function(a,b){a.innerHTML="<form id='_hack_form'></form>"+b;var c=a.firstChild;"_hack_form"===c.id&&Zb(c)}:function(a,b){a.innerHTML=b};T.prototype._setInnerHTML=c;return c(a,b)};
T.prototype.updateContent=function(a){var b=this.createOldContentFragment(),c=this.createNewContentFragment(this.sanitizeHTML(a)),a=jQuery(this.extractResourceElements(a)).filter(function(){var a=gd(this,i);return a?kd(a):i}),d=c.firstChild;a.each(function(){c.insertBefore(this,d)});fc();try{this.replaceContent(b,c)}catch(f){f instanceof sa?(this._log2.error(Wf(this,"Error caused by inline scripts in updated content (see log for full code)"),f.cause||f),this._codeLog.isDebugEnabled()&&this._codeLog.debug(Wf(this,
"Executed code was:\r\n"+f.sourceCode))):this._log2.error(Wf(this,"Error during content update"),f)}finally{gc()}a.each(function(){var a=gd(this,i);a&&ld(a.name)});this.destroyFragments(b,c)};q(T.prototype,"updateContent",T.prototype.updateContent);T.prototype.createOldContentFragment=function(){return Xf(this,this.getContext().childNodes)};q(T.prototype,"createOldContentFragment",T.prototype.createOldContentFragment);T.prototype.createNewContentFragment=function(a){return Xf(this,a)};
q(T.prototype,"createNewContentFragment",T.prototype.createNewContentFragment);T.prototype.destroyFragments=function(a,b){ac(a);ac(b)};q(T.prototype,"destroyFragments",T.prototype.destroyFragments);T.prototype.replaceContent=function(a,b){var c=jQuery(this.getContext());c.empty();ic();try{bc(c[0],jQuery.makeArray(b.childNodes))}finally{var d=jc();0<d.length&&(d=jQuery("<div>"+d.join("")+"</div>")[0],bc(c[0],jQuery.makeArray(d.childNodes)))}};q(T.prototype,"replaceContent",T.prototype.replaceContent);
function Wf(a,b){return"["+a.getView()._id+"] "+b};function Yf(a,b){K.call(this,a,b,i);this._containersFilter=k;this._availableViews={}}t(Yf,T);p("wr.ui.html.ContainerElementViewer",Yf);Yf.prototype.setup=function(a,b){if(Pd(b))b=b.body,b==k&&e(Error("DOM Document context must contain a HTML body"));a.containersFilter||e(Error("Containers filter not specified"));this._containersFilter=a.containersFilter;Yf._super.setup.call(this,a,b);this._refreshContexts(k,Zf(this),l)};q(Yf.prototype,"setup",Yf.prototype.setup);
Yf.prototype.destroy=function(){this._refreshContexts(Zf(this),k,i);Yf._super.destroy.call(this)};q(Yf.prototype,"destroy",Yf.prototype.destroy);
Yf.prototype.replaceContent=function(a,b){function c(a){var b=[];jQuery.each(a,function(a,c){b.push(c.value)});return jQuery(b)}var d=Zf(this,a),f=Zf(this,b),f=f.map(function(){var a=jQuery(this),b=a.attr("id");return b&&a.is(":empty")&&(b=d.filter("#"+vc(b)).eq(0),b[0]&&a[0]!==b[0])?(a[0].parentNode.replaceChild(b[0],a[0]),b.find("script").filter(function(){return/^$|\/(?:java|ecma)script/i.test(this.type)}).each(function(){Zb(this)}),b[0]):k});jQuery(this.getContext()).is("body")&&($f(jQuery(b)),
ag(jQuery(a),jQuery(b)));Yf._super.replaceContent.call(this,a,b);f=Ad(d,f);this._refreshContexts(c(f.removed),c(f.added),l)};q(Yf.prototype,"replaceContent",Yf.prototype.replaceContent);function $f(a){a.children().each(function(){jQuery.data(this,"wr-initial",i)})}function ag(a,b){var c=a.children(),d=[],f=[],h;for(h=0;h<c.length&&!jQuery.data(c[h],"wr-initial");h++)d.push(c[h]);for(h=c.length-1;0<h&&!jQuery.data(c[h],"wr-initial");h--)f.unshift(c[h]);b.prepend(jQuery(d)).append(jQuery(f))}
jQuery(function(){var a=jQuery("body");a[0]&&$f(a)});Yf.prototype.refreshSubViews=function(){this._refreshContexts(k,k,l)};q(Yf.prototype,"refreshSubViews",Yf.prototype.refreshSubViews);
Yf.prototype._refreshContexts=function(a,b,c){var d=this,f=this.getContextRegistry(),h=this.collectSubViewsDiffs();jQuery.each(h.removed,function(a,b){var c=b._id;f&&f.removeContext(b);delete d._availableViews[c]});f&&a&&a.each(function(){var a=d._availableViews[jQuery(this).attr("id")];a&&f.removeContext(a)});jQuery.each(h.added,function(a,b){d._availableViews[b._id]=b});!c&&b&&b.each(function(){var a=d._availableViews[jQuery(this).attr("id")];a&&f.addContext(a,k,this)})};
function Zf(a,b){return(b=b||a.getContext())&&a._containersFilter?jQuery(Rd(b,a._containersFilter)):k};function bg(a,b){K.call(this,a,b,i)}t(bg,T);p("wr.ui.html.OverloadedElementViewer",bg);bg.prototype.setup=function(a,b){bg._super.setup.call(this,a,b);this._refreshContexts(l)};q(bg.prototype,"setup",bg.prototype.setup);bg.prototype.destroy=function(){this._refreshContexts(i);bg._super.destroy.call(this)};q(bg.prototype,"destroy",bg.prototype.destroy);bg.prototype.refreshSubViews=function(){this._refreshContexts(l)};q(bg.prototype,"refreshSubViews",bg.prototype.refreshSubViews);
bg.prototype._refreshContexts=function(a){var b=this.getContextRegistry();if(b){var c=this.getContext(),d=this.collectSubViewsDiffs();if(a)d.added=[],d.removed=this.getView().getViews();jQuery.each(d.removed,function(a,c){b.removeContext(c)});jQuery.each(d.added,function(a,d){b.addContext(d,k,c)})}};function jb(a,b,c,d){a||e(new TypeError("Constructor name required"));c&&!d&&e(new TypeError("Resource loader required"));this._ctorName=a;this._ctorArgs=b||[];this._scriptURL=c?c:k;this._loader=c?d:k;this._loadPromise=k}p("wr.util.InstanceFactory",jb);jb.prototype.getConstructorName=m("_ctorName");q(jb.prototype,"getConstructorName",jb.prototype.getConstructorName);
jb.prototype.newInstance=function(){function a(){try{var a=Vd(b._ctorName);"function"!==typeof a&&e(new ReferenceError("Unable to find constructor '"+b._ctorName+"'"));var f=ja(a.prototype);a.apply(f,b._ctorArgs);c.success(f)}catch(h){c.failure(h)}}var b=this,c=new Sa;if(this._scriptURL&&this._loadPromise===k)this._loadPromise=this._loader.load(this._scriptURL,"script"),this._loader=this._scriptURL=k;if(this._loadPromise!==k)this._loadPromise.onSuccess(function(){a()}).onFailure(function(a){c.failure(a)});
else a();return c.getPromise()};q(jb.prototype,"newInstance",jb.prototype.newInstance);function lb(a){this._factories=a||[]}p("wr.util.InstanceListFactory",lb);lb.prototype.getSize=function(){return this._factories.length};q(lb.prototype,"getSize",lb.prototype.getSize);lb.prototype.newInstance=function(){var a=[];jQuery.each(this._factories,function(b,c){a.push(c.newInstance())});return Ta.apply(Ta,a)};q(lb.prototype,"newInstance",lb.prototype.newInstance);function U(){this._displayFactory=this._display=this._rootView=this._factoriesPromise=this._app=k;this._autoFocusFirstWindow=l}t(U,Pa);p("wr.ui.UIPlugin",U);U.prototype._log=A.getLog("wr.ui.UIPlugin");U.prototype.configure=function(a){cg(this);this._autoFocusFirstWindow=!!a.autoFocusFirstWindow;this._factoriesPromise=dg(this,a.factories);if(a.display)return eg(this,a.display).chain(function(a){(a=a.getWindows()[0])&&a.open()})};q(U.prototype,"configure",U.prototype.configure);
U.prototype.start=function(){var a;if(this._autoFocusFirstWindow&&(a=this._display&&this._display.getWindows()[0]))this._log.debug("Automatically focusing the first window"),a.focus()};q(U.prototype,"start",U.prototype.start);U.prototype.dispose=function(){cg(this)};q(U.prototype,"dispose",U.prototype.dispose);U.prototype.getViewTree=function(){this._rootView||e(new w("View tree is not available"));return this._rootView};q(U.prototype,"getViewTree",U.prototype.getViewTree);
U.prototype.configureViews=function(a,b){var c=this,d={};c._log.isDebugEnabled()&&c._log.debug("Configuring sub-views of "+a+": "+u(b));this.unconfigureViews(a,b);fg(this,a,function(a){C(b,function(b,j){var o=gg(c,j,b,d);a.addView(o);c._log.debug("Added view "+o+" to "+a)})})};q(U.prototype,"configureViews",U.prototype.configureViews);
U.prototype.unconfigureViews=function(a,b){var c=this;fg(this,a,function(a){_.each(_.filter(a.getViews(),function(a){return b.hasOwnProperty(a._id)}),function(b){a.removeView(b);c._log.debug("Removed view "+b+" from "+a)})})};q(U.prototype,"unconfigureViews",U.prototype.unconfigureViews);function fg(a,b,c){var d;b?(d=a.lookupControl(b))||e(Error("Parent control '"+b+"' not found")):d=a.getDisplay();b=d._viewer.getView();c.call(a,b);d._viewer.refreshSubViews()}
U.prototype.getDisplay=function(){this._display||e(new w("Display is not available"));return this._display};q(U.prototype,"getDisplay",U.prototype.getDisplay);U.prototype.getWindows=function(){return this.getDisplay().getControls()};q(U.prototype,"getWindows",U.prototype.getWindows);U.prototype.getMainWindow=function(){return this.getDisplay().getWindows()[0]||k};q(U.prototype,"getMainWindow",U.prototype.getMainWindow);U.prototype.getWindow=function(a){return this.getDisplay().getControl(a)};
q(U.prototype,"getWindow",U.prototype.getWindow);U.prototype.lookupControl=function(a){var b=this.getDisplay();return a===b._id?b:b.lookupControl(a)};q(U.prototype,"lookupControl",U.prototype.lookupControl);
function eg(a,b){var c=k,c=gg(a,"display",b,{});return a._factoriesPromise.chain(function(b){function f(a){var c=b[a._config.factory||"default"];c||e(Error("Missing factory for view "+a));return c}var h,j;h=a.getDisplayContext();j=f(c);return Wa(j.create,j,c,k,h,f).chain(function(b){b instanceof Q||a._log.warn("Display factory did not provide an instance of the expected type");a._rootView=c;a._display=b;a._displayFactory=j;return b})})}
function cg(a){if(a._display)a._displayFactory&&a._rootView?a._displayFactory.destroy(a._rootView,k,a._display):a._display.destroy(),a._displayFactory=k,a._display=k;a._rootView=k}U.prototype.getDisplayContext=function(){return GLOBAL};q(U.prototype,"getDisplayContext",U.prototype.getDisplayContext);
function dg(a,b){var c=a.getApp().getConfigPlugin(),d=[],f=[];C(b,function(a,b){d.push(b);f.push(c.readInstanceFactory(a))});a._log.debug("Creating "+f.length+" control factories");return(new lb(f)).newInstance().chain(function(b){var c={};a._log.debug("Created "+b.length+" control factories");jQuery.each(b,function(b,f){na(f,Qa)&&f.setApp(a.getApp());c[d[b]]=f});return c})}
function gg(a,b,c,d){var f,h=c.views;f=hg(b,c);h&&C(h,function(b,c){var h=gg(a,c,b,d);f.addView(h)});d[b]&&e(Error("Duplicate view id '"+b+"'"));d[b]=c;return f}function hg(a,b){var c=/^views$/,d={};C(b,function(a,b){c.test(b)||(d[b]=a)});return new Fd(a,d)};function ig(){this._globals={};this._active=l;this._savedGlobals=k}p("wr.util.obj.ExecutionScope",ig);var jg=0;q(ig,"getActiveCount",function(){return jg});ig.prototype.isActive=m("_active");q(ig.prototype,"isActive",ig.prototype.isActive);ig.prototype.activate=function(){this._active&&e(new w("Already active"));this._active=i;jg++;var a=this._savedGlobals={};_.each(this._globals,function(b,c){a[c]=GLOBAL[c];b!==g?GLOBAL[c]=b:Ud(GLOBAL,c)})};q(ig.prototype,"activate",ig.prototype.activate);
ig.prototype.deactivate=function(){this._active||e(new w("Not active"));this._active=l;jg--;var a=this._savedGlobals||{};_.each(this._globals,function(b,c,d){b=a[c];d[c]=GLOBAL[c];b!==g?GLOBAL[c]=b:Ud(GLOBAL,c)});this._savedGlobals=k};q(ig.prototype,"deactivate",ig.prototype.deactivate);ig.prototype.run=function(a){if(this._active)return kg(a);try{return this.activate(),kg(a)}finally{this.deactivate()}};q(ig.prototype,"run",ig.prototype.run);
function kg(a){var b=lg(a),c=[];_.each(b,function(a){c.push(Object.prototype.hasOwnProperty.call(GLOBAL,a)?GLOBAL[a]:g)});return a.apply(GLOBAL,c)}ig.prototype.getGlobal=function(a){return this._globals[""+a]};q(ig.prototype,"getGlobal",ig.prototype.getGlobal);ig.prototype.setGlobal=function(a,b){var a=""+a,c=this._globals.hasOwnProperty(a);this._globals[a]=b;this._active&&this._savedGlobals&&(c||(this._savedGlobals[a]=GLOBAL[a]),GLOBAL[a]=b)};q(ig.prototype,"setGlobal",ig.prototype.setGlobal);
ig.prototype.deleteGlobal=function(a){var a=""+a,b=this._globals.hasOwnProperty(a);delete this._globals[a];this._active&&this._savedGlobals&&(b||(this._savedGlobals[a]=GLOBAL[a]),Ud(GLOBAL,a))};q(ig.prototype,"deleteGlobal",ig.prototype.deleteGlobal);function lg(a){return(a=/^function[^(]*\(\s*([^)]*?)\s*\)/.exec(Function.prototype.toString.call(a))[1])?a.split(/\s*,\s*/):[]};function mg(a,b){ig.call(this);this._includeSelector=a;this._excludeSelector=b;this._combinedSelector=a+", "+b;this._elements=k}t(mg,ig);p("internal.ui.html.ElementExecutionScope",mg);mg.prototype.activate=function(){mg._super.activate.call(this);GLOBAL.document.getElementById=jQuery.proxy(this._getElementByScopedId,this)};q(mg.prototype,"activate",mg.prototype.activate);mg.prototype.deactivate=function(){mg._super.deactivate.call(this);delete GLOBAL.document.getElementById;this._elements=k};
q(mg.prototype,"deactivate",mg.prototype.deactivate);mg.prototype._getElementByScopedId=function(a){var b=GLOBAL.document,b=(GLOBAL.HTMLDocument?GLOBAL.HTMLDocument.prototype:GLOBAL.Object.getPrototypeOf(b)).getElementById.call(b,a);if(!b)return k;var c=jQuery(b).closest(this._combinedSelector);return!c[0]||c.is(this._includeSelector)?b:jQuery(this._includeSelector).find("#"+vc(a))[0]||k};function V(){this._app=k;var a=this;this._context=this._requestAction=this._containersFilter=k;this._windowKeys=new ng;this._controlCloseListener=function(b){b=b._sourceControl;b instanceof S&&og(a,b)};this._navListener={requestEnqueue:function(a){var c=a._inputs[0];a._wr_enqueuedForm=c&&c.form},requestBeforeServe:function(b){var c=b._wr_enqueuedForm;c&&!jQuery.contains(GLOBAL.document.documentElement,c)&&(a._log.isDebugEnabled()&&a._log.debug("Canceling request bound to post a removed form "+u(c)),
a.getApp().getPlugin("nav").cancel(b))}};this._startListeners=[];this._started=l}t(V,Pa);p("wr.LegacyAjaxPlugin",V);V.prototype._log=A.getLog("wr.LegacyAjaxPlugin");V.prototype.configure=function(a){a.containersFilter||e(Error("Containers filter not specified"));this._containersFilter=a.containersFilter};q(V.prototype,"configure",V.prototype.configure);
V.prototype.start=function(){var a=this,b=jQuery(GLOBAL.document),c=jQuery("[data-wr-appid]"),d=this.getApp().getPlugin("ui").getDisplay(),f=new pg(d,this);this._requestAction=qg(this);this._context=new Ff(d,f);this.getApp().getPlugin("nav").addListener(this._navListener);this._hyperlinkActivationListener=rg(this,this._handleHyperlinkActivation);this._hyperlinkNavigationListener=rg(this,this._handleHyperlinkNavigation);this._formButtonActivationListener=rg(this,this._handleFormButtonActivation);this._formSubmissionListener=
rg(this,this._handleFormSubmission);b.on("focusin mouseenter","a, area",jQuery.proxy(this._hyperlinkActivationListener,this));b.on("click","a, area",jQuery.proxy(this._hyperlinkNavigationListener,this));b.on("click submit",":submit",jQuery.proxy(this._formButtonActivationListener,this));b.on("submit","form",jQuery.proxy(this._formSubmissionListener,this));c.on("submit","form",jQuery.proxy(this._formSubmissionListener,this));d.addEventListener("contentchange",sg);d.addEventListener("close",this._controlCloseListener);
tg(this,this._context.getDisplay());ug(this,d.getWindows()[0]);vg(this);_.each(this._startListeners,function(b){try{b()}catch(c){a.error("Error invoking start listener",c)}});this._started=i};q(V.prototype,"start",V.prototype.start);
V.prototype.stop=function(){var a=jQuery(GLOBAL.document),b=jQuery("[data-wr-appid]"),c=this.getApp().getPlugin("ui").getDisplay(),d=this.getApp()._externalExecutionScope;d.deleteGlobal("WRAjaxRequest");d.deleteGlobal("ajaxRequest");wg(this,"Prototype")?this._log.debug("Skipping deletion of global $H Prototype's function"):d.deleteGlobal("$H");this._log.info("Compatibility interface disabled");this._windowKeys.clear();d=this.getApp().getPlugin("nav").getRouterOfType(L);d.linkInfos={};d.linkInfosSelective=
{};this._log.debug("Cleared link information");d.clearLinkData();this._log.debug("Cleared link data");c.removeEventListener("close",this._controlCloseListener);c.removeEventListener("contentchange",sg);a.off("focusin mouseenter","a, area",this._hyperlinkActivationListener);a.off("click","a, area",this._hyperlinkNavigationListener);a.off("click",":submit",this._formButtonActivationListener);a.off("submit","form",this._formSubmissionListener);b.off("submit","form",this._formSubmissionListener);this.getApp().getPlugin("nav").removeListener(this._navListener);
this._context=k;if(this._requestAction)this._requestAction.destroy(),this._requestAction=k;this._started=l};q(V.prototype,"stop",V.prototype.stop);V.prototype.addStartListener=function(a){if(a&&(this._startListeners.push(a),this._started))try{a()}catch(b){this.error("Error invoking start listener",b)}};q(V.prototype,"addStartListener",V.prototype.addStartListener);V.prototype.removeStartListener=function(a){if(a)this._startListeners=_.without(this._startListeners,a)};
q(V.prototype,"removeStartListener",V.prototype.removeStartListener);q(V,"addEventInterceptor",function(a){a&&Mc.add(a)});q(V,"removeEventInterceptor",function(a){a&&Mc.remove(a)});var xg=[];q(V,"addContentUpdateHandler",function(a){a&&xg.push(a)});q(V,"removeContentUpdateHandler",function(a){a&&(xg=_.without(xg,a))});var yg=jQuery.Callbacks("unique");q(V,"addContentUpdateListener",function(a){a&&yg.add(a)});q(V,"removeContentUpdateListener",function(a){a&&yg.remove(a)});
function sg(a){var b;a=a._sourceControl;a instanceof S&&(b=(a=a.getControls()[0])&&a._viewer,a=b,a instanceof K&&yg.fireWith(GLOBAL,[a.getContext()]))}
q(V,"navigateLocation",function(a,b){var c=Lc().getPlugin("oldajax");zg(a)&&(!b||"_self"===b)?(c._log.isDebugEnabled()&&c._log.debug("Firing AJAX request for location change to "+a),c._compatAjaxRequest(a,c._compatNewHash({}))):(c._log.isDebugEnabled()&&c._log.debug("Queuing request for location change to "+a),c.getApp().getPlugin("nav").navigate(new E(a,k,k,b)))});q(V,"exit",function(){var a=Lc(),b=a.getPlugin("ui").getDisplay().getOpenWindows(),c;for(c=b.length-1;0<=c;c--)b[c].close();return a.stop().chain(function(){a.dispose()})});
function vg(a){function b(){d.setGlobal("$H",jQuery.proxy(c._compatNewHash,c))}var c=a,d=a.getApp()._externalExecutionScope;wg(a,"$H")?wg(a,"Prototype")?a._log.debug("Skipping re-definition of global $H Prototype's function"):(a._log.warn("Overwriting existing global $H function"),b()):b();(wg(a,"ajaxRequest")||wg(a,"WRAjaxRequest"))&&e(Error("Legacy interface conflict: check that WebRatio 6.x and earlier client runtime is not loaded"));d.setGlobal("ajaxRequest",jQuery.proxy(a._compatAjaxRequest,
a));d.setGlobal("WRAjaxRequest",jQuery.proxy(a._compatAjaxRequestCtor,a));a._log.info("Compatibility interface enabled")}function wg(a,b){var c=0<jg;return"undefined"!==typeof a.getApp()._externalExecutionScope.getGlobal(b)||!c&&"undefined"!==typeof GLOBAL[b]}n=V.prototype;n._compatNewHash=function(a){a=a||{};return{get:function(b){return a[b]},toObject:function(){return a}}};
n._compatAjaxRequest=function(a,b){var c=this;try{this._log.debug("Queuing AJAX request to "+a);var d=Ag(this,b),f=Bg(a,d);nd();var h=this._context,j=h.getDisplay(),o=this._requestAction.execute(f,h),s=[],W=function(a){a._sourceControl instanceof S&&s.push(a._sourceControl)};j.addEventListener("open",W);j.addEventListener("contentchange",W);var f=function(){j.removeEventListener("open",W);j.removeEventListener("contentchange",W);0<s.length&&_.each(s,function(a){var b=a.getControls()[0],b=b&&b._viewer;
(b=b instanceof K?b.getContext():k)&&jQuery(b).data("wr-appid",c.getApp()._id);ug(c,a);tg(c,a)})},o=o.chain(f,f),f=function(){nd()},o=o.chain(f,f),M=ba(),o=o.chain(M,M);if(d.onFailureCallBack)o.onFailure(function(){GLOBAL.eval(d.onFailureCallBack+"()")});if(d.onCompleteCallBack)o.onComplete(function(){d.onCompleteCallBack()})}catch(Ka){this._log.error("Error preparing request",Ka)}if((o=GLOBAL.event)&&("click"===o.type||"keypress"===o.type))if(jQuery(o.target||o.srcElement).closest("[href], :submit")[0])GLOBAL.event.returnValue=
l;return l};
n._compatAjaxRequestCtor=function(a,b){var c=this;this._log.debug("Legacy precomputed request to "+a);var d=Ag(this,b),d=Bg(a,d),f=this._requestAction._actor,h=this._context;d.allowIgnoreFields=l;var j=f.precomputeRequest(d);d.allowIgnoreFields=i;var o=f.precomputeRequest(d);return function(a,b){var d={};_.each(b.useless||[],function(b){d[b]=function(){c._log.warn("Calling "+a+"."+b+" - Method has no more use")}});_.each(b.gone||[],function(b){d[b]=function(){c._log.warn("Calling "+a+"."+b+" - Method is no longer available")}});
jQuery.extend(d,b.impl||{});return d}("WRAjaxRequest",{useless:["updateWindowSize"],gone:["sendRequest","openInfoDialog","createAndPrepareWindow"],impl:{getUrl:function(a){return c._compatNewHash(a===l?j:o)},computeResponse:function(a){f.processResponse(a,h)}}})};
function Ag(a,b){var c={};if(b){c.isForm=b.get("isForm");c.pressedLink=b.get("pressedLink");c.selectiveRefresh=b.get("selectiveRefresh");c.onFailureCallBack=b.get("onFailureCallBack");c.onCompleteCallBack=b.get("onCompleteCallBack");c.extraQuery=b.get("extraQuery");c.sourcePage=b.get("sourcePage");b.get("window")!==g&&a._log.warn("Setting request window option - Option has no more use");b.get("closeWindow")!==g&&a._log.warn("Setting request closeWindow option - Option has no more use");var d=b.get("waitingWindow");
c.openWaitingWindow=!!d;c.waitWin={};if(c.openWaitingWindow)c.waitWin.message=d.get("message"),c.waitWin.width=d.get("width"),c.waitWin.height=d.get("height"),c.waitWin.duration=d.get("duration"),c.waitWin.className=d.get("className");c.indicator=b.get("indicator")}return c}
function Bg(a,b){var c,d;b.isForm?((d=jQuery("#"+vc(a))[0]||jQuery("form[name='"+wc(a)+"']")[0])||e(Error("Form '"+a+"' not found for posting")),c=jQuery(d).attr("action"),d={form:d,button:b.pressedLink,selectiveRefresh:"boolean"===typeof b.selectiveRefresh?b.selectiveRefresh:i}):(c=a,d=k);b.extraQuery&&(c=c+(0>c.indexOf("?")?"?":"")+b.extraQuery);var f={};f.url=c;d&&(f.formPost={button:d.button,form:d.form,selectiveRefresh:d.selectiveRefresh});b.openWaitingWindow&&(f.waitWin={id:"_oldajax_ww",duration:b.waitWin.duration,
width:b.waitWin.width,height:b.waitWin.height,className:b.waitWin.className,message:b.waitWin.message});b.indicator&&(f.indicator="string"===typeof b.indicator?jQuery("#"+vc(b.indicator))[0]:b.indicator);return f}function qg(a){var b=new N;na(b,Qa)&&b.setApp(a.getApp());b.setup({});return new R("oldajax",b)}n._handleHyperlinkActivation=function(a){a=jQuery(a.currentTarget);if(a.attr("href")){var b=this.getApp().getPlugin("nav"),c=Cg(a);b.precompute(c);Ia(c.getURL())&&a.attr("href",Ha(c.getURL(),c.getParams()))}};
n._handleHyperlinkNavigation=function(a){if(!a.isDefaultPrevented()){var b=jQuery(a.currentTarget);if(b.attr("href")&&Dg(b.attr("href"))){a.preventDefault();var a=b.attr("href"),c=b.attr("target")||k;zg(a)&&(!c||"_self"===c)?(this._log.isDebugEnabled()&&this._log.debug("Firing AJAX request for hyperlink "+u(b[0])),this._compatAjaxRequest(a,this._compatNewHash({}))):(this._log.isDebugEnabled()&&this._log.debug("Queuing request for hyperlink "+u(b[0])),this.getApp().getPlugin("nav").navigate(Cg(b)))}}};
function Cg(a){var b=a.attr("href"),a=a.attr("target")||k;return new E(b,k,k,a)}n._handleFormButtonActivation=function(a){var a=jQuery(a.currentTarget),b=jQuery(a[0].form);b[0]&&b.data("_wr_submitButton",a.prop("name"))};
n._handleFormSubmission=function(a){if(!a.isDefaultPrevented()){var b=jQuery(a.currentTarget),c=b.data("_wr_submitButton");if(c&&(b.removeData("_wr_submitButton"),c=b.find(":submit[name='"+vc(c)+"']"),Dg(b.attr("action")||""))){a.preventDefault();var a=b.attr("action")||"",d=b.attr("target")||k,f=c.attr("name"),h=_.str.strRight(f,"button:");(h=b.find(":input:hidden[name='"+vc(h)+"']").attr("value"))||this._log.warn("Cannot find action URL associated with button '"+f+"'");zg(h)&&(!d||"_self"===d)?
(this._log.isDebugEnabled()&&this._log.debug("Firing AJAX request for submit of form "+u(b[0])),(b=b.attr("id")||b.attr("name"))?this._compatAjaxRequest(b,this._compatNewHash({isForm:i,pressedLink:f,selectiveRefresh:l})):this._log.error("Cannot submit a form lacking both 'id' and 'name' attributes")):(this._log.isDebugEnabled()&&this._log.debug("Queuing request for submit of form "+u(b[0])),b=jQuery(ec(b[0])).add(c).get(),b=new E(a,k,b,d),this.getApp().getPlugin("nav").navigate(b))}}};var Eg=new XRegExp("^!(?<fparams>.+)");
function zg(a){a=parseUri(a);a=XRegExp.exec(a.anchor,Eg);return"true"===(a?jQuery.deparam(a.fparams):{}).ajax}function rg(a,b){var c=a.getApp()._id;return function(a){if(""+(jQuery(a.target).parents().filter(function(){return jQuery(this).data("wr-appid")}).data("wr-appid")||"default")===c)return b.call(this,a)}}function Dg(a){(a=parseUri(a).protocol.toLowerCase())||(a=parseUri(GLOBAL.document.location.href).protocol.toLowerCase());return"http"===a||"https"===a}
function pg(a,b){this._display=a;this._parent=b}n=pg.prototype;n.get=da(k);n.set=function(a,b){var c=this._display.lookupControl(a);c?(this._parent._log.debug("Updating HTML data of control '"+a+"'"),c.setData({html:b}),tg(this._parent,c)):_.str.trim(""+b)&&this._parent._log.warn("Control '"+a+"' not found")};n.remove=ba();n.toObject=function(){return{}};n.addEventListener=ba();n.removeEventListener=ba();n.triggerEvent=ba();
function tg(a,b){if(b instanceof P){var c;c=b instanceof Q?b:a.getApp().getPlugin("ui").getDisplay();b===c?_.each(c.getWindows(),function(b){Fg(a,b)}):b instanceof S?Fg(a,b):(c=b._viewer,c instanceof K&&Gg(a,b,c.getContext(),k))}}
function Fg(a,b){var c=a._containersFilter,d=b.getControls()[0],f=d&&d._viewer;if(f instanceof K){var d=b.getParent(),h=d.getWindows()[0],j=[];b===h&&_.each(d.getWindows(),function(a){var b=a.getControls()[0],b=b&&b._viewer;a!==h&&b instanceof K&&Array.prototype.push.apply(j,jQuery.makeArray(Rd(b.getContext(),c)))});d=b.getControls()[0];b===h?Gg(a,d,f.getContext(),j):Gg(a,d,f.getContext(),k)}}
function Gg(a,b,c,d){var f=a._containersFilter,h=_.map(b.getControls(),function(a){return a._viewer.getContext()}),j=[];f&&(j=_.map(jQuery(Rd(c,f)).not(jQuery(d)),aa()));c=Ad(h,j);_.each(c.removed,function(c){var c=c.value.id,d=b.getControl(c);a._log.debug("Removing control for removed container '"+c+"'");d&&(b.removeControl(d),d.destroy())});_.each(b.getControls(),function(b){var c=jQuery("#"+vc(b._id))[0];Gg(a,b,c,k)});_.each(c.added,function(c){var c=c.value,d=c.id,h;a._log.debug("Adding control for added container '"+
d+"'");h=new Hg(new Fd(d,{}),k);d=new P(d,h);h.setup({containersFilter:f},c);b.addControl(d);Gg(a,d,c,k)})}function Hg(a,b){Yf.call(this,a,b)}t(Hg,Yf);n=Hg.prototype;n.setup=function(a,b){Hg._super.setup.call(this,a,b);this._lazyRemove=!!jQuery(this.getContext()).children(".wr-ajaxContent")[0]};
n.updateContent=function(a){function b(a){if(0<=a){var d=b(a-1);return function(b,c){f[a](b,c,d)}}return function(a,b){h.call(c,b)}}var c=this,d=this.getContext(),f=xg,h=Hg._super.updateContent;b(f.length-1)(d,a);yg.fireWith(GLOBAL,[d])};n.createOldContentFragment=function(){return this._lazyRemove?jQuery(this.getContext()).children(".wr-ajaxContent").hide()[0]:Hg._super.createOldContentFragment.call(this)};
n.createNewContentFragment=function(a){a=Hg._super.createNewContentFragment.call(this,a);if(this._lazyRemove){var b=jQuery(a).children(".wr-ajaxContent")[0];b||e(Error("Content holder element missing in new HTML."));b["wr-fragRoot"]=a;a=b}return a};
n.destroyFragments=function(a,b){function c(a){if(a.id)jQuery.data(a,"wr-originalId",a.id),a.id="___"+a.id;if(a.name)jQuery.data(a,"wr-originalName",a.name),a.name="___"+a.name;if(a.form)a.disabled=i;for(var b=0,a=a.childNodes,d=a.length;b<d;b++){var f=a[b];1==f.nodeType&&f.nodeName&&"SELECT"!=f.nodeName.toUpperCase()&&c(f)}}if(this._lazyRemove){c(a);var d=b["wr-fragRoot"];try{delete b["wr-fragRoot"]}catch(f){try{b.removeAttribute("wr-fragRoot")}catch(h){b["wr-fragRoot"]=k}}b=d}Hg._super.destroyFragments.call(this,
a,b)};n.replaceContent=function(a,b){var c=[];jQuery(b).find(".ajaxPreservedMarkup script").each(function(){c.unshift({script:this,parent:this.parentNode,next:this.nextSibling})});if(this._lazyRemove){var d=this.getContext();ic();try{dc(d,[b],a)}finally{var f=jc();0<f.length&&(f=jQuery("<div>"+f.join("")+"</div>")[0],bc(d,jQuery.makeArray(f.childNodes)))}}else Hg._super.replaceContent.call(this,a,b);_.each(c,function(a){a.parent.insertBefore(a.script,a.next)})};
function ug(a,b){var c=b.getControls()[0],c=c&&c._viewer;if(c=c instanceof K?c.getContext():k){var d=a._windowKeys,f=a.getApp().getPlugin("nav").getRouterOfType(L),h=Ig(c,"linkInfos");h&&(Jg(d,b,"info",Wd(h)),Xd(f.linkInfos,h,1),a._log.isDebugEnabled()&&a._log.debug("Received new link information: "+u(h)));if(h=Ig(c,"linkInfosSelective"))Jg(d,b,"infoSel",Wd(h)),Xd(f.linkInfosSelective,h,1),a._log.isDebugEnabled()&&a._log.debug("Received new selective link information: "+u(h));if(c=Ig(c,"linkData"))C(c,
function(a,c){Jg(d,b,"data",[c]);f.mergeLinkData(c,a)}),a._log.isDebugEnabled()&&a._log.debug("Received new link data: "+u(c))}}
function og(a,b){var c=a._windowKeys,d=Kg(c,b,"info"),f=Kg(c,b,"infoSel"),c=Kg(c,b,"data");if(!(0>=d.length&&0>=c.length)){var h=a.getApp().getPlugin("nav").getRouterOfType(L);_.each(d,function(a){delete h.linkInfos[a]});a._log.debug("Cleared link information: "+u(d));_.each(f,function(a){delete h.linkInfosSelective[a]});a._log.debug("Cleared selective link information: "+u(f));_.each(c,function(a){h.clearLinkData(a)});a._log.debug("Cleared link data: "+u(c))}}
function Ig(a,b){if(!a||!b)return k;var c=jQuery(a).find("script[type='application/json'].wr-"+vc(b)).eq(0),c=_.str.trim(c.text()||c.html()||"");return!c?k:jQuery.parseJSON(c)}function ng(){this._usageKeys={};this._keyUsages={}}function Jg(a,b,c,d){var f=b._id+"."+c,b=a._usageKeys[f]||(a._usageKeys[f]=[]);b.push.apply(b,d);var h=a._keyUsages;_.each(d,function(a){(h[a]||(h[a]=[])).push(f)})}
function Kg(a,b,c){var d=b._id+"."+c,b=a._usageKeys[d]||[];delete a._usageKeys[d];var f=a._keyUsages;_.each(b,function(a){var a=f[a],b=-1;a&&0<=(b=_.indexOf(a,d))&&a.splice(b,1)});return b=_.filter(b,function(a){return!Lg(this,c,a)},a)}ng.prototype.clear=function(){this._usageKeys={};this._keyUsages={}};function Lg(a,b,c){return _.some(a._keyUsages[c]||[],function(a){return _.str.endsWith(a,"."+b)})};function X(a){this._id=a;this._plugins={};this._lifecycle=new F(this);this._configured=k;this._earlyConfigResult=new Sa;this._disposed=this._started=this._inited=k;var b=".wr-appui-"+vc(a);this._externalExecutionScope=jQuery(b)[0]?new mg(b,".wr-appui"):new ig;a in X._instances&&e(new w("There is already a known application with id '"+a+"'"));X._instances[a]=this;this._log.info("Creating application '"+a+"'");this._loader=new Oc;this._lifecycle.register(this._loader);var c=this._externalExecutionScope;
_.each(Nc,function(a,b){c.setGlobal(b,a)});_.each(Mg,function(a){this.addLifecycleListener(a)},this)}p("wr.app.App",X);X.prototype._log=A.getLog("wr.App");X._instances={};function Ng(){return _.values(X._instances)}q(X,"getAll",Ng);function Og(a){return X._instances[a]||k}q(X,"get",Og);X.prototype.getId=m("_id");q(X.prototype,"getId",X.prototype.getId);
X.prototype.init=function(){var a=this;this._configured!==i&&e(new w("Application not configured"));this._inited!==k&&e(new w("Application already initialized or initializing"));this._inited=l;this._log.info("Application lifecycle: init");var b=Pg(this,this.getConfigPlugin()._config,l).onFailure(function(b){a._log.error("Error applying final configuration",b)}),b=b.chain(function(){return a._lifecycle.init()}).onFailure(function(b){a._log.error("Error during lifecycle init",b)});return b.onSuccess(function(){a._inited=
i})};q(X.prototype,"init",X.prototype.init);X.prototype.start=function(){var a=this;this._inited!==i&&e(new w("Application not initialized"));this._started!==k&&e(new w("Application already started or starting"));this._started=l;this._log.info("Application lifecycle: start");return this._lifecycle.start().onSuccess(function(){a._started=i;a._log.info("Application '"+a._id+"' started")}).onFailure(function(b){a._log.error("Error during lifecycle start",b)})};q(X.prototype,"start",X.prototype.start);
X.prototype.stop=function(){var a=this;this._started!==i&&e(new w("Application not started or stopping"));this._started=l;this._log.info("Application lifecycle: stop");return this._lifecycle.stop().onSuccess(function(){a._started=k;a._log.info("Application '"+a._id+"' stopped")}).onFailure(function(b){a._log.error("Error during lifecycle stop",b)})};q(X.prototype,"stop",X.prototype.stop);
X.prototype.dispose=function(){var a=this;this._started!==k&&e(new w("Application still started"));if(this._disposed!==k)return bb;this._disposed=l;var b;this._inited===k?b=bb:(this._log.info("Application lifecycle: dispose"),b=this._lifecycle.dispose().onSuccess(function(){a._disposed=i}).onFailure(function(b){a._log.error("Error during lifecycle dispose",b)}));b.onComplete(function(){delete X._instances[a._id]});return b};q(X.prototype,"dispose",X.prototype.dispose);
X.prototype.isInitialized=function(){return this._inited===i};q(X.prototype,"isInitialized",X.prototype.isInitialized);X.prototype.isStarted=function(){return this._started===i};q(X.prototype,"isStarted",X.prototype.isStarted);X.prototype.addLifecycleListener=function(a,b){this._lifecycle.addListener(a,b)};q(X.prototype,"addLifecycleListener",X.prototype.addLifecycleListener);X.prototype.removeLifecycleListener=function(a){this._lifecycle.removeListener(a)};
q(X.prototype,"removeLifecycleListener",X.prototype.removeLifecycleListener);X.prototype.getLoader=m("_loader");q(X.prototype,"getLoader",X.prototype.getLoader);
X.prototype.registerPlugin=function(a,b){la(eb,b);a in this._plugins&&e(new w("Plugin already registered with id '"+a+"'"));b.getApp()&&e(new w("Plugin instance already registered with an application"));this._plugins[a]=b;b.setApp(this);this._lifecycle.register(b);try{this.handlePluginRegistration(a,b)}catch(c){b.setApp(k),this._lifecycle.unregister(b),delete this._plugins[a],e(c)}};q(X.prototype,"registerPlugin",X.prototype.registerPlugin);
X.prototype.unregisterPlugin=function(a){var b=this.getPlugin(a);this.handlePluginUnregistration(a);this._lifecycle.unregister(b);b.setApp(k);delete this._plugins[a]};q(X.prototype,"unregisterPlugin",X.prototype.unregisterPlugin);X.prototype.getPlugin=function(a,b){var c=this._plugins[a];(c=this.handlePluginLookup(a,c))||e(new w("No plugin registered with id '"+a+"'"));b&&!na(c,b)&&e(new TypeError("Plugin registered with id '"+a+"' does not implement the requested interface"));return c};
q(X.prototype,"getPlugin",X.prototype.getPlugin);X.prototype.handlePluginRegistration=function(a,b){"log"===a?na(b,Sc)||e(Error("The special log plugin must implement the interface of wr.log.LogPlugin")):"config"===a&&!na(b,B)&&e(Error("The special config plugin must be implement the interface of wr.config.ConfigPlugin"))};q(X.prototype,"handlePluginRegistration",X.prototype.handlePluginRegistration);X.prototype.handlePluginUnregistration=function(a){"log"===a&&this._log.warn("Log plugin is being unregistered: it might not be possible to continue logging on some components")};
q(X.prototype,"handlePluginUnregistration",X.prototype.handlePluginUnregistration);X.prototype.handlePluginLookup=function(a,b){if(!b&&"config"===a)b=this._bootConfigManager;return b};q(X.prototype,"handlePluginLookup",X.prototype.handlePluginLookup);q(X,"PLUGIN_LOG","log");X.prototype.getLogPlugin=function(){return this.getPlugin("log")};q(X.prototype,"getLogPlugin",X.prototype.getLogPlugin);q(X,"PLUGIN_CONFIG","config");X.prototype.getConfigPlugin=function(){return this._bootConfigManager||this.getPlugin("config")};
q(X.prototype,"getConfigPlugin",X.prototype.getConfigPlugin);
X.prototype.configure=function(a){var b=this;this._configured!==k&&e(new w("Application initial configuration already provided"));this._configured=l;this._bootConfigManager=new B;this._bootConfigManager.setApp(this);this._bootConfigManager.addHandler(new fb);this._bootConfigManager.addHandler(new hb);var c=jQuery.extend({},this.getDefaultConfig()||{},a=a||{})||{},a=Pg(this,c,i);return a=a.chain(function(){b._bootConfigManager=k;b.getConfigPlugin().merge(c);b._earlyConfigResult.success();b._earlyConfigResult=
k;b._configured=i},function(a){b._log.error("Error applying default configuration",a);b._earlyConfigResult.failure(a);return a})};q(X.prototype,"configure",X.prototype.configure);X.prototype.getDefaultConfig=function(){return Ra};q(X.prototype,"getDefaultConfig",X.prototype.getDefaultConfig);X.prototype.mergeConfig=function(a){return Qg(this,function(){return this.merge(a)})};q(X.prototype,"mergeConfig",X.prototype.mergeConfig);
X.prototype.mergeConfigFiles=function(a){var b=arguments;return Qg(this,function(){return this.mergeFiles.apply(this,b)})};q(X.prototype,"mergeConfigFiles",X.prototype.mergeConfigFiles);X.prototype.isConfigurable=function(){return this._inited===k};q(X.prototype,"isConfigurable",X.prototype.isConfigurable);
function Qg(a,b){a._inited!==k&&e(new w("Unable to modify configuration at this time"));return a._earlyConfigResult?a._earlyConfigResult.getPromise().chain(function(){return Xa(b,a.getConfigPlugin())}):Xa(b,a.getConfigPlugin())}
function Pg(a,b,c){var d=c?"Boot: ":"";if(!b)return bb;a._log.isDebugEnabled()&&a._log.debug(d+"Applying configuration: "+u(b));var f=[],h;for(h in b)b.hasOwnProperty(h)&&f.push(Rg(a,h,b[h],c));b=Ta.apply(x,f);b.onSuccess(function(){a._log.debug(d+"New configuration applied")}).onFailure(function(b){a._log.error(d+"Error applying new configuration",b)});return b}
function Rg(a,b,c,d){var f=d?"Boot: ":"";a._log.debug(f+"Applying configuration of plugin '"+b+"'");var d=a.getConfigPlugin().readInstanceFactory(c.implementation,k),h=new Sa,j=a._plugins[b];if(j){var o;try{o=Vd(d._ctorName)}catch(s){o=k}o!==j.constructor?h.failure(new w("A different implementation of '"+b+"' is already registered")):h.success(j)}else a._log.debug(f+"Constructing plugin '"+b+"' with "+d._ctorName),d.newInstance().onSuccess(function(c){try{a.registerPlugin(b,c),h.success(c)}catch(d){h.failure(d)}}).onFailure(function(a){h.failure(a)});
o=h.getPromise().chain(function(d){var h=jQuery.extend({},c);delete h.implementation;a._log.isDebugEnabled()&&a._log.debug(f+"Configuring plugin '"+b+"': "+u(h));return Wa(d.configure,d,h)});return o=o.onSuccess(function(){a._log.debug(f+"Applied configuration of plugin '"+b+"'")}).onFailure(function(c){a._log.error(f+"Error applying configuration of plugin '"+b+"'",c)})}var Mg=[];
q(X,"addLifecycleListener",function(a,b){a&&!_.contains(Mg,a)&&(Mg.push(a),_.each(Ng(),function(c){c.addLifecycleListener(a,b)}))});q(X,"removeLifecycleListener",function(a){if(a){var b=_.indexOf(Mg,a);0<=b&&(Mg.splice(b,1),_.each(Ng(),function(b){b.removeLifecycleListener(a)}))}});X.prototype.getExternalExecutionScope=m("_externalExecutionScope");q(X.prototype,"getExternalExecutionScope",X.prototype.getExternalExecutionScope);var Sg=k;function Lc(){var a=Sg||Og("default");a||e(new w("Default application not available"));return a}p("wr.getApp",Lc);p("wr.runScoped",function(a,b){var c=Tg(a),d=Og(c);d||e(Error("Application '"+c+"' not found"));return Ug(d,b)});function Kc(a){var b=Sg;return b?Vg(b._id,a):a}p("wr.keepScoped",Kc);function Vg(a,b){var c=Tg(a);return function(){var a=this,f=jQuery.makeArray(arguments),h=Og(c);h||e(Error("Application '"+c+"' not found"));return Ug(h,function(){return b.apply(a,f)})}}
p("wr.makeScoped",Vg);function Tg(a){"string"!==typeof a&&(a=""+(jQuery(a).parents().filter(function(){return jQuery(this).data("wr-appid")}).data("wr-appid")||""));return""+(a||"default")}function Ug(a,b){var c=Sg;try{return Sg=a,a._externalExecutionScope.run(b)}finally{Sg=c}}
(function(){pc();var a=jQuery("script").filter(function(){return"wr.debug.js"===/^(.+?)(?:;jsessionid=[0-9A-Fa-f]+)?$/.exec(parseUri(jQuery(this).attr("src")).file)[1]});if(a[0]){a=parseUri(a.attr("src"));nc=jQuery.deparam(a.query);var b=parseUri(GLOBAL.location.href);mc=b.protocol+"://"+b.authority+b.directory+a.directory}a=A.getLog("wr");a.info("WebRatio Runtime (7.2.18.20180613150103, wr.debug.js)");a.info("Platform: "+pa().getInfo()||"Unknown");a.isDebugEnabled()&&(a.debug("Base path: "+mc),a.debug("Boot parameters: "+
u(nc)))})();
nc&&"true"===nc.createDocumentApp&&function(){var a=A.getLog("wr"),b=new X("default");window.onerror=function(b,c,d,f){"Script error."===b&&0===d&&0===f||a.error("Unexpected error occurred: "+b+"\n\tat <unknown>("+c+":"+d+")")};b._externalExecutionScope.activate();var c=new Sa;Mb(function(){b.configure({}).onSuccess(function(){c.success()}).onFailure(function(a){c.failure(a)})});var d=c.getPromise(),f=oc(),h=f.configFiles?f.configFiles.split(","):[];0<h.length&&(d=d.chain(function(){return b.mergeConfigFiles.apply(b,h)}));
var j=new Sa;jQuery(GLOBAL.document).ready(function(){try{pc(),j.success()}catch(b){a.error("Final environemnt check failed",b),j.failure(b)}});j.getPromise().onSuccess(function(){nd()});Ta(j.getPromise(),d).chain(function(){return Wa(b.init,b)},function(b){a.error("Error during default application init",b);return b}).chain(function(){return Wa(b.start,b)},function(b){a.error("Error during default application start",b);return b});jQuery(GLOBAL).one("unload",function(){bb.chain(function(){return Wa(b.stop,
b)},g).chain(function(){return Wa(b.dispose,b)}).onFailure(function(b){a.error("Error during default application stop and dispose",b)}).onComplete(function(){window.onerror=k})})}();function Wg(a){if(a===k)return k;"boolean"!==typeof a&&e(new TypeError("Not a boolean value"));return a?"true":"false"}p("wr.util.str.formatBoolean",Wg);function Xg(a){if(a===k)return k;if("true"===a)return i;if("false"===a)return l;e(new TypeError("Invalid boolean string '"+a+"'"))}p("wr.util.str.parseBoolean",Xg);function Yg(a){"number"===typeof a&&0!==a%1&&e(new TypeError("Not a finite integral number"));return Zg(a)}p("wr.util.str.formatInteger",Yg);
function $g(a){var b=ah(a);b!==k&&0!==b%1&&e(new TypeError("Invalid integral number string '"+a+"'"));return b}p("wr.util.str.parseInteger",$g);function Zg(a){if(a===k)return k;("number"!==typeof a||!isFinite(a))&&e(new TypeError("Not a finite number"));return""+a}p("wr.util.str.formatDecimal",Zg);function ah(a){if(a===k)return k;var b=Number(""+a);isFinite(b)||e(new TypeError("Invalid number string '"+a+"'"));return b}p("wr.util.str.parseDecimal",ah);var bh=new XRegExp("^(?<y>\\d{4})-(?<M>\\d{2})-(?<d>\\d{2})$");
function ch(a){if(a===k)return k;a instanceof Date||e(new TypeError("Not a Date"));var b=[];b.push(""+a.getFullYear());b.push("-");b.push(_.str.lpad(""+(a.getMonth()+1),2,"0"));b.push("-");b.push(_.str.lpad(""+a.getDate(),2,"0"));return b.join("")}p("wr.util.str.formatDate",ch);function dh(a){if(a===k)return k;var b;if(b=XRegExp.exec(a,bh))return new Date(b.y,b.M-1,b.d,0,0,0,0);e(new TypeError("Invalid date string '"+a+"'"))}p("wr.util.str.parseDate",dh);var eh=new XRegExp("^(?<H>\\d{2}):(?<m>\\d{2}):(?<s>\\d{2})(?<S>\\.\\d{3})?$");
function fh(a){if(a===k)return k;a instanceof Date||e(new TypeError("Not a Date"));var b=[];b.push(_.str.lpad(""+a.getHours(),2,"0"));b.push(":");b.push(_.str.lpad(""+a.getMinutes(),2,"0"));b.push(":");b.push(_.str.lpad(""+a.getSeconds(),2,"0"));a=a.getMilliseconds();0<a&&(b.push("."),b.push(_.str.lpad(""+a,3,"0")));return b.join("")}p("wr.util.str.formatTime",fh);
function gh(a){if(a===k)return k;var b;if(b=XRegExp.exec(a,eh))return new Date(1970,0,1,b.H,b.m,b.s,b.S||"0");e(new TypeError("Invalid time string '"+a+"'"))}p("wr.util.str.parseTime",gh);function hh(a){if(a===k)return k;a instanceof Date||e(new TypeError("Not a date"));return[ch(a),fh(a)].join("T")}p("wr.util.str.formatTimestamp",hh);
function ih(a){if(a===k)return k;var b=a.split("T",2);if(2===b.length){var c=XRegExp.exec(b[0],bh),b=XRegExp.exec(b[1],eh);if(c&&b)return new Date(c.y,c.M-1,c.d,b.H,b.m,b.s,b.S||"0")}e(new TypeError("Invalid timestamp string '"+a+"'"))}p("wr.util.str.parseTimestamp",ih);function Y(a,b,c,d,f){K.call(this,a,b,c);this._idAttribute=d;this._filterSelector=f;this._selector=k}t(Y,K);p("wr.ui.html.DynamicElementsViewer",Y);
Y.prototype.setup=function(a,b){Y._super.setup.call(this,a,b);var c=this.getView()._id;this._selector="id"===this._idAttribute?"#"+vc(c):"["+vc(this._idAttribute)+"='"+wc(c)+"']";(c=this.findElements())||e(Error("No elements found for selectors "+this._selector+", "+this._filterSelector));this.validateElements(c);var c=jQuery(this.getContext()),d=c.data("__wr_ui_html_created");d?c.data("__wr_ui_html_created",d++):(this.bindListeners(c[0]),c.data("__wr_ui_html_created",1))};q(Y.prototype,"setup",Y.prototype.setup);
Y.prototype.validateElements=ba();q(Y.prototype,"validateElements",Y.prototype.validateElements);Y.prototype.destroy=function(){if(this._selector){var a=jQuery(this.getContext()),b=a.data("__wr_ui_html_created");1===b?(this.unbindListeners(a[0]),a.removeData("__wr_ui_html_created")):a.data("__wr_ui_html_created",b--);this._selector=k;Y._super.destroy.call(this)}};q(Y.prototype,"destroy",Y.prototype.destroy);
var jh={focusin:"focus",focusout:"blur",click:"click",keypress:"keypress",keydown:"keydown",keyup:"keyup"},kh=function(){var a=[];C(jh,function(b,c){a.push(c+".wr")});return a.join(" ")}();Y.prototype.bindListeners=function(a){var b=this,c=this.newListenerProxy(a,function(a){var c=jh[a.type];c&&jQuery(a.target).is(b._selector)&&b.raiseEventForHtmlEvent(c,k,a)});jQuery(a).on(kh,this._filterSelector,c)};q(Y.prototype,"bindListeners",Y.prototype.bindListeners);
Y.prototype.unbindListeners=function(a){jQuery.each(this.getListenerProxies(a),function(b,c){jQuery(a).off(kh,this._filterSelector,c)});this.destroyListenerProxies(a)};q(Y.prototype,"unbindListeners",Y.prototype.unbindListeners);var lh=new J;Y.prototype.newListenerProxy=function(a,b){function c(a){return b.call(this,a)}var d=lh.get(a);d||lh.put(a,d=new v);d.put(b,c);return c};q(Y.prototype,"newListenerProxy",Y.prototype.newListenerProxy);
Y.prototype.getListenerProxies=function(a){return(a=lh.get(a))?a.getValues():[]};q(Y.prototype,"getListenerProxies",Y.prototype.getListenerProxies);Y.prototype.destroyListenerProxies=function(a){lh.remove(a)};q(Y.prototype,"destroyListenerProxies",Y.prototype.destroyListenerProxies);Y.prototype.writeAttributes=function(a){var b=jQuery(this.findElements()),c=a&&a.visible;c!==g&&(c?b.show():b.hide());b.is(":input")&&(c=a&&a.enabled,c!==g&&b.prop("disabled",!c));Y._super.writeAttributes.call(this,a)};
q(Y.prototype,"writeAttributes",Y.prototype.writeAttributes);Y.prototype.readAttributes=function(){var a=Y._super.readAttributes.call(this),b=jQuery(this.findElements());a.visible=b.is(":visible");b.is(":input")&&(a.enabled=!b.prop("disabled"));return a};q(Y.prototype,"readAttributes",Y.prototype.readAttributes);
Y.prototype.findElements=function(){this._selector||e(new w("Cannot access elements before setup"));var a=jQuery(this._selector,this.getContext());this._filterSelector&&(a=a.filter(this._filterSelector));return 0<a.length?a:k};q(Y.prototype,"findElements",Y.prototype.findElements);function mh(a,b){Y.call(this,a,b,l,"id","a")}t(mh,Y);p("wr.ui.html.DynamicAnchorViewer",mh);function nh(a,b){Y.call(this,a,b,l,"name",":button, :submit")}t(nh,Y);p("wr.ui.html.DynamicButtonViewer",nh);function Z(a,b,c,d){Y.call(this,a,b,l,"name",c);this._supportsOptions=d;this._valueType=k}t(Z,Y);p("wr.ui.html.DynamicFieldViewer",Z);Z.prototype.setup=function(a,b){a.valueType||e(Error("Value type not specified"));this._valueType=a.valueType;Z._super.setup.call(this,a,b)};q(Z.prototype,"setup",Z.prototype.setup);Z.prototype.getValueType=function(){this._valueType||e(new w("Cannot access value type before setup"));return this._valueType};q(Z.prototype,"getValueType",Z.prototype.getValueType);
Z.prototype.writeData=function(a){var b=this;Z._super.writeData.call(this,a);if(a){var c=this.findElements();if(c&&this._valueType){var d=a.value;if(d!==g){var f;jQuery.isArray(d)?(f=[],jQuery.each(d,function(a,c){f.push(b.formatValue(c,b._valueType))})):f=this.formatValue(d,this._valueType);this.writeRawValue(c,f)}a=a.valueOptions;if(a!==g&&this._supportsOptions){var h=[];jQuery.each(a,function(a,c){h.push(b.formatValue(c,b._valueType))});Bd(this.readOptionRawValues(c),h,function(a){b.removeOptionRawValue(c,
a)},function(a){b.addOptionRawValue(c,a)})}}}};q(Z.prototype,"writeData",Z.prototype.writeData);
Z.prototype.readData=function(){var a=this,b=Z._super.readData.call(this)||{},c=this.findElements();if(c&&this._valueType){var d,f=this.readRawValue(c);jQuery.isArray(f)?(d=[],jQuery.each(f,function(b,c){d.push(a.parseValue(c,a._valueType))})):d=this.parseValue(f,this._valueType);var h;this._supportsOptions?(c=this.readOptionRawValues(c),h=[],jQuery.each(c,function(b,c){h.push(a.parseValue(c,a._valueType))})):h="boolean"===this._valueType?[l,i]:g;b.value=d;b.valueOptions=h}return b};
q(Z.prototype,"readData",Z.prototype.readData);Z.prototype.readRawValue=ha;q(Z.prototype,"readRawValue",Z.prototype.readRawValue);Z.prototype.writeRawValue=ha;q(Z.prototype,"writeRawValue",Z.prototype.writeRawValue);Z.prototype.readOptionRawValues=ha;q(Z.prototype,"readOptionRawValues",Z.prototype.readOptionRawValues);Z.prototype.addOptionRawValue=ha;q(Z.prototype,"addOptionRawValue",Z.prototype.addOptionRawValue);Z.prototype.removeOptionRawValue=ha;q(Z.prototype,"removeOptionRawValue",Z.prototype.removeOptionRawValue);
Z.prototype.parseValue=function(a,b){if(a===k)return k;var c=oh[b];if(c=c&&c.parse)return c(a);e(new ia("Value of type '"+b+"' not supported"))};q(Z.prototype,"parseValue",Z.prototype.parseValue);Z.prototype.formatValue=function(a,b){if(a===k)return k;var c=oh[b];if(c=c&&c.format)return c(a);e(new ia("Value of type '"+b+"' not supported"))};q(Z.prototype,"formatValue",Z.prototype.formatValue);var ph={format:aa(),parse:aa()},oh={};oh["boolean"]={format:Wg,parse:Xg};oh.date={format:ch,parse:dh};
oh.decimal={format:Zg,parse:ah};oh["float"]={format:Zg,parse:ah};oh.integer={format:Yg,parse:$g};oh.password=ph;oh.string=ph;oh.text=ph;oh.time={format:fh,parse:gh};oh.timestamp={format:hh,parse:ih};oh.url=ph;function qh(a,b){Z.call(this,a,b,":checkbox",i)}t(qh,Z);p("wr.ui.html.DynamicCheckboxViewer",qh);qh.prototype.validateElements=function(a){rh._super.validateElements.call(this,a);var b=this.getValueType();("blob"===b||1===a.length&&"boolean"!==b)&&e(Error("Type "+b+" not supported"))};q(qh.prototype,"validateElements",qh.prototype.validateElements);
qh.prototype.readRawValue=function(a){a=jQuery(a);if(1===a.length)return Wg(!!a.prop("checked"));var b=[];a.filter(":checked").each(function(a,d){b.push(jQuery(d).val())});return 0<b.length?b:k};q(qh.prototype,"readRawValue",qh.prototype.readRawValue);
qh.prototype.writeRawValue=function(a,b){var c=jQuery(a);if(1===c.length){jQuery.isArray(b)&&e(new TypeError("Value cannot be an array"));var d=Xg(b)===i;c.prop("checked",d)}else{var f={};b!=k&&(jQuery.isArray(b)||e(new TypeError("Value must be an array")),jQuery.each(b,function(a,b){f[b]=(f[b]||0)+1}));c.each(function(a,b){var c=jQuery(b),d=c.val(),W=l,M=f[d];0<M&&(W=i,f[d]=M-1);c.prop("checked",W)})}};q(qh.prototype,"writeRawValue",qh.prototype.writeRawValue);
qh.prototype.readOptionRawValues=function(a){if(1===a.length)return[Wg(l),Wg(i)];var b=[];jQuery(a).each(function(a,d){b.push(jQuery(d).val())});return b};q(qh.prototype,"readOptionRawValues",qh.prototype.readOptionRawValues);qh.prototype.addOptionRawValue=function(a,b){1===a.length&&e(new ia);var c=jQuery(a),d=c.eq(0).clone().removeAttr("id");d.val(b);c.parent().append(d)};q(qh.prototype,"addOptionRawValue",qh.prototype.addOptionRawValue);
qh.prototype.removeOptionRawValue=function(a,b){1===a.length&&e(new ia);jQuery(jQuery(a).get().reverse()).each(function(a,d){var f=jQuery(d);if(f.val()===b)return Zb(f[0]),l})};q(qh.prototype,"removeOptionRawValue",qh.prototype.removeOptionRawValue);function sh(a,b){Z.call(this,a,b,":file",l)}t(sh,Z);p("wr.ui.html.DynamicFileViewer",sh);sh.prototype.validateElements=function(a){sh._super.validateElements.call(this,a);a=this.getValueType();"blob"!==a&&e(Error("Type "+a+" not supported"))};q(sh.prototype,"validateElements",sh.prototype.validateElements);sh.prototype.readData=ba();q(sh.prototype,"readData",sh.prototype.readData);sh.prototype.writeData=ba();q(sh.prototype,"writeData",sh.prototype.writeData);function th(a,b){Z.call(this,a,b,":radio",i)}t(th,Z);p("wr.ui.html.DynamicRadioViewer",th);th.prototype.validateElements=function(a){th._super.validateElements.call(this,a);var b=this.getValueType();"blob"===b&&e(Error("Type "+b+" not supported"));1>=a.length&&e(Error("At least two radio inputs are required"))};q(th.prototype,"validateElements",th.prototype.validateElements);th.prototype.readRawValue=function(a){a=jQuery(a).filter(":checked");return 0<a.length?a.val():k};
q(th.prototype,"readRawValue",th.prototype.readRawValue);th.prototype.writeRawValue=function(a,b){jQuery.isArray(b)&&e(new TypeError("Value cannot be an array"));var c=l;jQuery(a).each(function(a,f){var h=jQuery(f),j=l;!c&&h.val()===b&&(j=c=i);h.prop("checked",j)})};q(th.prototype,"writeRawValue",th.prototype.writeRawValue);th.prototype.readOptionRawValues=function(a){var b=[];jQuery(a).each(function(a,d){b.push(jQuery(d).val())});return b};q(th.prototype,"readOptionRawValues",th.prototype.readOptionRawValues);
th.prototype.addOptionRawValue=function(a,b){var c=jQuery(a),d=c.eq(0).clone().removeAttr("id");d.val(b);c.parent().append(d)};q(th.prototype,"addOptionRawValue",th.prototype.addOptionRawValue);th.prototype.removeOptionRawValue=function(a,b){jQuery(jQuery(a).get().reverse()).each(function(a,d){var f=jQuery(d);if(f.val()===b)return Zb(f[0]),l})};q(th.prototype,"removeOptionRawValue",th.prototype.removeOptionRawValue);function uh(a,b){Z.call(this,a,b,"select",i)}t(uh,Z);p("wr.ui.html.DynamicSelectViewer",uh);uh.prototype.validateElements=function(a){uh._super.validateElements.call(this,a);a=this.getValueType();"blob"===a&&e(Error("Type "+a+" not supported"))};q(uh.prototype,"validateElements",uh.prototype.validateElements);uh.prototype.readRawValue=function(a){return jQuery(a).val()};q(uh.prototype,"readRawValue",uh.prototype.readRawValue);
uh.prototype.writeRawValue=function(a,b){var c=jQuery(a),d=c.attr("multiple")!==g,f={};b!=k&&(d?(jQuery.isArray(b)||e(new TypeError("Value must be an array")),jQuery.each(b,function(a,b){f[b]=(f[b]||0)+1})):(jQuery.isArray(b)&&e(new TypeError("Value cannot be an array")),f[b]=1));c.find("option").each(function(a,b){var c=jQuery(b),d=c.val(),W=l,M=f[d];0<M&&(W=i,f[d]=M-1);c.prop("selected",W)})};q(uh.prototype,"writeRawValue",uh.prototype.writeRawValue);
uh.prototype.readOptionRawValues=function(a){var b=[];jQuery(a).find("option").each(function(a,d){b.push(jQuery(d).val())});return b};q(uh.prototype,"readOptionRawValues",uh.prototype.readOptionRawValues);uh.prototype.addOptionRawValue=function(a,b){var c=jQuery(a).find("option"),d=c.eq(0).clone().removeAttr("id");d.val(b);c.parent().append(d)};q(uh.prototype,"addOptionRawValue",uh.prototype.addOptionRawValue);
uh.prototype.removeOptionRawValue=function(a,b){jQuery(jQuery(a).find("option").get().reverse()).each(function(a,d){var f=jQuery(d);if(f.val()===b)return Zb(f[0]),l})};q(uh.prototype,"removeOptionRawValue",uh.prototype.removeOptionRawValue);function rh(a,b){Z.call(this,a,b,":text, :password, textarea",l)}t(rh,Z);p("wr.ui.html.DynamicTextViewer",rh);rh.prototype.validateElements=function(a){rh._super.validateElements.call(this,a);a=this.getValueType();"blob"===a&&e(Error("Type "+a+" not supported"))};q(rh.prototype,"validateElements",rh.prototype.validateElements);rh.prototype.writeAttributes=function(a){var b=jQuery(this.findElements()),c=a&&a.editable;c!==g&&b.prop("readOnly",!c);rh._super.writeAttributes.call(this,a)};
q(rh.prototype,"writeAttributes",rh.prototype.writeAttributes);rh.prototype.readAttributes=function(){var a=rh._super.readAttributes.call(this),b=jQuery(this.findElements());a.editable=!b.prop("readOnly");return a};q(rh.prototype,"readAttributes",rh.prototype.readAttributes);rh.prototype.readRawValue=function(a){a=jQuery(a).val();return""===a?k:a};q(rh.prototype,"readRawValue",rh.prototype.readRawValue);
rh.prototype.writeRawValue=function(a,b){jQuery.isArray(b)&&e(new TypeError("Value cannot be an array"));jQuery(a).val(b||"")};q(rh.prototype,"writeRawValue",rh.prototype.writeRawValue);})();})(this,jQuery);